{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e08f\\\\Desktop\\\\Proyectos\\\\Resumen\\\\mapa-v2\\\\src\\\\components\\\\FilterPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FilterPanel = ({\n  markers,\n  selectedRegion,\n  onFiltersChange\n}) => {\n  _s();\n  const [selectedComuna, setSelectedComuna] = useState('');\n  const [selectedMarca, setSelectedMarca] = useState('');\n  const [selectedJefeZona, setSelectedJefeZona] = useState('');\n  const [selectedEds, setSelectedEds] = useState('');\n  const [edsSearchTerm, setEdsSearchTerm] = useState('');\n  const [soloGuerraPrecios, setSoloGuerraPrecios] = useState(false);\n  const [soloEstacionesPES, setSoloEstacionesPES] = useState(false);\n  const tuasMarcas = ['Aramco', 'Petrobras'];\n\n  // âœ… LOG: Se ejecuta SIEMPRE que markers cambie o en el primer render\n  useEffect(() => {\n    if (!markers || markers.length === 0) {\n      console.log('âš ï¸ No hay markers disponibles');\n      return;\n    }\n    const regionesUnicas = [...new Set(markers.map(m => m.Region))].filter(r => r).sort();\n    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');\n    console.log('ðŸ—ºï¸ TODAS LAS REGIONES DISPONIBLES:', regionesUnicas);\n    console.log('ðŸ“Š Total de regiones Ãºnicas:', regionesUnicas.length);\n    console.log('ðŸ“ Total de markers recibidos:', markers.length);\n\n    // Contar cuÃ¡ntos markers por CADA regiÃ³n\n    const countByRegion = {};\n    markers.forEach(m => {\n      const region = m.Region || 'Sin regiÃ³n';\n      countByRegion[region] = (countByRegion[region] || 0) + 1;\n    });\n    console.log('ðŸ“ˆ Desglose de markers por regiÃ³n:');\n    Object.entries(countByRegion).sort((a, b) => b[1] - a[1]).forEach(([region, count]) => {\n      console.log(`   ${region}: ${count} markers`);\n    });\n    console.log('ðŸ” RegiÃ³n actualmente seleccionada:', selectedRegion);\n    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');\n  }, [markers, selectedRegion]); // Agregar selectedRegion tambiÃ©n para ver cambios\n\n  const comunas = useMemo(() => {\n    const filtered = markers.filter(m => m.Region === selectedRegion);\n    return [...new Set(filtered.map(m => m.Comuna))].sort();\n  }, [markers, selectedRegion]);\n  const marcas = useMemo(() => {\n    const filtered = markers.filter(m => m.Region === selectedRegion);\n    return [...new Set(filtered.map(m => m.Marca))].sort();\n  }, [markers, selectedRegion]);\n  const jefesZona = useMemo(() => {\n    const filtered = markers.filter(m => m.Region === selectedRegion && m.nombre && tuasMarcas.includes(m.Marca));\n    return [...new Set(filtered.map(m => m.nombre))].sort();\n  }, [markers, selectedRegion, tuasMarcas]);\n  const comunasDelJefe = useMemo(() => {\n    if (!selectedJefeZona) return [];\n    const jefeMarkers = markers.filter(m => m.nombre === selectedJefeZona);\n    return [...new Set(jefeMarkers.map(m => m.Comuna))];\n  }, [markers, selectedJefeZona]);\n  const allEds = useMemo(() => {\n    let filtered = markers.filter(m => m.Region === selectedRegion);\n    if (selectedJefeZona) {\n      filtered = filtered.filter(m => comunasDelJefe.includes(m.Comuna));\n    }\n    if (selectedComuna) {\n      filtered = filtered.filter(m => m.Comuna === selectedComuna);\n    }\n    if (selectedMarca) {\n      filtered = filtered.filter(m => m.Marca === selectedMarca);\n    }\n    return [...new Set(filtered.map(m => m.eds))].filter(eds => eds).sort();\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, comunasDelJefe]);\n  const filteredEds = useMemo(() => {\n    return allEds.filter(eds => eds.toLowerCase().includes(edsSearchTerm.toLowerCase()));\n  }, [allEds, edsSearchTerm]);\n  const filteredMarkers = useMemo(() => {\n    return markers.filter(m => {\n      const regionMatch = m.Region === selectedRegion;\n      const edsMatch = !selectedEds || m.eds === selectedEds;\n      const guerraMatch = !soloGuerraPrecios || m.Guerra_Precio === 'Si';\n      const pesMatch = !soloEstacionesPES || m.Surtidores_Autoservicio && m.Surtidores_Autoservicio !== null && m.Surtidores_Autoservicio !== '';\n      if (selectedJefeZona) {\n        const esDelJefe = m.nombre === selectedJefeZona;\n        const esCompetenciaEnComunasDelJefe = comunasDelJefe.includes(m.Comuna);\n        const jefeMatch = esDelJefe || esCompetenciaEnComunasDelJefe;\n        return regionMatch && jefeMatch && edsMatch && guerraMatch && pesMatch;\n      }\n      if (selectedComuna) {\n        const todasLasEstacionesEnComuna = m.Comuna === selectedComuna;\n        const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\n        return regionMatch && todasLasEstacionesEnComuna && marcaMatch && edsMatch && guerraMatch && pesMatch;\n      }\n      const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\n      return regionMatch && marcaMatch && edsMatch && guerraMatch && pesMatch;\n    });\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, selectedEds, comunasDelJefe, soloGuerraPrecios, soloEstacionesPES]);\n  const filteredMarkersForMercado = useMemo(() => {\n    return markers.filter(m => {\n      const regionMatch = m.Region === selectedRegion;\n      const guerraMatch = !soloGuerraPrecios || m.Guerra_Precio === 'Si';\n      const pesMatch = !soloEstacionesPES || m.Surtidores_Autoservicio && m.Surtidores_Autoservicio !== null && m.Surtidores_Autoservicio !== '';\n      if (selectedJefeZona) {\n        const esDelJefe = m.nombre === selectedJefeZona;\n        const esCompetenciaEnComunasDelJefe = comunasDelJefe.includes(m.Comuna);\n        const jefeMatch = esDelJefe || esCompetenciaEnComunasDelJefe;\n        return regionMatch && jefeMatch && guerraMatch && pesMatch;\n      }\n      if (selectedComuna) {\n        const todasLasEstacionesEnComuna = m.Comuna === selectedComuna;\n        const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\n        return regionMatch && todasLasEstacionesEnComuna && marcaMatch && guerraMatch && pesMatch;\n      }\n      const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\n      return regionMatch && marcaMatch && guerraMatch && pesMatch;\n    });\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, comunasDelJefe, soloGuerraPrecios, soloEstacionesPES]);\n  const uniqueFilteredMarkers = useMemo(() => {\n    const uniqueMap = new Map();\n    filteredMarkers.forEach(marker => {\n      const key = marker.pbl || marker.id || `${marker.lat}_${marker.lng}`;\n      const existing = uniqueMap.get(key);\n      if (!existing) {\n        uniqueMap.set(key, marker);\n      } else {\n        const existingDate = existing.fecha_aplicacion ? new Date(existing.fecha_aplicacion) : new Date(0);\n        const currentDate = marker.fecha_aplicacion ? new Date(marker.fecha_aplicacion) : new Date(0);\n        if (currentDate > existingDate) {\n          uniqueMap.set(key, marker);\n        }\n      }\n    });\n    return Array.from(uniqueMap.values());\n  }, [filteredMarkers]);\n  useEffect(() => {\n    onFiltersChange(uniqueFilteredMarkers, filteredMarkersForMercado);\n  }, [uniqueFilteredMarkers, filteredMarkersForMercado, onFiltersChange]);\n  const markersByBrand = useMemo(() => {\n    const result = {};\n    uniqueFilteredMarkers.forEach(m => {\n      result[m.Marca] = (result[m.Marca] || 0) + 1;\n    });\n    return result;\n  }, [uniqueFilteredMarkers]);\n  const brandCounts = useMemo(() => {\n    const filtered = markers.filter(m => m.Region === selectedRegion);\n    const brandMap = new Map();\n    filtered.forEach(m => {\n      const brand = m.Marca || 'Sin marca';\n      const id = m.pbl || m.id || `${m.lat}_${m.lng}`;\n      if (!brandMap.has(brand)) {\n        brandMap.set(brand, new Set());\n      }\n      brandMap.get(brand).add(id);\n    });\n    return Object.fromEntries(Array.from(brandMap.entries()).map(([name, set]) => [name, set.size]));\n  }, [markers, selectedRegion]);\n  const handleClearFilters = () => {\n    setSelectedComuna('');\n    setSelectedMarca('');\n    setSelectedJefeZona('');\n    setSelectedEds('');\n    setEdsSearchTerm('');\n    setSoloGuerraPrecios(false);\n    setSoloEstacionesPES(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"filter-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"comuna-select\",\n        children: \"Comuna\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"comuna-select\",\n        value: selectedComuna,\n        onChange: e => setSelectedComuna(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Todas las comunas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), comunas.map(comuna => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: comuna,\n          children: comuna\n        }, comuna, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"marca-select\",\n        children: \"Marca\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"marca-select\",\n        value: selectedMarca,\n        onChange: e => setSelectedMarca(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Todas las marcas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), marcas.map(marca => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: marca,\n          children: [marca, \" \", brandCounts[marca] ? `(${brandCounts[marca]})` : '']\n        }, marca, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"jefe-select\",\n        children: \"Jefe de Zona\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"jefe-select\",\n        value: selectedJefeZona,\n        onChange: e => setSelectedJefeZona(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Selecciona un Jefe de Zona\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), jefesZona.map(jefe => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: jefe,\n          children: jefe\n        }, jefe, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"eds-select\",\n        children: \"EDS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"eds-select\",\n        value: selectedEds,\n        onChange: e => setSelectedEds(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Todas las EDS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), filteredEds.map(eds => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: eds,\n          children: eds\n        }, eds, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-group filter-checkbox\",\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"guerra-precios-checkbox\",\n        className: \"checkbox-label\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"guerra-precios-checkbox\",\n          type: \"checkbox\",\n          checked: soloGuerraPrecios,\n          onChange: e => setSoloGuerraPrecios(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"checkbox-text\",\n          children: \"Guerra de Precios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-group filter-checkbox filter-checkbox-pes\",\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"estaciones-pes-checkbox\",\n        className: \"checkbox-label\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"estaciones-pes-checkbox\",\n          type: \"checkbox\",\n          checked: soloEstacionesPES,\n          onChange: e => setSoloEstacionesPES(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"checkbox-text\",\n          children: \"Estaciones PES\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n};\n_s(FilterPanel, \"vLgRSi7qwZzCOo5Db7jlPIuMqNc=\");\n_c = FilterPanel;\nexport default FilterPanel;\nvar _c;\n$RefreshReg$(_c, \"FilterPanel\");","map":{"version":3,"names":["React","useMemo","useState","useEffect","jsxDEV","_jsxDEV","FilterPanel","markers","selectedRegion","onFiltersChange","_s","selectedComuna","setSelectedComuna","selectedMarca","setSelectedMarca","selectedJefeZona","setSelectedJefeZona","selectedEds","setSelectedEds","edsSearchTerm","setEdsSearchTerm","soloGuerraPrecios","setSoloGuerraPrecios","soloEstacionesPES","setSoloEstacionesPES","tuasMarcas","length","console","log","regionesUnicas","Set","map","m","Region","filter","r","sort","countByRegion","forEach","region","Object","entries","a","b","count","comunas","filtered","Comuna","marcas","Marca","jefesZona","nombre","includes","comunasDelJefe","jefeMarkers","allEds","eds","filteredEds","toLowerCase","filteredMarkers","regionMatch","edsMatch","guerraMatch","Guerra_Precio","pesMatch","Surtidores_Autoservicio","esDelJefe","esCompetenciaEnComunasDelJefe","jefeMatch","todasLasEstacionesEnComuna","marcaMatch","filteredMarkersForMercado","uniqueFilteredMarkers","uniqueMap","Map","marker","key","pbl","id","lat","lng","existing","get","set","existingDate","fecha_aplicacion","Date","currentDate","Array","from","values","markersByBrand","result","brandCounts","brandMap","brand","has","add","fromEntries","name","size","handleClearFilters","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","comuna","marca","jefe","type","checked","_c","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/FilterPanel.jsx"],"sourcesContent":["import React, { useMemo, useState, useEffect } from 'react';\r\n\r\nconst FilterPanel = ({ markers, selectedRegion, onFiltersChange }) => {\r\n  const [selectedComuna, setSelectedComuna] = useState('');\r\n  const [selectedMarca, setSelectedMarca] = useState('');\r\n  const [selectedJefeZona, setSelectedJefeZona] = useState('');\r\n  const [selectedEds, setSelectedEds] = useState('');\r\n  const [edsSearchTerm, setEdsSearchTerm] = useState('');\r\n  const [soloGuerraPrecios, setSoloGuerraPrecios] = useState(false);\r\n  const [soloEstacionesPES, setSoloEstacionesPES] = useState(false);\r\n\r\n  const tuasMarcas = ['Aramco', 'Petrobras'];\r\n\r\n  // âœ… LOG: Se ejecuta SIEMPRE que markers cambie o en el primer render\r\n  useEffect(() => {\r\n    if (!markers || markers.length === 0) {\r\n      console.log('âš ï¸ No hay markers disponibles');\r\n      return;\r\n    }\r\n\r\n    const regionesUnicas = [...new Set(markers.map(m => m.Region))].filter(r => r).sort();\r\n    \r\n    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');\r\n    console.log('ðŸ—ºï¸ TODAS LAS REGIONES DISPONIBLES:', regionesUnicas);\r\n    console.log('ðŸ“Š Total de regiones Ãºnicas:', regionesUnicas.length);\r\n    console.log('ðŸ“ Total de markers recibidos:', markers.length);\r\n    \r\n    // Contar cuÃ¡ntos markers por CADA regiÃ³n\r\n    const countByRegion = {};\r\n    markers.forEach(m => {\r\n      const region = m.Region || 'Sin regiÃ³n';\r\n      countByRegion[region] = (countByRegion[region] || 0) + 1;\r\n    });\r\n    \r\n    console.log('ðŸ“ˆ Desglose de markers por regiÃ³n:');\r\n    Object.entries(countByRegion)\r\n      .sort((a, b) => b[1] - a[1])\r\n      .forEach(([region, count]) => {\r\n        console.log(`   ${region}: ${count} markers`);\r\n      });\r\n    \r\n    console.log('ðŸ” RegiÃ³n actualmente seleccionada:', selectedRegion);\r\n    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');\r\n  }, [markers, selectedRegion]); // Agregar selectedRegion tambiÃ©n para ver cambios\r\n\r\n  const comunas = useMemo(() => {\r\n    const filtered = markers.filter(m => m.Region === selectedRegion);\r\n    return [...new Set(filtered.map(m => m.Comuna))].sort();\r\n  }, [markers, selectedRegion]);\r\n\r\n  const marcas = useMemo(() => {\r\n    const filtered = markers.filter(m => m.Region === selectedRegion);\r\n    return [...new Set(filtered.map(m => m.Marca))].sort();\r\n  }, [markers, selectedRegion]);\r\n\r\n  const jefesZona = useMemo(() => {\r\n    const filtered = markers.filter(\r\n      m => m.Region === selectedRegion && m.nombre && tuasMarcas.includes(m.Marca)\r\n    );\r\n    return [...new Set(filtered.map(m => m.nombre))].sort();\r\n  }, [markers, selectedRegion, tuasMarcas]);\r\n\r\n  const comunasDelJefe = useMemo(() => {\r\n    if (!selectedJefeZona) return [];\r\n    const jefeMarkers = markers.filter(m => m.nombre === selectedJefeZona);\r\n    return [...new Set(jefeMarkers.map(m => m.Comuna))];\r\n  }, [markers, selectedJefeZona]);\r\n\r\n  const allEds = useMemo(() => {\r\n    let filtered = markers.filter(m => m.Region === selectedRegion);\r\n    if (selectedJefeZona) {\r\n      filtered = filtered.filter(m => comunasDelJefe.includes(m.Comuna));\r\n    }\r\n    if (selectedComuna) {\r\n      filtered = filtered.filter(m => m.Comuna === selectedComuna);\r\n    }\r\n    if (selectedMarca) {\r\n      filtered = filtered.filter(m => m.Marca === selectedMarca);\r\n    }\r\n    return [...new Set(filtered.map(m => m.eds))].filter(eds => eds).sort();\r\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, comunasDelJefe]);\r\n\r\n  const filteredEds = useMemo(() => {\r\n    return allEds.filter(eds => \r\n      eds.toLowerCase().includes(edsSearchTerm.toLowerCase())\r\n    );\r\n  }, [allEds, edsSearchTerm]);\r\n\r\n  const filteredMarkers = useMemo(() => {\r\n    return markers.filter(m => {\r\n      const regionMatch = m.Region === selectedRegion;\r\n      const edsMatch = !selectedEds || m.eds === selectedEds;\r\n      const guerraMatch = !soloGuerraPrecios || m.Guerra_Precio === 'Si';\r\n      const pesMatch = !soloEstacionesPES || (m.Surtidores_Autoservicio && m.Surtidores_Autoservicio !== null && m.Surtidores_Autoservicio !== '');\r\n\r\n      if (selectedJefeZona) {\r\n        const esDelJefe = m.nombre === selectedJefeZona;\r\n        const esCompetenciaEnComunasDelJefe = comunasDelJefe.includes(m.Comuna);\r\n        const jefeMatch = esDelJefe || esCompetenciaEnComunasDelJefe;\r\n        return regionMatch && jefeMatch && edsMatch && guerraMatch && pesMatch;\r\n      }\r\n\r\n      if (selectedComuna) {\r\n        const todasLasEstacionesEnComuna = m.Comuna === selectedComuna;\r\n        const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n        return regionMatch && todasLasEstacionesEnComuna && marcaMatch && edsMatch && guerraMatch && pesMatch;\r\n      }\r\n\r\n      const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n      return regionMatch && marcaMatch && edsMatch && guerraMatch && pesMatch;\r\n    });\r\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, selectedEds, comunasDelJefe, soloGuerraPrecios, soloEstacionesPES]);\r\n\r\n  const filteredMarkersForMercado = useMemo(() => {\r\n    return markers.filter(m => {\r\n      const regionMatch = m.Region === selectedRegion;\r\n      const guerraMatch = !soloGuerraPrecios || m.Guerra_Precio === 'Si';\r\n      const pesMatch = !soloEstacionesPES || (m.Surtidores_Autoservicio && m.Surtidores_Autoservicio !== null && m.Surtidores_Autoservicio !== '');\r\n\r\n      if (selectedJefeZona) {\r\n        const esDelJefe = m.nombre === selectedJefeZona;\r\n        const esCompetenciaEnComunasDelJefe = comunasDelJefe.includes(m.Comuna);\r\n        const jefeMatch = esDelJefe || esCompetenciaEnComunasDelJefe;\r\n        return regionMatch && jefeMatch && guerraMatch && pesMatch;\r\n      }\r\n\r\n      if (selectedComuna) {\r\n        const todasLasEstacionesEnComuna = m.Comuna === selectedComuna;\r\n        const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n        return regionMatch && todasLasEstacionesEnComuna && marcaMatch && guerraMatch && pesMatch;\r\n      }\r\n\r\n      const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n      return regionMatch && marcaMatch && guerraMatch && pesMatch;\r\n    });\r\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, comunasDelJefe, soloGuerraPrecios, soloEstacionesPES]);\r\n\r\n  const uniqueFilteredMarkers = useMemo(() => {\r\n    const uniqueMap = new Map();\r\n    \r\n    filteredMarkers.forEach(marker => {\r\n      const key = marker.pbl || marker.id || `${marker.lat}_${marker.lng}`;\r\n      const existing = uniqueMap.get(key);\r\n      \r\n      if (!existing) {\r\n        uniqueMap.set(key, marker);\r\n      } else {\r\n        const existingDate = existing.fecha_aplicacion ? new Date(existing.fecha_aplicacion) : new Date(0);\r\n        const currentDate = marker.fecha_aplicacion ? new Date(marker.fecha_aplicacion) : new Date(0);\r\n        \r\n        if (currentDate > existingDate) {\r\n          uniqueMap.set(key, marker);\r\n        }\r\n      }\r\n    });\r\n    \r\n    return Array.from(uniqueMap.values());\r\n  }, [filteredMarkers]);\r\n\r\n  useEffect(() => {\r\n    onFiltersChange(uniqueFilteredMarkers, filteredMarkersForMercado);\r\n  }, [uniqueFilteredMarkers, filteredMarkersForMercado, onFiltersChange]);\r\n\r\n  const markersByBrand = useMemo(() => {\r\n    const result = {};\r\n    uniqueFilteredMarkers.forEach(m => {\r\n      result[m.Marca] = (result[m.Marca] || 0) + 1;\r\n    });\r\n    return result;\r\n  }, [uniqueFilteredMarkers]);\r\n\r\n  const brandCounts = useMemo(() => {\r\n    const filtered = markers.filter(m => m.Region === selectedRegion);\r\n    const brandMap = new Map();\r\n    filtered.forEach(m => {\r\n      const brand = m.Marca || 'Sin marca';\r\n      const id = m.pbl || m.id || `${m.lat}_${m.lng}`;\r\n      if (!brandMap.has(brand)) {\r\n        brandMap.set(brand, new Set());\r\n      }\r\n      brandMap.get(brand).add(id);\r\n    });\r\n    return Object.fromEntries(\r\n      Array.from(brandMap.entries()).map(([name, set]) => [name, set.size])\r\n    );\r\n  }, [markers, selectedRegion]);\r\n\r\n  const handleClearFilters = () => {\r\n    setSelectedComuna('');\r\n    setSelectedMarca('');\r\n    setSelectedJefeZona('');\r\n    setSelectedEds('');\r\n    setEdsSearchTerm('');\r\n    setSoloGuerraPrecios(false);\r\n    setSoloEstacionesPES(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"filter-panel\">\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"comuna-select\">Comuna</label>\r\n        <select\r\n          id=\"comuna-select\"\r\n          value={selectedComuna}\r\n          onChange={(e) => setSelectedComuna(e.target.value)}\r\n        >\r\n          <option value=\"\">Todas las comunas</option>\r\n          {comunas.map(comuna => (\r\n            <option key={comuna} value={comuna}>{comuna}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"marca-select\">Marca</label>\r\n        <select\r\n          id=\"marca-select\"\r\n          value={selectedMarca}\r\n          onChange={(e) => setSelectedMarca(e.target.value)}\r\n        >\r\n          <option value=\"\">Todas las marcas</option>\r\n          {marcas.map(marca => (\r\n            <option key={marca} value={marca}>\r\n              {marca} {brandCounts[marca] ? `(${brandCounts[marca]})` : ''}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"jefe-select\">Jefe de Zona</label>\r\n        <select\r\n          id=\"jefe-select\"\r\n          value={selectedJefeZona}\r\n          onChange={(e) => setSelectedJefeZona(e.target.value)}\r\n        >\r\n          <option value=\"\">Selecciona un Jefe de Zona</option>\r\n          {jefesZona.map(jefe => (\r\n            <option key={jefe} value={jefe}>{jefe}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"eds-select\">EDS</label>\r\n        <select\r\n          id=\"eds-select\"\r\n          value={selectedEds}\r\n          onChange={(e) => setSelectedEds(e.target.value)}\r\n        >\r\n          <option value=\"\">Todas las EDS</option>\r\n          {filteredEds.map(eds => (\r\n            <option key={eds} value={eds}>{eds}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group filter-checkbox\">\r\n        <label htmlFor=\"guerra-precios-checkbox\" className=\"checkbox-label\">\r\n          <input\r\n            id=\"guerra-precios-checkbox\"\r\n            type=\"checkbox\"\r\n            checked={soloGuerraPrecios}\r\n            onChange={(e) => setSoloGuerraPrecios(e.target.checked)}\r\n          />\r\n          <span className=\"checkbox-text\">Guerra de Precios</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"filter-group filter-checkbox filter-checkbox-pes\">\r\n        <label htmlFor=\"estaciones-pes-checkbox\" className=\"checkbox-label\">\r\n          <input\r\n            id=\"estaciones-pes-checkbox\"\r\n            type=\"checkbox\"\r\n            checked={soloEstacionesPES}\r\n            onChange={(e) => setSoloEstacionesPES(e.target.checked)}\r\n          />\r\n          <span className=\"checkbox-text\">Estaciones PES</span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}