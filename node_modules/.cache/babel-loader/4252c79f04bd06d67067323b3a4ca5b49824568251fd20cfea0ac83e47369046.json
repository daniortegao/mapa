{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport { createCustomIcon, createBrandLogo } from '../utils/iconHelpers';\nconst IconMarkersLayer = ({\n  markers,\n  selectedRegion,\n  baseCompData = []\n}) => {\n  _s();\n  const map = useMap();\n  const markersRef = useRef({}); // Markers actualmente visibles\n  const allMarkersRef = useRef({}); // Todos los markers en memoria\n  const cacheRef = useRef({});\n  const updateInProgressRef = useRef(false);\n  const zoomUpdateRef = useRef(null);\n  const [showingAssociated, setShowingAssociated] = useState(false);\n  const [originalPopupMarker, setOriginalPopupMarker] = useState(null);\n  const makeDraggable = useCallback(popup => {\n    if (!map || !popup || !popup._container) return;\n    try {\n      const pos = map.latLngToLayerPoint(popup.getLatLng());\n      L.DomUtil.setPosition(popup._wrapper.parentNode, pos);\n      const draggable = new L.Draggable(popup._container, popup._wrapper);\n      draggable.enable();\n    } catch (error) {\n      console.error('Error draggable:', error);\n    }\n  }, [map]);\n  const handleShowMercado = useCallback(marker => {\n    // Mostrar mercado del EDS + TODA la competencia en la misma Comuna\n    // Buscar en allMarkersRef que tiene TODOS los markers\n    const markersEnComunaDelEds = Object.values(allMarkersRef.current).filter(ref => ref.data.Comuna === marker.Comuna).map(ref => ref.data);\n    Object.values(allMarkersRef.current).forEach(markerRef => {\n      if (markerRef.marker) {\n        markerRef.marker.setOpacity(0.3);\n      }\n    });\n    markersEnComunaDelEds.forEach(m => {\n      if (allMarkersRef.current[m.id] && allMarkersRef.current[m.id].marker) {\n        allMarkersRef.current[m.id].marker.setOpacity(1);\n      }\n    });\n    setShowingAssociated(true);\n    setOriginalPopupMarker(marker);\n    console.log(`Mostrando mercado para: ${marker.nombre} en Comuna: ${marker.Comuna}`);\n    console.log(`Total de estaciones en esta comuna: ${markersEnComunaDelEds.length}`);\n  }, []);\n  const handleBackFromMercado = useCallback(() => {\n    Object.values(allMarkersRef.current).forEach(markerRef => {\n      if (markerRef.marker) {\n        markerRef.marker.setOpacity(1);\n      }\n    });\n    setShowingAssociated(false);\n    setOriginalPopupMarker(null);\n  }, []);\n  const addMarkers = useCallback((data, mapInstance) => {\n    data.forEach(marker => {\n      const lat = parseFloat(marker.lat);\n      const lng = parseFloat(marker.lng);\n      if (!isNaN(lat) && !isNaN(lng)) {\n        const iconUrl = createCustomIcon(marker.Marca);\n        const leafletMarker = L.marker([lat, lng], {\n          icon: iconUrl\n        }).addTo(mapInstance);\n        let popupContent = `\n          <div class=\"popup-content\">\n            <strong>${marker.nombre}</strong><br/>\n            Marca: ${marker.Marca}<br/>\n            EDS: ${marker.eds}<br/>\n            Comuna: ${marker.Comuna}<br/>\n            Región: ${marker.Region}\n            <button class=\"btn-mercado\" data-marker-id=\"${marker.id}\">Ver Mercado</button>\n          </div>\n        `;\n        const popup = L.popup({\n          maxWidth: 300\n        }).setContent(popupContent);\n        leafletMarker.bindPopup(popup);\n        leafletMarker.on('click', () => {\n          mapInstance.setView([lat, lng], mapInstance.getZoom());\n          setTimeout(() => {\n            makeDraggable(popup);\n            const btn = document.querySelector(`[data-marker-id=\"${marker.id}\"]`);\n            if (btn) {\n              btn.addEventListener('click', e => {\n                e.stopPropagation();\n                handleShowMercado(marker);\n              });\n            }\n          }, 100);\n        });\n        markersRef.current[marker.id] = {\n          marker: leafletMarker,\n          data: marker,\n          popup: popup\n        };\n      }\n    });\n  }, [makeDraggable, handleShowMercado]);\n\n  // Mantener TODOS los markers en memoria\n  useEffect(() => {\n    const lat = parseFloat((originalPopupMarker === null || originalPopupMarker === void 0 ? void 0 : originalPopupMarker.lat) || 0);\n    const lng = parseFloat((originalPopupMarker === null || originalPopupMarker === void 0 ? void 0 : originalPopupMarker.lng) || 0);\n    if (!isNaN(lat) && !isNaN(lng)) {\n      for (const marker of markers) {\n        if (!allMarkersRef.current[marker.id]) {\n          const mLat = parseFloat(marker.lat);\n          const mLng = parseFloat(marker.lng);\n          if (!isNaN(mLat) && !isNaN(mLng)) {\n            const iconUrl = createCustomIcon(marker.Marca);\n            const leafletMarker = L.marker([mLat, mLng], {\n              icon: iconUrl\n            }).addTo(map);\n            leafletMarker.setOpacity(0.3); // Ocultar inicialmente\n\n            allMarkersRef.current[marker.id] = {\n              marker: leafletMarker,\n              data: marker\n            };\n          }\n        }\n      }\n    }\n  }, [markers, map, originalPopupMarker]);\n  useEffect(() => {\n    if (!map) return;\n    const clearMarkers = () => {\n      Object.values(markersRef.current).forEach(markerRef => {\n        map.removeLayer(markerRef.marker);\n      });\n      markersRef.current = {};\n    };\n    clearMarkers();\n    addMarkers(markers, map);\n    return () => {\n      clearMarkers();\n    };\n  }, [markers, map, addMarkers]);\n  useEffect(() => {\n    const handleBackClick = () => {\n      if (showingAssociated) {\n        handleBackFromMercado();\n      }\n    };\n    document.addEventListener('custom-back-mercado', handleBackClick);\n    return () => {\n      document.removeEventListener('custom-back-mercado', handleBackClick);\n    };\n  }, [showingAssociated, handleBackFromMercado]);\n  return null;\n};\n_s(IconMarkersLayer, \"eawkifT64cYkTbTg9biuPy7QCBA=\", false, function () {\n  return [useMap];\n});\n_c = IconMarkersLayer;\nexport default IconMarkersLayer;\nvar _c;\n$RefreshReg$(_c, \"IconMarkersLayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useMap","L","createCustomIcon","createBrandLogo","IconMarkersLayer","markers","selectedRegion","baseCompData","_s","map","markersRef","allMarkersRef","cacheRef","updateInProgressRef","zoomUpdateRef","showingAssociated","setShowingAssociated","originalPopupMarker","setOriginalPopupMarker","makeDraggable","popup","_container","pos","latLngToLayerPoint","getLatLng","DomUtil","setPosition","_wrapper","parentNode","draggable","Draggable","enable","error","console","handleShowMercado","marker","markersEnComunaDelEds","Object","values","current","filter","ref","data","Comuna","forEach","markerRef","setOpacity","m","id","log","nombre","length","handleBackFromMercado","addMarkers","mapInstance","lat","parseFloat","lng","isNaN","iconUrl","Marca","leafletMarker","icon","addTo","popupContent","eds","Region","maxWidth","setContent","bindPopup","on","setView","getZoom","setTimeout","btn","document","querySelector","addEventListener","e","stopPropagation","mLat","mLng","clearMarkers","removeLayer","handleBackClick","removeEventListener","_c","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/IconMarkersLayer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport { createCustomIcon, createBrandLogo } from '../utils/iconHelpers';\r\n\r\nconst IconMarkersLayer = ({ markers, selectedRegion, baseCompData = [] }) => {\r\n  const map = useMap();\r\n  const markersRef = useRef({}); // Markers actualmente visibles\r\n  const allMarkersRef = useRef({}); // Todos los markers en memoria\r\n  const cacheRef = useRef({});\r\n  const updateInProgressRef = useRef(false);\r\n  const zoomUpdateRef = useRef(null);\r\n  const [showingAssociated, setShowingAssociated] = useState(false);\r\n  const [originalPopupMarker, setOriginalPopupMarker] = useState(null);\r\n\r\n  const makeDraggable = useCallback((popup) => {\r\n    if (!map || !popup || !popup._container) return;\r\n    try {\r\n      const pos = map.latLngToLayerPoint(popup.getLatLng());\r\n      L.DomUtil.setPosition(popup._wrapper.parentNode, pos);\r\n      const draggable = new L.Draggable(popup._container, popup._wrapper);\r\n      draggable.enable();\r\n    } catch (error) {\r\n      console.error('Error draggable:', error);\r\n    }\r\n  }, [map]);\r\n\r\n  const handleShowMercado = useCallback((marker) => {\r\n    // Mostrar mercado del EDS + TODA la competencia en la misma Comuna\r\n    // Buscar en allMarkersRef que tiene TODOS los markers\r\n    const markersEnComunaDelEds = Object.values(allMarkersRef.current)\r\n      .filter(ref => ref.data.Comuna === marker.Comuna)\r\n      .map(ref => ref.data);\r\n\r\n    Object.values(allMarkersRef.current).forEach(markerRef => {\r\n      if (markerRef.marker) {\r\n        markerRef.marker.setOpacity(0.3);\r\n      }\r\n    });\r\n\r\n    markersEnComunaDelEds.forEach(m => {\r\n      if (allMarkersRef.current[m.id] && allMarkersRef.current[m.id].marker) {\r\n        allMarkersRef.current[m.id].marker.setOpacity(1);\r\n      }\r\n    });\r\n\r\n    setShowingAssociated(true);\r\n    setOriginalPopupMarker(marker);\r\n\r\n    console.log(`Mostrando mercado para: ${marker.nombre} en Comuna: ${marker.Comuna}`);\r\n    console.log(`Total de estaciones en esta comuna: ${markersEnComunaDelEds.length}`);\r\n  }, []);\r\n\r\n  const handleBackFromMercado = useCallback(() => {\r\n    Object.values(allMarkersRef.current).forEach(markerRef => {\r\n      if (markerRef.marker) {\r\n        markerRef.marker.setOpacity(1);\r\n      }\r\n    });\r\n    setShowingAssociated(false);\r\n    setOriginalPopupMarker(null);\r\n  }, []);\r\n\r\n  const addMarkers = useCallback((data, mapInstance) => {\r\n    data.forEach(marker => {\r\n      const lat = parseFloat(marker.lat);\r\n      const lng = parseFloat(marker.lng);\r\n\r\n      if (!isNaN(lat) && !isNaN(lng)) {\r\n        const iconUrl = createCustomIcon(marker.Marca);\r\n        const leafletMarker = L.marker([lat, lng], { icon: iconUrl }).addTo(mapInstance);\r\n\r\n        let popupContent = `\r\n          <div class=\"popup-content\">\r\n            <strong>${marker.nombre}</strong><br/>\r\n            Marca: ${marker.Marca}<br/>\r\n            EDS: ${marker.eds}<br/>\r\n            Comuna: ${marker.Comuna}<br/>\r\n            Región: ${marker.Region}\r\n            <button class=\"btn-mercado\" data-marker-id=\"${marker.id}\">Ver Mercado</button>\r\n          </div>\r\n        `;\r\n\r\n        const popup = L.popup({ maxWidth: 300 }).setContent(popupContent);\r\n        leafletMarker.bindPopup(popup);\r\n\r\n        leafletMarker.on('click', () => {\r\n          mapInstance.setView([lat, lng], mapInstance.getZoom());\r\n          setTimeout(() => {\r\n            makeDraggable(popup);\r\n            const btn = document.querySelector(`[data-marker-id=\"${marker.id}\"]`);\r\n            if (btn) {\r\n              btn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                handleShowMercado(marker);\r\n              });\r\n            }\r\n          }, 100);\r\n        });\r\n\r\n        markersRef.current[marker.id] = {\r\n          marker: leafletMarker,\r\n          data: marker,\r\n          popup: popup,\r\n        };\r\n      }\r\n    });\r\n  }, [makeDraggable, handleShowMercado]);\r\n\r\n  // Mantener TODOS los markers en memoria\r\n  useEffect(() => {\r\n    const lat = parseFloat(originalPopupMarker?.lat || 0);\r\n    const lng = parseFloat(originalPopupMarker?.lng || 0);\r\n\r\n    if (!isNaN(lat) && !isNaN(lng)) {\r\n      for (const marker of markers) {\r\n        if (!allMarkersRef.current[marker.id]) {\r\n          const mLat = parseFloat(marker.lat);\r\n          const mLng = parseFloat(marker.lng);\r\n\r\n          if (!isNaN(mLat) && !isNaN(mLng)) {\r\n            const iconUrl = createCustomIcon(marker.Marca);\r\n            const leafletMarker = L.marker([mLat, mLng], { icon: iconUrl }).addTo(map);\r\n            leafletMarker.setOpacity(0.3); // Ocultar inicialmente\r\n\r\n            allMarkersRef.current[marker.id] = {\r\n              marker: leafletMarker,\r\n              data: marker,\r\n            };\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [markers, map, originalPopupMarker]);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n\r\n    const clearMarkers = () => {\r\n      Object.values(markersRef.current).forEach(markerRef => {\r\n        map.removeLayer(markerRef.marker);\r\n      });\r\n      markersRef.current = {};\r\n    };\r\n\r\n    clearMarkers();\r\n    addMarkers(markers, map);\r\n\r\n    return () => {\r\n      clearMarkers();\r\n    };\r\n  }, [markers, map, addMarkers]);\r\n\r\n  useEffect(() => {\r\n    const handleBackClick = () => {\r\n      if (showingAssociated) {\r\n        handleBackFromMercado();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('custom-back-mercado', handleBackClick);\r\n    return () => {\r\n      document.removeEventListener('custom-back-mercado', handleBackClick);\r\n    };\r\n  }, [showingAssociated, handleBackFromMercado]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default IconMarkersLayer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}