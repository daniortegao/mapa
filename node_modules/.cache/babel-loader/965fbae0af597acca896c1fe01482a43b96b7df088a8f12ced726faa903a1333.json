{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e08f\\\\Desktop\\\\Proyectos\\\\Resumen\\\\mapa-v2\\\\src\\\\components\\\\TrendChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, LineElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend, Filler, TimeSeriesScale } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(LineElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend, Filler, TimeSeriesScale);\nconst colors = {\n  g93: '#34c759',\n  g95: '#007bff',\n  g97: '#a259c1',\n  diesel: '#fd7e14',\n  kero: '#6c757d'\n};\nfunction fmtLabel(dateStr) {\n  const onlyDate = (dateStr || '').split(' ')[0] || '';\n  const parts = onlyDate.split('-'); // espera YYYY-MM-DD\n  if (parts.length === 3) {\n    const [y, m, d] = parts;\n    return `${d}-${m}`;\n  }\n  return onlyDate;\n}\nconst toNum = v => v === '-' || v == null ? null : Number(v);\nexport default function TrendChart({\n  dataRows = [],\n  maxPoints = 7,\n  height = 170,\n  compact = true\n}) {\n  _s();\n  const {\n    labels,\n    datasets\n  } = useMemo(() => {\n    const sorted = [...dataRows].sort((a, b) => {\n      const da = new Date((a.fecha || '').split(' ')[0] || a.fecha);\n      const db = new Date((b.fecha || '').split(' ')[0] || b.fecha);\n      return da - db;\n    }).slice(-maxPoints);\n    const labels = sorted.map(r => fmtLabel(r.fecha));\n    const series = {\n      G93: sorted.map(r => toNum(r.g93)),\n      G95: sorted.map(r => toNum(r.g95)),\n      G97: sorted.map(r => toNum(r.g97)),\n      Diesel: sorted.map(r => toNum(r.diesel)),\n      Kero: sorted.map(r => toNum(r.kero))\n    };\n    const defs = [{\n      key: 'G93',\n      color: colors.g93\n    }, {\n      key: 'G95',\n      color: colors.g95\n    }, {\n      key: 'G97',\n      color: colors.g97\n    }, {\n      key: 'Diesel',\n      color: colors.diesel\n    }, {\n      key: 'Kero',\n      color: colors.kero\n    }];\n    const datasets = defs.map(def => ({\n      label: def.key,\n      data: series[def.key],\n      borderColor: def.color,\n      backgroundColor: def.color,\n      pointBackgroundColor: def.color,\n      pointBorderColor: def.color,\n      tension: 0.3,\n      pointRadius: 2,\n      pointHoverRadius: 4,\n      borderWidth: 2,\n      spanGaps: true\n    })).filter(ds => ds.data.some(v => v != null));\n    return {\n      labels,\n      datasets\n    };\n  }, [dataRows, maxPoints]);\n  const options = useMemo(() => ({\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          boxWidth: 10,\n          boxHeight: 6,\n          font: {\n            size: compact ? 9 : 11\n          },\n          usePointStyle: true\n        }\n      },\n      tooltip: {\n        mode: 'index',\n        intersect: false,\n        callbacks: {\n          label: ctx => {\n            const v = ctx.raw;\n            if (v == null) return `${ctx.dataset.label}: -`;\n            return `${ctx.dataset.label}: ${Number(v).toLocaleString('es-CL')}`;\n          }\n        }\n      }\n    },\n    scales: {\n      x: {\n        grid: {\n          display: false\n        },\n        ticks: {\n          autoSkip: true,\n          maxRotation: 0,\n          minRotation: 0,\n          font: {\n            size: compact ? 10 : 12\n          }\n        }\n      },\n      y: {\n        title: {\n          display: true,\n          text: 'Precio CLP'\n        },\n        ticks: {\n          callback: v => Number(v).toLocaleString('es-CL'),\n          font: {\n            size: compact ? 10 : 12\n          }\n        },\n        grid: {\n          color: 'rgba(0,0,0,0.08)'\n        }\n      }\n    },\n    elements: {\n      line: {\n        fill: false\n      }\n    }\n  }), [compact]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height\n    },\n    children: /*#__PURE__*/_jsxDEV(Line, {\n      data: {\n        labels,\n        datasets\n      },\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n_s(TrendChart, \"MTqOv2L+I+nVyX8ylMYzKKPHhV0=\");\n_c = TrendChart;\nvar _c;\n$RefreshReg$(_c, \"TrendChart\");","map":{"version":3,"names":["React","useMemo","Line","Chart","ChartJS","LineElement","PointElement","LinearScale","CategoryScale","Tooltip","Legend","Filler","TimeSeriesScale","jsxDEV","_jsxDEV","register","colors","g93","g95","g97","diesel","kero","fmtLabel","dateStr","onlyDate","split","parts","length","y","m","d","toNum","v","Number","TrendChart","dataRows","maxPoints","height","compact","_s","labels","datasets","sorted","sort","a","b","da","Date","fecha","db","slice","map","r","series","G93","G95","G97","Diesel","Kero","defs","key","color","def","label","data","borderColor","backgroundColor","pointBackgroundColor","pointBorderColor","tension","pointRadius","pointHoverRadius","borderWidth","spanGaps","filter","ds","some","options","responsive","maintainAspectRatio","plugins","legend","position","boxWidth","boxHeight","font","size","usePointStyle","tooltip","mode","intersect","callbacks","ctx","raw","dataset","toLocaleString","scales","x","grid","display","ticks","autoSkip","maxRotation","minRotation","title","text","callback","elements","line","fill","style","width","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/TrendChart.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS, LineElement, PointElement, LinearScale, CategoryScale,\r\n  Tooltip, Legend, Filler, TimeSeriesScale\r\n} from 'chart.js';\r\n\r\nChartJS.register(LineElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend, Filler, TimeSeriesScale);\r\n\r\nconst colors = {\r\n  g93: '#34c759',\r\n  g95: '#007bff',\r\n  g97: '#a259c1',\r\n  diesel: '#fd7e14',\r\n  kero: '#6c757d'\r\n};\r\n\r\nfunction fmtLabel(dateStr) {\r\n  const onlyDate = (dateStr || '').split(' ')[0] || '';\r\n  const parts = onlyDate.split('-'); // espera YYYY-MM-DD\r\n  if (parts.length === 3) {\r\n    const [y, m, d] = parts;\r\n    return `${d}-${m}`;\r\n  }\r\n  return onlyDate;\r\n}\r\n\r\nconst toNum = v => (v === '-' || v == null ? null : Number(v));\r\n\r\nexport default function TrendChart({ dataRows = [], maxPoints = 7, height = 170, compact = true }) {\r\n  const { labels, datasets } = useMemo(() => {\r\n    const sorted = [...dataRows].sort((a, b) => {\r\n      const da = new Date((a.fecha || '').split(' ')[0] || a.fecha);\r\n      const db = new Date((b.fecha || '').split(' ')[0] || b.fecha);\r\n      return da - db;\r\n    }).slice(-maxPoints);\r\n\r\n    const labels = sorted.map(r => fmtLabel(r.fecha));\r\n\r\n    const series = {\r\n      G93: sorted.map(r => toNum(r.g93)),\r\n      G95: sorted.map(r => toNum(r.g95)),\r\n      G97: sorted.map(r => toNum(r.g97)),\r\n      Diesel: sorted.map(r => toNum(r.diesel)),\r\n      Kero: sorted.map(r => toNum(r.kero)),\r\n    };\r\n\r\n    const defs = [\r\n      { key: 'G93', color: colors.g93 },\r\n      { key: 'G95', color: colors.g95 },\r\n      { key: 'G97', color: colors.g97 },\r\n      { key: 'Diesel', color: colors.diesel },\r\n      { key: 'Kero', color: colors.kero },\r\n    ];\r\n\r\n    const datasets = defs\r\n      .map(def => ({\r\n        label: def.key,\r\n        data: series[def.key],\r\n        borderColor: def.color,\r\n        backgroundColor: def.color,\r\n        pointBackgroundColor: def.color,\r\n        pointBorderColor: def.color,\r\n        tension: 0.3,\r\n        pointRadius: 2,\r\n        pointHoverRadius: 4,\r\n        borderWidth: 2,\r\n        spanGaps: true,\r\n      }))\r\n      .filter(ds => ds.data.some(v => v != null));\r\n\r\n    return { labels, datasets };\r\n  }, [dataRows, maxPoints]);\r\n\r\n  const options = useMemo(() => ({\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: { boxWidth: 10, boxHeight: 6, font: { size: compact ? 9 : 11 }, usePointStyle: true }\r\n      },\r\n      tooltip: {\r\n        mode: 'index',\r\n        intersect: false,\r\n        callbacks: {\r\n          label: (ctx) => {\r\n            const v = ctx.raw;\r\n            if (v == null) return `${ctx.dataset.label}: -`;\r\n            return `${ctx.dataset.label}: ${Number(v).toLocaleString('es-CL')}`;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    scales: {\r\n      x: {\r\n        grid: { display: false },\r\n        ticks: { autoSkip: true, maxRotation: 0, minRotation: 0, font: { size: compact ? 10 : 12 } }\r\n      },\r\n      y: {\r\n        title: { display: true, text: 'Precio CLP' },\r\n        ticks: { callback: v => Number(v).toLocaleString('es-CL'), font: { size: compact ? 10 : 12 } },\r\n        grid: { color: 'rgba(0,0,0,0.08)' }\r\n      }\r\n    },\r\n    elements: { line: { fill: false } }\r\n  }), [compact]);\r\n\r\n  return (\r\n    <div style={{ width: '100%', height }}>\r\n      <Line data={{ labels, datasets }} options={options} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}