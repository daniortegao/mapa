{"ast":null,"code":"import _objectSpread from\"C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useMemo,useState}from'react';import'../styles/statisticsPanel.css';import ComunaRanking from'./ComunaRanking';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StatisticsPanel=_ref=>{let{markers,historicalMarkers}=_ref;const[calculationMode,setCalculationMode]=useState('average');// 'average' or 'median'\nconst[expandedSections,setExpandedSections]=useState({brands:false,prices:false,comunas:false});const toggleSection=section=>{setExpandedSections(prev=>_objectSpread(_objectSpread({},prev),{},{[section]:!prev[section]}));};const stats=useMemo(()=>{if(!markers||markers.length===0)return null;const brands={};const fuels=['precio_g93','precio_g95','precio_g97','precio_diesel','precio_kero'];const fuelLabels={'precio_g93':'93','precio_g95':'95','precio_g97':'97','precio_diesel':'Diesel','precio_kero':'Kero'};const globalMinMax={};fuels.forEach(f=>{globalMinMax[f]={min:Infinity,max:-Infinity,minStation:null,maxStation:null};});markers.forEach(m=>{const brand=m.Marca||'Otras';if(!brands[brand]){brands[brand]={count:0,totals:{},counts:{},prices:{}};fuels.forEach(f=>{brands[brand].totals[f]=0;brands[brand].counts[f]=0;brands[brand].prices[f]=[];});}brands[brand].count++;fuels.forEach(f=>{// Handle different field names if necessary (based on markerUtils)\n// markerUtils uses: precio_g93 || G93\nlet val=m[f];if(val===undefined||val===null||val==='-'){// Try capitalized\nconst cap=f.replace('precio_','').replace('g','G').replace('d','D').replace('k','K');val=m[cap];}const price=parseFloat(val);if(!isNaN(price)&&price>0){brands[brand].totals[f]+=price;brands[brand].counts[f]++;brands[brand].prices[f].push(price);// Store all prices for median\n// Min/Max\nif(price<globalMinMax[f].min){globalMinMax[f].min=price;globalMinMax[f].minStation=m;}if(price>globalMinMax[f].max){globalMinMax[f].max=price;globalMinMax[f].maxStation=m;}}});});// Calculate Averages and Medians\nconst brandStats=Object.keys(brands).map(b=>{const avgs={};const medians={};fuels.forEach(f=>{// Average\navgs[f]=brands[b].counts[f]>0?(brands[b].totals[f]/brands[b].counts[f]).toFixed(0):'-';// Median\nconst prices=brands[b].prices[f].sort((a,b)=>a-b);if(prices.length===0){medians[f]='-';}else{const mid=Math.floor(prices.length/2);if(prices.length%2!==0){medians[f]=prices[mid];}else{medians[f]=Math.round((prices[mid-1]+prices[mid])/2);}}});return{brand:b,count:brands[b].count,averages:avgs,medians:medians};});return{brandStats,globalMinMax,fuelLabels};},[markers]);if(!stats)return/*#__PURE__*/_jsx(\"div\",{className:\"stats-empty\",children:\"Sin datos para mostrar\"});const{brandStats,globalMinMax,fuelLabels}=stats;return/*#__PURE__*/_jsxs(\"div\",{className:\"statistics-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-header-row\",onClick:()=>toggleSection('brands'),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"accordion-icon \".concat(expandedSections.brands?'open':''),children:\"\\u25BC\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"stats-title\",children:\"Resumen por Marca\"})]}),expandedSections.brands&&/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-container\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"span\",{className:\"toggle-label \".concat(calculationMode==='average'?'active':''),children:\"Prom\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:calculationMode==='median',onChange:()=>setCalculationMode(prev=>prev==='average'?'median':'average')}),/*#__PURE__*/_jsx(\"span\",{className:\"slider round\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-label \".concat(calculationMode==='median'?'active':''),children:\"Media\"})]})]}),expandedSections.brands&&/*#__PURE__*/_jsx(\"div\",{className:\"stats-table-container slide-down\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"stats-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Marca\"}),/*#__PURE__*/_jsx(\"th\",{children:\"93\"}),/*#__PURE__*/_jsx(\"th\",{children:\"95\"}),/*#__PURE__*/_jsx(\"th\",{children:\"97\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Die\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kero\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:brandStats.map(b=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"brand-cell-inline\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"brand-name\",children:b.brand}),/*#__PURE__*/_jsxs(\"span\",{className:\"brand-count\",children:[\"(\",b.count,\")\"]})]})}),/*#__PURE__*/_jsx(\"td\",{children:calculationMode==='average'?b.averages['precio_g93']:b.medians['precio_g93']}),/*#__PURE__*/_jsx(\"td\",{children:calculationMode==='average'?b.averages['precio_g95']:b.medians['precio_g95']}),/*#__PURE__*/_jsx(\"td\",{children:calculationMode==='average'?b.averages['precio_g97']:b.medians['precio_g97']}),/*#__PURE__*/_jsx(\"td\",{children:calculationMode==='average'?b.averages['precio_diesel']:b.medians['precio_diesel']}),/*#__PURE__*/_jsx(\"td\",{children:calculationMode==='average'?b.averages['precio_kero']:b.medians['precio_kero']})]},b.brand))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-header-row\",onClick:()=>toggleSection('prices'),style:{cursor:'pointer',borderBottom:expandedSections.prices?'2px solid #02d6a8':'none'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"accordion-icon \".concat(expandedSections.prices?'open':''),children:\"\\u25BC\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"stats-title\",children:\"Rango de Precios (Min / Max)\"})]})}),expandedSections.prices&&/*#__PURE__*/_jsx(\"div\",{className:\"slide-down\",children:Object.keys(fuelLabels).map(key=>{var _info$minStation,_info$minStation2,_info$minStation3,_info$maxStation,_info$maxStation2,_info$maxStation3;const info=globalMinMax[key];if(info.min===Infinity)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"price-range-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"price-range-header\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fuel-badge\",children:fuelLabels[key]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-range-values\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-min\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-label\",children:\"Min:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-value\",children:[\"$\",info.min]}),/*#__PURE__*/_jsxs(\"div\",{className:\"station-info\",children:[(_info$minStation=info.minStation)===null||_info$minStation===void 0?void 0:_info$minStation.Marca,\" - \",((_info$minStation2=info.minStation)===null||_info$minStation2===void 0?void 0:_info$minStation2.direccion)||((_info$minStation3=info.minStation)===null||_info$minStation3===void 0?void 0:_info$minStation3.Comuna)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-max\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-label\",children:\"Max:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-value\",children:[\"$\",info.max]}),/*#__PURE__*/_jsxs(\"div\",{className:\"station-info\",children:[(_info$maxStation=info.maxStation)===null||_info$maxStation===void 0?void 0:_info$maxStation.Marca,\" - \",((_info$maxStation2=info.maxStation)===null||_info$maxStation2===void 0?void 0:_info$maxStation2.direccion)||((_info$maxStation3=info.maxStation)===null||_info$maxStation3===void 0?void 0:_info$maxStation3.Comuna)]})]})]})]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stats-header-row\",onClick:()=>toggleSection('comunas'),style:{cursor:'pointer',borderBottom:expandedSections.comunas?'2px solid #02d6a8':'none'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"accordion-icon \".concat(expandedSections.comunas?'open':''),children:\"\\u25BC\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"stats-title\",children:\"Ranking de Comunas\"})]})}),expandedSections.comunas&&/*#__PURE__*/_jsx(\"div\",{className:\"slide-down\",children:/*#__PURE__*/_jsx(ComunaRanking,{markers:markers})})]})]});};export default StatisticsPanel;","map":{"version":3,"names":["React","useMemo","useState","ComunaRanking","jsx","_jsx","jsxs","_jsxs","StatisticsPanel","_ref","markers","historicalMarkers","calculationMode","setCalculationMode","expandedSections","setExpandedSections","brands","prices","comunas","toggleSection","section","prev","_objectSpread","stats","length","fuels","fuelLabels","globalMinMax","forEach","f","min","Infinity","max","minStation","maxStation","m","brand","Marca","count","totals","counts","val","undefined","cap","replace","price","parseFloat","isNaN","push","brandStats","Object","keys","map","b","avgs","medians","toFixed","sort","a","mid","Math","floor","round","averages","className","children","onClick","style","cursor","display","alignItems","gap","concat","e","stopPropagation","type","checked","onChange","borderBottom","key","_info$minStation","_info$minStation2","_info$minStation3","_info$maxStation","_info$maxStation2","_info$maxStation3","info","direccion","Comuna"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/StatisticsPanel.jsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport '../styles/statisticsPanel.css';\r\nimport ComunaRanking from './ComunaRanking';\r\n\r\nconst StatisticsPanel = ({ markers, historicalMarkers }) => {\r\n    const [calculationMode, setCalculationMode] = useState('average'); // 'average' or 'median'\r\n    const [expandedSections, setExpandedSections] = useState({\r\n        brands: false,\r\n        prices: false,\r\n        comunas: false\r\n    });\r\n\r\n    const toggleSection = (section) => {\r\n        setExpandedSections(prev => ({\r\n            ...prev,\r\n            [section]: !prev[section]\r\n        }));\r\n    };\r\n\r\n    const stats = useMemo(() => {\r\n        if (!markers || markers.length === 0) return null;\r\n\r\n        const brands = {};\r\n        const fuels = ['precio_g93', 'precio_g95', 'precio_g97', 'precio_diesel', 'precio_kero'];\r\n        const fuelLabels = {\r\n            'precio_g93': '93',\r\n            'precio_g95': '95',\r\n            'precio_g97': '97',\r\n            'precio_diesel': 'Diesel',\r\n            'precio_kero': 'Kero'\r\n        };\r\n\r\n        const globalMinMax = {};\r\n        fuels.forEach(f => {\r\n            globalMinMax[f] = { min: Infinity, max: -Infinity, minStation: null, maxStation: null };\r\n        });\r\n\r\n        markers.forEach(m => {\r\n            const brand = m.Marca || 'Otras';\r\n            if (!brands[brand]) {\r\n                brands[brand] = { count: 0, totals: {}, counts: {}, prices: {} };\r\n                fuels.forEach(f => {\r\n                    brands[brand].totals[f] = 0;\r\n                    brands[brand].counts[f] = 0;\r\n                    brands[brand].prices[f] = [];\r\n                });\r\n            }\r\n            brands[brand].count++;\r\n\r\n            fuels.forEach(f => {\r\n                // Handle different field names if necessary (based on markerUtils)\r\n                // markerUtils uses: precio_g93 || G93\r\n                let val = m[f];\r\n                if (val === undefined || val === null || val === '-') {\r\n                    // Try capitalized\r\n                    const cap = f.replace('precio_', '').replace('g', 'G').replace('d', 'D').replace('k', 'K');\r\n                    val = m[cap];\r\n                }\r\n\r\n                const price = parseFloat(val);\r\n                if (!isNaN(price) && price > 0) {\r\n                    brands[brand].totals[f] += price;\r\n                    brands[brand].counts[f]++;\r\n                    brands[brand].prices[f].push(price); // Store all prices for median\r\n\r\n                    // Min/Max\r\n                    if (price < globalMinMax[f].min) {\r\n                        globalMinMax[f].min = price;\r\n                        globalMinMax[f].minStation = m;\r\n                    }\r\n                    if (price > globalMinMax[f].max) {\r\n                        globalMinMax[f].max = price;\r\n                        globalMinMax[f].maxStation = m;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        // Calculate Averages and Medians\r\n        const brandStats = Object.keys(brands).map(b => {\r\n            const avgs = {};\r\n            const medians = {};\r\n            fuels.forEach(f => {\r\n                // Average\r\n                avgs[f] = brands[b].counts[f] > 0 ? (brands[b].totals[f] / brands[b].counts[f]).toFixed(0) : '-';\r\n\r\n                // Median\r\n                const prices = brands[b].prices[f].sort((a, b) => a - b);\r\n                if (prices.length === 0) {\r\n                    medians[f] = '-';\r\n                } else {\r\n                    const mid = Math.floor(prices.length / 2);\r\n                    if (prices.length % 2 !== 0) {\r\n                        medians[f] = prices[mid];\r\n                    } else {\r\n                        medians[f] = Math.round((prices[mid - 1] + prices[mid]) / 2);\r\n                    }\r\n                }\r\n            });\r\n            return { brand: b, count: brands[b].count, averages: avgs, medians: medians };\r\n        });\r\n\r\n        return { brandStats, globalMinMax, fuelLabels };\r\n    }, [markers]);\r\n\r\n    if (!stats) return <div className=\"stats-empty\">Sin datos para mostrar</div>;\r\n\r\n    const { brandStats, globalMinMax, fuelLabels } = stats;\r\n\r\n    return (\r\n        <div className=\"statistics-panel\">\r\n            {/* Sección Resumen por Marca */}\r\n            <div className=\"stats-section\">\r\n                <div className=\"stats-header-row\" onClick={() => toggleSection('brands')} style={{ cursor: 'pointer' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        <span className={`accordion-icon ${expandedSections.brands ? 'open' : ''}`}>▼</span>\r\n                        <h4 className=\"stats-title\">Resumen por Marca</h4>\r\n                    </div>\r\n\r\n                    {expandedSections.brands && (\r\n                        <div className=\"toggle-container\" onClick={(e) => e.stopPropagation()}>\r\n                            <span className={`toggle-label ${calculationMode === 'average' ? 'active' : ''}`}>Prom</span>\r\n                            <label className=\"switch\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={calculationMode === 'median'}\r\n                                    onChange={() => setCalculationMode(prev => prev === 'average' ? 'median' : 'average')}\r\n                                />\r\n                                <span className=\"slider round\"></span>\r\n                            </label>\r\n                            <span className={`toggle-label ${calculationMode === 'median' ? 'active' : ''}`}>Media</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {expandedSections.brands && (\r\n                    <div className=\"stats-table-container slide-down\">\r\n                        <table className=\"stats-table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Marca</th>\r\n                                    <th>93</th>\r\n                                    <th>95</th>\r\n                                    <th>97</th>\r\n                                    <th>Die</th>\r\n                                    <th>Kero</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {brandStats.map(b => (\r\n                                    <tr key={b.brand}>\r\n                                        <td>\r\n                                            <div className=\"brand-cell-inline\">\r\n                                                <span className=\"brand-name\">{b.brand}</span>\r\n                                                <span className=\"brand-count\">({b.count})</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td>{calculationMode === 'average' ? b.averages['precio_g93'] : b.medians['precio_g93']}</td>\r\n                                        <td>{calculationMode === 'average' ? b.averages['precio_g95'] : b.medians['precio_g95']}</td>\r\n                                        <td>{calculationMode === 'average' ? b.averages['precio_g97'] : b.medians['precio_g97']}</td>\r\n                                        <td>{calculationMode === 'average' ? b.averages['precio_diesel'] : b.medians['precio_diesel']}</td>\r\n                                        <td>{calculationMode === 'average' ? b.averages['precio_kero'] : b.medians['precio_kero']}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Sección Rango de Precios */}\r\n            <div className=\"stats-section\">\r\n                <div className=\"stats-header-row\" onClick={() => toggleSection('prices')} style={{ cursor: 'pointer', borderBottom: expandedSections.prices ? '2px solid #02d6a8' : 'none' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        <span className={`accordion-icon ${expandedSections.prices ? 'open' : ''}`}>▼</span>\r\n                        <h4 className=\"stats-title\">Rango de Precios (Min / Max)</h4>\r\n                    </div>\r\n                </div>\r\n\r\n                {expandedSections.prices && (\r\n                    <div className=\"slide-down\">\r\n                        {Object.keys(fuelLabels).map(key => {\r\n                            const info = globalMinMax[key];\r\n                            if (info.min === Infinity) return null;\r\n                            return (\r\n                                <div key={key} className=\"price-range-card\">\r\n                                    <div className=\"price-range-header\">\r\n                                        <span className=\"fuel-badge\">{fuelLabels[key]}</span>\r\n                                    </div>\r\n                                    <div className=\"price-range-values\">\r\n                                        <div className=\"price-min\">\r\n                                            <span className=\"price-label\">Min:</span>\r\n                                            <span className=\"price-value\">${info.min}</span>\r\n                                            <div className=\"station-info\">{info.minStation?.Marca} - {info.minStation?.direccion || info.minStation?.Comuna}</div>\r\n                                        </div>\r\n                                        <div className=\"price-max\">\r\n                                            <span className=\"price-label\">Max:</span>\r\n                                            <span className=\"price-value\">${info.max}</span>\r\n                                            <div className=\"station-info\">{info.maxStation?.Marca} - {info.maxStation?.direccion || info.maxStation?.Comuna}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Comuna Ranking Section */}\r\n            <div className=\"stats-section\">\r\n                <div className=\"stats-header-row\" onClick={() => toggleSection('comunas')} style={{ cursor: 'pointer', borderBottom: expandedSections.comunas ? '2px solid #02d6a8' : 'none' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        <span className={`accordion-icon ${expandedSections.comunas ? 'open' : ''}`}>▼</span>\r\n                        <h4 className=\"stats-title\">Ranking de Comunas</h4>\r\n                    </div>\r\n                </div>\r\n\r\n                {expandedSections.comunas && (\r\n                    <div className=\"slide-down\">\r\n                        <ComunaRanking markers={markers} />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StatisticsPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}