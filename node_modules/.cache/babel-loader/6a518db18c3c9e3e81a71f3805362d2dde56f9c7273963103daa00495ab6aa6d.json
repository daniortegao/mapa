{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport { useMap } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport { createCustomIcon, createBrandLogo } from \"../utils/iconHelpers\";\nconst IconMarkersLayer = ({\n  markers,\n  // lista NORMAL (incluye EDS si aplica)\n  markersForMercado,\n  // lista SIN EDS (para Mercado)\n  selectedRegion,\n  baseCompData\n}) => {\n  _s();\n  const map = useMap();\n  const markersRef = useRef({});\n  const zoomUpdateRef = useRef(null);\n  const [showingAssociated, setShowingAssociated] = useState(false);\n  const clearMarkers = useCallback(() => {\n    if (!map) return;\n    Object.values(markersRef.current).forEach(marker => {\n      try {\n        if (map.hasLayer(marker)) map.removeLayer(marker);\n      } catch {}\n    });\n    markersRef.current = {};\n  }, [map]);\n  const makeDraggable = useCallback(popup => {\n    if (!map || !popup || !popup.getElement) return;\n    const el = popup.getElement();\n    if (!el) return;\n    try {\n      const wrapper = el.querySelector(\".leaflet-popup-content-wrapper\");\n      if (!wrapper) return;\n      const draggable = new L.Draggable(el, wrapper);\n      draggable.enable();\n    } catch {}\n  }, [map]);\n  const bindPopupWithMercado = useCallback((leafletMarker, marker) => {\n    var _marker$pbl, _marker$Region, _marker$Comuna, _marker$preciog, _marker$preciog2, _marker$preciodiesel;\n    const popupHtml = `\n      <div class=\"popup-container\">\n        <div class=\"popup-header\">\n          <img src=\"${createBrandLogo(marker.Marca)}\" alt=\"${marker.Marca}\" style=\"width:30px;height:30px;border-radius:50%;object-fit:cover;margin-right:8px\" onerror=\"this.style.display='none'\"/>\n          <h3 style=\"margin:0\">${marker.nombre} - ${marker.Marca}</h3>\n        </div>\n        <div class=\"popup-content\">\n          <div class=\"popup-data\">\n            <strong>Marca</strong>: ${marker.Marca}<br/>\n            <strong>PBL</strong>: ${(_marker$pbl = marker.pbl) !== null && _marker$pbl !== void 0 ? _marker$pbl : \"-\"}<br/>\n            <strong>Región</strong>: ${(_marker$Region = marker.Region) !== null && _marker$Region !== void 0 ? _marker$Region : \"-\"}<br/>\n            <strong>Comuna</strong>: ${(_marker$Comuna = marker.Comuna) !== null && _marker$Comuna !== void 0 ? _marker$Comuna : \"-\"}<br/>\n            ${marker.direccion ? `<strong>Dirección</strong>: ${marker.direccion}<br/>` : \"\"}\n            ${marker.eds ? `<strong>EDS</strong>: ${marker.eds}<br/>` : \"\"}\n          </div>\n          <hr style=\"margin:10px 0;border:none;border-top:1px solid #e0e0e0\"/>\n          <div class=\"popup-data\">\n            <strong>Precios</strong><br/>\n            G93: ${(_marker$preciog = marker.preciog93) !== null && _marker$preciog !== void 0 ? _marker$preciog : \"NA\"}<br/>\n            G95: ${(_marker$preciog2 = marker.preciog95) !== null && _marker$preciog2 !== void 0 ? _marker$preciog2 : \"NA\"}<br/>\n            Diesel: ${(_marker$preciodiesel = marker.preciodiesel) !== null && _marker$preciodiesel !== void 0 ? _marker$preciodiesel : \"NA\"}<br/>\n          </div>\n          ${marker.GuerraPrecio === \"Si\" ? `\n            <hr style=\"margin:10px 0;border:none;border-top:1px solid #e0e0e0\"/>\n            <div class=\"popup-data\" style=\"color:#d32f2f;font-weight:bold\">Guerra de Precio Activa</div>\n          ` : \"\"}\n          <div style=\"margin-top:10px\">\n            <button data-mercado=\"1\" style=\"padding:6px 10px;border:1px solid #1976d2;color:#1976d2;background:#fff;border-radius:4px;cursor:pointer\">\n              Mercado\n            </button>\n          </div>\n        </div>\n      </div>\n    `;\n    const popup = L.popup({\n      autoClose: false,\n      closeOnClick: false,\n      keepInView: true,\n      autoPan: false\n    }).setContent(popupHtml);\n    leafletMarker.bindPopup(popup);\n    leafletMarker.on(\"popupopen\", () => {\n      makeDraggable(popup);\n      const el = popup.getElement();\n      if (!el) return;\n      const btn = el.querySelector('button[data-mercado=\"1\"]');\n      if (btn) {\n        btn.onclick = e => {\n          e.stopPropagation();\n          showMercadoForPbl(marker.pbl);\n        };\n      }\n    });\n    leafletMarker.on(\"click\", () => leafletMarker.openPopup());\n  }, [makeDraggable]);\n  const addMarkers = useCallback(data => {\n    if (!map) return;\n    data.forEach(m => {\n      const lat = Number(m.lat);\n      const lng = Number(m.lng);\n      if (Number.isNaN(lat) || Number.isNaN(lng)) return;\n      const key = `${lat.toFixed(6)}_${lng.toFixed(6)}`;\n      if (markersRef.current[key] && map.hasLayer(markersRef.current[key])) return;\n      const icon = createCustomIcon(m.Marca);\n      const leafletMarker = L.marker([lat, lng], {\n        icon\n      }).addTo(map);\n      bindPopupWithMercado(leafletMarker, m);\n      markersRef.current[key] = leafletMarker;\n    });\n  }, [map, bindPopupWithMercado]);\n  const renderNormal = useCallback(() => {\n    if (!map) return;\n    clearMarkers();\n    if (!Array.isArray(markers) || markers.length === 0) return;\n    addMarkers(markers);\n  }, [map, markers, addMarkers, clearMarkers]);\n  const showMercadoForPbl = useCallback(pbl => {\n    if (!map) return;\n\n    // Toggle: si ya está activo, salir y restaurar\n    if (showingAssociated) {\n      setShowingAssociated(false);\n      renderNormal();\n      return;\n    }\n\n    // Validar pool SIN EDS\n    const pool = Array.isArray(markersForMercado) ? markersForMercado : [];\n    if (pool.length === 0) {\n      // No hay candidatos que mostrar\n      return;\n    }\n\n    // Filtrar competencia desde baseCompData\n    const associated = Array.isArray(baseCompData) ? baseCompData.filter(x => String(x.pbl).trim() === String(pbl).trim()) : [];\n    if (associated.length === 0) {\n      return;\n    }\n\n    // Normalizar tipos de id\n    const ids = new Set(associated.map(x => String(x.id).trim()));\n    const toShow = pool.filter(m => ids.has(String(m.id).trim()));\n    if (toShow.length === 0) {\n      // Puede ser que ids en baseCompData no coincidan con los id de markers (dataset distinto)\n      return;\n    }\n    clearMarkers();\n    addMarkers(toShow);\n    setShowingAssociated(true);\n  }, [map, showingAssociated, baseCompData, markersForMercado, addMarkers, clearMarkers, renderNormal]);\n\n  // Cuando cambian los marcadores normales, salir de Mercado y renderizar normal\n  useEffect(() => {\n    if (showingAssociated) setShowingAssociated(false);\n    renderNormal();\n  }, [renderNormal, showingAssociated]);\n\n  // Re-render al moverse/zoomear sólo en modo normal\n  useEffect(() => {\n    if (!map) return;\n    const onMoveEnd = () => {\n      if (showingAssociated) return;\n      renderNormal();\n    };\n    map.on(\"moveend\", onMoveEnd);\n    return () => {\n      map.off(\"moveend\", onMoveEnd);\n    };\n  }, [map, renderNormal, showingAssociated]);\n  return null;\n};\n_s(IconMarkersLayer, \"5I4LT6PnJL16Z7wHrAEyRgN2DGQ=\", false, function () {\n  return [useMap];\n});\n_c = IconMarkersLayer;\nexport default IconMarkersLayer;\nvar _c;\n$RefreshReg$(_c, \"IconMarkersLayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useMap","L","createCustomIcon","createBrandLogo","IconMarkersLayer","markers","markersForMercado","selectedRegion","baseCompData","_s","map","markersRef","zoomUpdateRef","showingAssociated","setShowingAssociated","clearMarkers","Object","values","current","forEach","marker","hasLayer","removeLayer","makeDraggable","popup","getElement","el","wrapper","querySelector","draggable","Draggable","enable","bindPopupWithMercado","leafletMarker","_marker$pbl","_marker$Region","_marker$Comuna","_marker$preciog","_marker$preciog2","_marker$preciodiesel","popupHtml","Marca","nombre","pbl","Region","Comuna","direccion","eds","preciog93","preciog95","preciodiesel","GuerraPrecio","autoClose","closeOnClick","keepInView","autoPan","setContent","bindPopup","on","btn","onclick","e","stopPropagation","showMercadoForPbl","openPopup","addMarkers","data","m","lat","Number","lng","isNaN","key","toFixed","icon","addTo","renderNormal","Array","isArray","length","pool","associated","filter","x","String","trim","ids","Set","id","toShow","has","onMoveEnd","off","_c","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/IconMarkersLayer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from \"react\";\r\nimport { useMap } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport { createCustomIcon, createBrandLogo } from \"../utils/iconHelpers\";\r\n\r\nconst IconMarkersLayer = ({\r\n  markers,              // lista NORMAL (incluye EDS si aplica)\r\n  markersForMercado,    // lista SIN EDS (para Mercado)\r\n  selectedRegion,\r\n  baseCompData\r\n}) => {\r\n  const map = useMap();\r\n  const markersRef = useRef({});\r\n  const zoomUpdateRef = useRef(null);\r\n  const [showingAssociated, setShowingAssociated] = useState(false);\r\n\r\n  const clearMarkers = useCallback(() => {\r\n    if (!map) return;\r\n    Object.values(markersRef.current).forEach((marker) => {\r\n      try {\r\n        if (map.hasLayer(marker)) map.removeLayer(marker);\r\n      } catch {}\r\n    });\r\n    markersRef.current = {};\r\n  }, [map]);\r\n\r\n  const makeDraggable = useCallback((popup) => {\r\n    if (!map || !popup || !popup.getElement) return;\r\n    const el = popup.getElement();\r\n    if (!el) return;\r\n    try {\r\n      const wrapper = el.querySelector(\".leaflet-popup-content-wrapper\");\r\n      if (!wrapper) return;\r\n      const draggable = new L.Draggable(el, wrapper);\r\n      draggable.enable();\r\n    } catch {}\r\n  }, [map]);\r\n\r\n  const bindPopupWithMercado = useCallback((leafletMarker, marker) => {\r\n    const popupHtml = `\r\n      <div class=\"popup-container\">\r\n        <div class=\"popup-header\">\r\n          <img src=\"${createBrandLogo(marker.Marca)}\" alt=\"${marker.Marca}\" style=\"width:30px;height:30px;border-radius:50%;object-fit:cover;margin-right:8px\" onerror=\"this.style.display='none'\"/>\r\n          <h3 style=\"margin:0\">${marker.nombre} - ${marker.Marca}</h3>\r\n        </div>\r\n        <div class=\"popup-content\">\r\n          <div class=\"popup-data\">\r\n            <strong>Marca</strong>: ${marker.Marca}<br/>\r\n            <strong>PBL</strong>: ${marker.pbl ?? \"-\"}<br/>\r\n            <strong>Región</strong>: ${marker.Region ?? \"-\"}<br/>\r\n            <strong>Comuna</strong>: ${marker.Comuna ?? \"-\"}<br/>\r\n            ${marker.direccion ? `<strong>Dirección</strong>: ${marker.direccion}<br/>` : \"\"}\r\n            ${marker.eds ? `<strong>EDS</strong>: ${marker.eds}<br/>` : \"\"}\r\n          </div>\r\n          <hr style=\"margin:10px 0;border:none;border-top:1px solid #e0e0e0\"/>\r\n          <div class=\"popup-data\">\r\n            <strong>Precios</strong><br/>\r\n            G93: ${marker.preciog93 ?? \"NA\"}<br/>\r\n            G95: ${marker.preciog95 ?? \"NA\"}<br/>\r\n            Diesel: ${marker.preciodiesel ?? \"NA\"}<br/>\r\n          </div>\r\n          ${marker.GuerraPrecio === \"Si\" ? `\r\n            <hr style=\"margin:10px 0;border:none;border-top:1px solid #e0e0e0\"/>\r\n            <div class=\"popup-data\" style=\"color:#d32f2f;font-weight:bold\">Guerra de Precio Activa</div>\r\n          ` : \"\"}\r\n          <div style=\"margin-top:10px\">\r\n            <button data-mercado=\"1\" style=\"padding:6px 10px;border:1px solid #1976d2;color:#1976d2;background:#fff;border-radius:4px;cursor:pointer\">\r\n              Mercado\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    const popup = L.popup({\r\n      autoClose: false,\r\n      closeOnClick: false,\r\n      keepInView: true,\r\n      autoPan: false\r\n    }).setContent(popupHtml);\r\n\r\n    leafletMarker.bindPopup(popup);\r\n\r\n    leafletMarker.on(\"popupopen\", () => {\r\n      makeDraggable(popup);\r\n      const el = popup.getElement();\r\n      if (!el) return;\r\n      const btn = el.querySelector('button[data-mercado=\"1\"]');\r\n      if (btn) {\r\n        btn.onclick = (e) => {\r\n          e.stopPropagation();\r\n          showMercadoForPbl(marker.pbl);\r\n        };\r\n      }\r\n    });\r\n\r\n    leafletMarker.on(\"click\", () => leafletMarker.openPopup());\r\n  }, [makeDraggable]);\r\n\r\n  const addMarkers = useCallback((data) => {\r\n    if (!map) return;\r\n    data.forEach((m) => {\r\n      const lat = Number(m.lat);\r\n      const lng = Number(m.lng);\r\n      if (Number.isNaN(lat) || Number.isNaN(lng)) return;\r\n\r\n      const key = `${lat.toFixed(6)}_${lng.toFixed(6)}`;\r\n      if (markersRef.current[key] && map.hasLayer(markersRef.current[key])) return;\r\n\r\n      const icon = createCustomIcon(m.Marca);\r\n      const leafletMarker = L.marker([lat, lng], { icon }).addTo(map);\r\n\r\n      bindPopupWithMercado(leafletMarker, m);\r\n      markersRef.current[key] = leafletMarker;\r\n    });\r\n  }, [map, bindPopupWithMercado]);\r\n\r\n  const renderNormal = useCallback(() => {\r\n    if (!map) return;\r\n    clearMarkers();\r\n    if (!Array.isArray(markers) || markers.length === 0) return;\r\n    addMarkers(markers);\r\n  }, [map, markers, addMarkers, clearMarkers]);\r\n\r\n  const showMercadoForPbl = useCallback((pbl) => {\r\n    if (!map) return;\r\n\r\n    // Toggle: si ya está activo, salir y restaurar\r\n    if (showingAssociated) {\r\n      setShowingAssociated(false);\r\n      renderNormal();\r\n      return;\r\n    }\r\n\r\n    // Validar pool SIN EDS\r\n    const pool = Array.isArray(markersForMercado) ? markersForMercado : [];\r\n    if (pool.length === 0) {\r\n      // No hay candidatos que mostrar\r\n      return;\r\n    }\r\n\r\n    // Filtrar competencia desde baseCompData\r\n    const associated = Array.isArray(baseCompData)\r\n      ? baseCompData.filter((x) => String(x.pbl).trim() === String(pbl).trim())\r\n      : [];\r\n    if (associated.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // Normalizar tipos de id\r\n    const ids = new Set(associated.map((x) => String(x.id).trim()));\r\n    const toShow = pool.filter((m) => ids.has(String(m.id).trim()));\r\n    if (toShow.length === 0) {\r\n      // Puede ser que ids en baseCompData no coincidan con los id de markers (dataset distinto)\r\n      return;\r\n    }\r\n\r\n    clearMarkers();\r\n    addMarkers(toShow);\r\n    setShowingAssociated(true);\r\n  }, [map, showingAssociated, baseCompData, markersForMercado, addMarkers, clearMarkers, renderNormal]);\r\n\r\n  // Cuando cambian los marcadores normales, salir de Mercado y renderizar normal\r\n  useEffect(() => {\r\n    if (showingAssociated) setShowingAssociated(false);\r\n    renderNormal();\r\n  }, [renderNormal, showingAssociated]);\r\n\r\n  // Re-render al moverse/zoomear sólo en modo normal\r\n  useEffect(() => {\r\n    if (!map) return;\r\n\r\n    const onMoveEnd = () => {\r\n      if (showingAssociated) return;\r\n      renderNormal();\r\n    };\r\n\r\n    map.on(\"moveend\", onMoveEnd);\r\n    return () => {\r\n      map.off(\"moveend\", onMoveEnd);\r\n    };\r\n  }, [map, renderNormal, showingAssociated]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default IconMarkersLayer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}