{"ast":null,"code":"import React,{useMemo,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FilterPanel=_ref=>{let{markers,allMarkers,selectedRegion,onFiltersChange,onStationSelect}=_ref;const[selectedComuna,setSelectedComuna]=useState('');const[selectedMarca,setSelectedMarca]=useState('');const[selectedJefeZona,setSelectedJefeZona]=useState('');const[selectedEds,setSelectedEds]=useState('');const[edsSearchTerm,setEdsSearchTerm]=useState('');const[globalEdsSearch,setGlobalEdsSearch]=useState('');const[globalEdsSearchTerm,setGlobalEdsSearchTerm]=useState('');const[soloGuerraPrecios,setSoloGuerraPrecios]=useState(false);const[soloEstacionesPES,setSoloEstacionesPES]=useState(false);console.log('ðŸŽ¨ FilterPanel RENDER:',{selectedRegion,selectedComuna,selectedMarca});const tuasMarcas=['Aramco','Petrobras'];// Normalize string for comparison (trim and lowercase)\nconst normalizeString=str=>{return str?str.trim().toLowerCase():'';};const comunas=useMemo(()=>{let filtered=markers.filter(m=>m.Region===selectedRegion);// If a Jefe de Zona is selected, only show comunas for that jefe\nif(selectedJefeZona){filtered=filtered.filter(m=>normalizeString(m.nombre)===normalizeString(selectedJefeZona));}const comunaSet=new Set(filtered.map(m=>m.Comuna).filter(c=>c));return Array.from(comunaSet).sort();},[markers,selectedRegion,selectedJefeZona]);// Clear comuna filter when region changes\nReact.useEffect(()=>{console.log('ðŸŒ REGION CHANGED:',selectedRegion,'- Clearing filters');setSelectedComuna('');setSelectedMarca('');setSelectedJefeZona('');setSelectedEds('');},[selectedRegion]);const marcas=useMemo(()=>{const filtered=markers.filter(m=>m.Region===selectedRegion);return[...new Set(filtered.map(m=>m.Marca))].sort();},[markers,selectedRegion]);const jefesZona=useMemo(()=>{const filtered=markers.filter(m=>m.Region===selectedRegion&&m.nombre&&tuasMarcas.includes(m.Marca));const nombres=[...new Set(filtered.map(m=>m.nombre))];console.log('ðŸ” DEBUG Jefes de Zona - Nombres Ãºnicos encontrados:',nombres);// Filter out names that look like station names\nconst jefesLimpios=nombres.filter(nombre=>{// Exclude if it contains numbers (likely a station code)\nif(/\\d/.test(nombre)){console.log('âŒ Excluido por nÃºmeros:',nombre);return false;}// Exclude if it's too long (likely a station address)\nif(nombre.length>50){console.log('âŒ Excluido por longitud:',nombre);return false;}// Exclude if it contains common station keywords\nconst stationKeywords=['estacion','estaciÃ³n','eds','servicio','copec','shell','esso','petrobras','aramco'];const nombreLower=nombre.toLowerCase();if(stationKeywords.some(keyword=>nombreLower.includes(keyword))){console.log('âŒ Excluido por keyword de estaciÃ³n:',nombre);return false;}console.log('âœ… Incluido como jefe:',nombre);return true;}).sort();console.log('âœ… Jefes de Zona finales:',jefesLimpios);return jefesLimpios;},[markers,selectedRegion,tuasMarcas]);const comunasDelJefe=useMemo(()=>{if(!selectedJefeZona)return[];const jefeMarkers=markers.filter(m=>m.nombre===selectedJefeZona);return[...new Set(jefeMarkers.map(m=>m.Comuna))];},[markers,selectedJefeZona]);const allEds=useMemo(()=>{let filtered=markers.filter(m=>m.Region===selectedRegion);if(selectedJefeZona){filtered=filtered.filter(m=>comunasDelJefe.includes(m.Comuna));}if(selectedComuna){filtered=filtered.filter(m=>m.Comuna===selectedComuna);}if(selectedMarca){filtered=filtered.filter(m=>m.Marca===selectedMarca);}return[...new Set(filtered.map(m=>m.eds))].filter(eds=>eds).sort();},[markers,selectedRegion,selectedComuna,selectedMarca,selectedJefeZona,comunasDelJefe]);const filteredEds=useMemo(()=>{return allEds.filter(eds=>eds.toLowerCase().includes(edsSearchTerm.toLowerCase()));},[allEds,edsSearchTerm]);// All stations from all regions for global search\nconst allStations=useMemo(()=>{const stationMap=new Map();const markersToUse=allMarkers||markers;// Use allMarkers if available, fallback to markers\nmarkersToUse.forEach(m=>{if(m.eds&&m.pbl){const key=m.pbl;if(!stationMap.has(key)){stationMap.set(key,{pbl:m.pbl,eds:m.eds,region:m.Region,comuna:m.Comuna,marca:m.Marca,lat:m.lat,lng:m.lng});}}});return Array.from(stationMap.values()).sort((a,b)=>a.eds.localeCompare(b.eds));},[allMarkers,markers]);// Array CON filtro EDS para mostrar en mapa\nconst filteredMarkers=useMemo(()=>{console.log('ðŸ” FILTERING MARKERS:',{selectedRegion,selectedComuna,selectedMarca,selectedJefeZona,selectedEds,globalEdsSearch,totalMarkers:markers.length});const result=markers.filter(m=>{// Global EDS search (searches across all regions by station name/eds)\nif(globalEdsSearch.trim()){// Match by PBL (which is what we store when selecting from dropdown)\nconst searchMatch=m.pbl&&m.pbl.toLowerCase()===globalEdsSearch.toLowerCase();if(!searchMatch)return false;}const regionMatch=m.Region===selectedRegion;const edsMatch=!selectedEds||m.eds===selectedEds;const guerraMatch=!soloGuerraPrecios||m.Guerra_Precio==='Si';const pesMatch=!soloEstacionesPES||m.Surtidores_Autoservicio&&m.Surtidores_Autoservicio!==null&&m.Surtidores_Autoservicio!=='';if(selectedJefeZona){const esDelJefe=m.nombre===selectedJefeZona;const esCompetenciaEnComunasDelJefe=comunasDelJefe.includes(m.Comuna);const jefeMatch=esDelJefe||esCompetenciaEnComunasDelJefe;// Apply other filters if they are selected\nconst comunaMatch=!selectedComuna||normalizeString(m.Comuna)===normalizeString(selectedComuna);const marcaMatch=!selectedMarca||m.Marca===selectedMarca;return regionMatch&&jefeMatch&&edsMatch&&guerraMatch&&pesMatch&&comunaMatch&&marcaMatch;}if(selectedComuna){const comunaMatch=normalizeString(m.Comuna)===normalizeString(selectedComuna);const marcaMatch=!selectedMarca||m.Marca===selectedMarca;if(comunaMatch){console.log('âœ… MATCH:',{comuna:m.Comuna,selectedComuna,normalized:normalizeString(m.Comuna),selectedNormalized:normalizeString(selectedComuna),marca:m.Marca,eds:m.eds});}return regionMatch&&comunaMatch&&marcaMatch&&edsMatch&&guerraMatch&&pesMatch;}const marcaMatch=!selectedMarca||m.Marca===selectedMarca;return regionMatch&&marcaMatch&&edsMatch&&guerraMatch&&pesMatch;});console.log('ðŸ“Š FILTERED RESULT:',{count:result.length,comunas:[...new Set(result.map(m=>m.Comuna))],regions:[...new Set(result.map(m=>m.Region))],samples:result.slice(0,5).map(m=>({comuna:m.Comuna,region:m.Region,eds:m.eds,lat:m.lat,lng:m.lng}))});return result;},[markers,selectedRegion,selectedComuna,selectedMarca,selectedJefeZona,selectedEds,comunasDelJefe,soloGuerraPrecios,soloEstacionesPES,globalEdsSearch]);// Array SIN filtro EDS para botÃ³n Mercado\n// Solo filtra por regiÃ³n para que el botÃ³n Mercado muestre TODAS las estaciones de competencia\nconst filteredMarkersForMercado=useMemo(()=>{const result=markers.filter(m=>{const regionMatch=m.Region===selectedRegion;// No aplicamos filtros de comuna, marca, jefe de zona, etc.\n// Solo regiÃ³n para que Mercado muestre todas las estaciones de competencia\nreturn regionMatch;});console.log('ðŸª FILTERED MARKERS FOR MERCADO:',{selectedRegion,totalMarkersInRegion:result.length,sampleMarkers:result.slice(0,5).map(m=>({id:m.id,marca:m.Marca,eds:m.eds,pbl:m.pbl}))});return result;},[markers,selectedRegion]);// âœ… DEDUPLICAR filteredMarkers para el mapa\nconst uniqueFilteredMarkers=useMemo(()=>{const uniqueMap=new Map();filteredMarkers.forEach(marker=>{const key=marker.pbl||marker.id||\"\".concat(marker.lat,\"_\").concat(marker.lng);const existing=uniqueMap.get(key);if(!existing){uniqueMap.set(key,marker);}else{const existingDate=existing.fecha_aplicacion?new Date(existing.fecha_aplicacion):new Date(0);const currentDate=marker.fecha_aplicacion?new Date(marker.fecha_aplicacion):new Date(0);if(currentDate>existingDate){uniqueMap.set(key,marker);}}});return Array.from(uniqueMap.values());},[filteredMarkers]);// âœ… Enviar Ãºnicos al mapa, histÃ³rico completo para Mercado\nReact.useEffect(()=>{onFiltersChange(uniqueFilteredMarkers,filteredMarkersForMercado);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[uniqueFilteredMarkers,filteredMarkersForMercado]);// Contador de marcas (solo estaciones Ãºnicas)\nconst markersByBrand=useMemo(()=>{const result={};uniqueFilteredMarkers.forEach(m=>{result[m.Marca]=(result[m.Marca]||0)+1;});return result;},[uniqueFilteredMarkers]);// Contador total por marca en la regiÃ³n\nconst brandCounts=useMemo(()=>{const filtered=markers.filter(m=>m.Region===selectedRegion);const brandMap=new Map();filtered.forEach(m=>{const brand=m.Marca||'Sin marca';const id=m.pbl||m.id||\"\".concat(m.lat,\"_\").concat(m.lng);if(!brandMap.has(brand)){brandMap.set(brand,new Set());}brandMap.get(brand).add(id);});return Object.fromEntries(Array.from(brandMap.entries()).map(_ref2=>{let[name,set]=_ref2;return[name,set.size];}));},[markers,selectedRegion]);// Center map when comuna is selected\nReact.useEffect(()=>{console.log('ðŸ—ºï¸ Comuna changed:',selectedComuna,'Jefe:',selectedJefeZona);if(selectedComuna&&window.leafletMap&&window.L){// Find all markers for the selected comuna\n// We need to respect the Jefe de Zona filter if it's active\nlet markersInComuna=markers.filter(m=>normalizeString(m.Comuna)===normalizeString(selectedComuna));if(selectedJefeZona){markersInComuna=markersInComuna.filter(m=>{const esDelJefe=m.nombre===selectedJefeZona;const esCompetenciaEnComunasDelJefe=comunasDelJefe.includes(m.Comuna);return esDelJefe||esCompetenciaEnComunasDelJefe;});}console.log(\"\\uD83D\\uDD0D Found \".concat(markersInComuna.length,\" markers in comuna \").concat(selectedComuna));if(markersInComuna.length>0){// Calculate bounds\nconst lats=markersInComuna.map(m=>parseFloat(m.lat)).filter(l=>!isNaN(l));const lngs=markersInComuna.map(m=>parseFloat(m.lng)).filter(l=>!isNaN(l));if(lats.length>0&&lngs.length>0){const minLat=Math.min(...lats);const maxLat=Math.max(...lats);const minLng=Math.min(...lngs);const maxLng=Math.max(...lngs);console.log('âœ… Fitting bounds:',[[minLat,minLng],[maxLat,maxLng]]);// Add some padding to the bounds\nwindow.leafletMap.fitBounds([[minLat,minLng],[maxLat,maxLng]],{padding:[50,50],maxZoom:15// Don't zoom in too close if there's only one station or they are very close\n});}else{console.log('âŒ No valid coordinates found for markers in comuna');}}else{console.log('âŒ No markers found in comuna');}}},[selectedComuna,selectedJefeZona,markers,comunasDelJefe]);// Center map when EDS is selected\nReact.useEffect(()=>{if(selectedEds&&window.leafletMap){// Find the marker for the selected EDS\nconst edsMarker=markers.find(m=>m.eds===selectedEds);if(edsMarker&&edsMarker.lat&&edsMarker.lng){const lat=parseFloat(edsMarker.lat);const lng=parseFloat(edsMarker.lng);if(!isNaN(lat)&&!isNaN(lng)){// ðŸ”§ AJUSTAR ZOOM AQUÃ: Cambia el nÃºmero 16 para modificar el nivel de zoom\n// Valores sugeridos: 14 (mÃ¡s alejado), 16 (medio), 18 (mÃ¡s cerca)\nwindow.leafletMap.setView([lat,lng],16);}}}},[selectedEds,markers]);// Center map when global EDS search is selected\nReact.useEffect(()=>{if(globalEdsSearch&&window.leafletMap){// Find the marker for the selected station by PBL\nconst selectedStation=markers.find(m=>m.pbl&&m.pbl.toLowerCase()===globalEdsSearch.toLowerCase());if(selectedStation&&selectedStation.lat&&selectedStation.lng){const lat=parseFloat(selectedStation.lat);const lng=parseFloat(selectedStation.lng);if(!isNaN(lat)&&!isNaN(lng)){console.log('ðŸŽ¯ Centering map on global EDS search:',selectedStation.eds,lat,lng);// ðŸ”§ AJUSTAR ZOOM AQUÃ: Cambia el nÃºmero 16 para modificar el nivel de zoom\n// Valores sugeridos: 14 (mÃ¡s alejado), 16 (medio), 18 (mÃ¡s cerca)\nwindow.leafletMap.setView([lat,lng],16);}}else{console.log('âŒ No se encontrÃ³ estaciÃ³n con PBL:',globalEdsSearch);}}},[globalEdsSearch,markers]);const handleClearFilters=()=>{setSelectedComuna('');setSelectedMarca('');setSelectedJefeZona('');setSelectedEds('');setEdsSearchTerm('');setGlobalEdsSearch('');setSoloGuerraPrecios(false);setSoloEstacionesPES(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comuna-select\",children:\"Comuna\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"comuna-select\",value:selectedComuna,onChange:e=>setSelectedComuna(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas las comunas\"}),comunas.map(comuna=>/*#__PURE__*/_jsx(\"option\",{value:comuna,children:comuna},comuna))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"marca-select\",children:\"Marca\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"marca-select\",value:selectedMarca,onChange:e=>setSelectedMarca(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas las marcas\"}),marcas.map(marca=>/*#__PURE__*/_jsxs(\"option\",{value:marca,children:[marca,\" \",brandCounts[marca]?\"(\".concat(brandCounts[marca],\")\"):'']},marca))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"jefe-select\",children:\"Jefe de Zona\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"jefe-select\",value:selectedJefeZona,onChange:e=>setSelectedJefeZona(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un Jefe de Zona\"}),jefesZona.map(jefe=>/*#__PURE__*/_jsx(\"option\",{value:jefe,children:jefe},jefe))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"eds-select\",children:\"EDS\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"eds-select\",value:selectedEds,onChange:e=>setSelectedEds(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas las EDS\"}),filteredEds.map(eds=>/*#__PURE__*/_jsx(\"option\",{value:eds,children:eds},eds))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"global-eds-search\",children:\"EDS todas\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{id:\"global-eds-search\",type:\"text\",value:globalEdsSearchTerm,onChange:e=>{setGlobalEdsSearchTerm(e.target.value);if(!e.target.value){setGlobalEdsSearch('');}},placeholder:\"Buscar estaci\\xF3n...\",style:{width:'100%',padding:'8px',paddingRight:globalEdsSearchTerm?'30px':'8px',border:'1px solid #ccc',borderRadius:'4px',fontSize:'14px'}}),globalEdsSearchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setGlobalEdsSearchTerm('');setGlobalEdsSearch('');},style:{position:'absolute',right:'5px',top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',fontSize:'16px',color:'#999',padding:'0 5px',lineHeight:'1'},title:\"Limpiar b\\xFAsqueda\",children:\"\\u2715\"})]}),globalEdsSearchTerm&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'100%',left:0,right:0,maxHeight:'250px',overflowY:'auto',backgroundColor:'white',border:'1px solid #ccc',borderTop:'none',borderRadius:'0 0 4px 4px',zIndex:1000,boxShadow:'0 4px 6px rgba(0,0,0,0.1)'},children:allStations.filter(station=>station.eds.toLowerCase().includes(globalEdsSearchTerm.toLowerCase())||station.comuna.toLowerCase().includes(globalEdsSearchTerm.toLowerCase())||station.pbl.toLowerCase().includes(globalEdsSearchTerm.toLowerCase())).slice(0,50).map(station=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setGlobalEdsSearchTerm(\"\".concat(station.eds,\" - \").concat(station.comuna));setGlobalEdsSearch(station.pbl);if(onStationSelect){onStationSelect(station);}},style:{padding:'8px 12px',cursor:'pointer',borderBottom:'1px solid #f0f0f0',fontSize:'13px',backgroundColor:globalEdsSearch===station.pbl?'#e3f2fd':'white'},onMouseEnter:e=>e.target.style.backgroundColor='#f5f5f5',onMouseLeave:e=>e.target.style.backgroundColor=globalEdsSearch===station.pbl?'#e3f2fd':'white',children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:station.eds}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#666'},children:[station.comuna,\" (\",station.region,\")\"]})]},station.pbl))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group filter-checkbox\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"guerra-precios-checkbox\",className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"guerra-precios-checkbox\",type:\"checkbox\",checked:soloGuerraPrecios,onChange:e=>setSoloGuerraPrecios(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"checkbox-text\",children:\"Guerra de Precios\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group filter-checkbox filter-checkbox-pes\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"estaciones-pes-checkbox\",className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"estaciones-pes-checkbox\",type:\"checkbox\",checked:soloEstacionesPES,onChange:e=>setSoloEstacionesPES(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"checkbox-text\",children:\"Estaciones PES\"})]})})]});};export default FilterPanel;","map":{"version":3,"names":["React","useMemo","useState","jsx","_jsx","jsxs","_jsxs","FilterPanel","_ref","markers","allMarkers","selectedRegion","onFiltersChange","onStationSelect","selectedComuna","setSelectedComuna","selectedMarca","setSelectedMarca","selectedJefeZona","setSelectedJefeZona","selectedEds","setSelectedEds","edsSearchTerm","setEdsSearchTerm","globalEdsSearch","setGlobalEdsSearch","globalEdsSearchTerm","setGlobalEdsSearchTerm","soloGuerraPrecios","setSoloGuerraPrecios","soloEstacionesPES","setSoloEstacionesPES","console","log","tuasMarcas","normalizeString","str","trim","toLowerCase","comunas","filtered","filter","m","Region","nombre","comunaSet","Set","map","Comuna","c","Array","from","sort","useEffect","marcas","Marca","jefesZona","includes","nombres","jefesLimpios","test","length","stationKeywords","nombreLower","some","keyword","comunasDelJefe","jefeMarkers","allEds","eds","filteredEds","allStations","stationMap","Map","markersToUse","forEach","pbl","key","has","set","region","comuna","marca","lat","lng","values","a","b","localeCompare","filteredMarkers","totalMarkers","result","searchMatch","regionMatch","edsMatch","guerraMatch","Guerra_Precio","pesMatch","Surtidores_Autoservicio","esDelJefe","esCompetenciaEnComunasDelJefe","jefeMatch","comunaMatch","marcaMatch","normalized","selectedNormalized","count","regions","samples","slice","filteredMarkersForMercado","totalMarkersInRegion","sampleMarkers","id","uniqueFilteredMarkers","uniqueMap","marker","concat","existing","get","existingDate","fecha_aplicacion","Date","currentDate","markersByBrand","brandCounts","brandMap","brand","add","Object","fromEntries","entries","_ref2","name","size","window","leafletMap","L","markersInComuna","lats","parseFloat","l","isNaN","lngs","minLat","Math","min","maxLat","max","minLng","maxLng","fitBounds","padding","maxZoom","edsMarker","find","setView","selectedStation","handleClearFilters","className","children","htmlFor","value","onChange","e","target","jefe","style","position","type","placeholder","width","paddingRight","border","borderRadius","fontSize","onClick","right","top","transform","background","cursor","color","lineHeight","title","left","maxHeight","overflowY","backgroundColor","borderTop","zIndex","boxShadow","station","borderBottom","onMouseEnter","onMouseLeave","fontWeight","checked"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/FilterPanel.jsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\n\r\nconst FilterPanel = ({ markers, allMarkers, selectedRegion, onFiltersChange, onStationSelect }) => {\r\n  const [selectedComuna, setSelectedComuna] = useState('');\r\n  const [selectedMarca, setSelectedMarca] = useState('');\r\n  const [selectedJefeZona, setSelectedJefeZona] = useState('');\r\n  const [selectedEds, setSelectedEds] = useState('');\r\n  const [edsSearchTerm, setEdsSearchTerm] = useState('');\r\n  const [globalEdsSearch, setGlobalEdsSearch] = useState('');\r\n  const [globalEdsSearchTerm, setGlobalEdsSearchTerm] = useState('');\r\n  const [soloGuerraPrecios, setSoloGuerraPrecios] = useState(false);\r\n  const [soloEstacionesPES, setSoloEstacionesPES] = useState(false);\r\n\r\n  console.log('ðŸŽ¨ FilterPanel RENDER:', { selectedRegion, selectedComuna, selectedMarca });\r\n\r\n  const tuasMarcas = ['Aramco', 'Petrobras'];\r\n\r\n  // Normalize string for comparison (trim and lowercase)\r\n  const normalizeString = (str) => {\r\n    return str ? str.trim().toLowerCase() : '';\r\n  };\r\n\r\n  const comunas = useMemo(() => {\r\n    let filtered = markers.filter(m => m.Region === selectedRegion);\r\n\r\n    // If a Jefe de Zona is selected, only show comunas for that jefe\r\n    if (selectedJefeZona) {\r\n      filtered = filtered.filter(m =>\r\n        normalizeString(m.nombre) === normalizeString(selectedJefeZona)\r\n      );\r\n    }\r\n\r\n    const comunaSet = new Set(filtered.map(m => m.Comuna).filter(c => c));\r\n    return Array.from(comunaSet).sort();\r\n  }, [markers, selectedRegion, selectedJefeZona]);\r\n\r\n  // Clear comuna filter when region changes\r\n  React.useEffect(() => {\r\n    console.log('ðŸŒ REGION CHANGED:', selectedRegion, '- Clearing filters');\r\n    setSelectedComuna('');\r\n    setSelectedMarca('');\r\n    setSelectedJefeZona('');\r\n    setSelectedEds('');\r\n  }, [selectedRegion]);\r\n\r\n  const marcas = useMemo(() => {\r\n    const filtered = markers.filter(m => m.Region === selectedRegion);\r\n    return [...new Set(filtered.map(m => m.Marca))].sort();\r\n  }, [markers, selectedRegion]);\r\n\r\n  const jefesZona = useMemo(() => {\r\n    const filtered = markers.filter(\r\n      m => m.Region === selectedRegion && m.nombre && tuasMarcas.includes(m.Marca)\r\n    );\r\n    const nombres = [...new Set(filtered.map(m => m.nombre))];\r\n\r\n    console.log('ðŸ” DEBUG Jefes de Zona - Nombres Ãºnicos encontrados:', nombres);\r\n\r\n    // Filter out names that look like station names\r\n    const jefesLimpios = nombres.filter(nombre => {\r\n      // Exclude if it contains numbers (likely a station code)\r\n      if (/\\d/.test(nombre)) {\r\n        console.log('âŒ Excluido por nÃºmeros:', nombre);\r\n        return false;\r\n      }\r\n      // Exclude if it's too long (likely a station address)\r\n      if (nombre.length > 50) {\r\n        console.log('âŒ Excluido por longitud:', nombre);\r\n        return false;\r\n      }\r\n      // Exclude if it contains common station keywords\r\n      const stationKeywords = ['estacion', 'estaciÃ³n', 'eds', 'servicio', 'copec', 'shell', 'esso', 'petrobras', 'aramco'];\r\n      const nombreLower = nombre.toLowerCase();\r\n      if (stationKeywords.some(keyword => nombreLower.includes(keyword))) {\r\n        console.log('âŒ Excluido por keyword de estaciÃ³n:', nombre);\r\n        return false;\r\n      }\r\n      console.log('âœ… Incluido como jefe:', nombre);\r\n      return true;\r\n    }).sort();\r\n\r\n    console.log('âœ… Jefes de Zona finales:', jefesLimpios);\r\n    return jefesLimpios;\r\n  }, [markers, selectedRegion, tuasMarcas]);\r\n\r\n  const comunasDelJefe = useMemo(() => {\r\n    if (!selectedJefeZona) return [];\r\n    const jefeMarkers = markers.filter(m => m.nombre === selectedJefeZona);\r\n    return [...new Set(jefeMarkers.map(m => m.Comuna))];\r\n  }, [markers, selectedJefeZona]);\r\n\r\n  const allEds = useMemo(() => {\r\n    let filtered = markers.filter(m => m.Region === selectedRegion);\r\n    if (selectedJefeZona) {\r\n      filtered = filtered.filter(m => comunasDelJefe.includes(m.Comuna));\r\n    }\r\n    if (selectedComuna) {\r\n      filtered = filtered.filter(m => m.Comuna === selectedComuna);\r\n    }\r\n    if (selectedMarca) {\r\n      filtered = filtered.filter(m => m.Marca === selectedMarca);\r\n    }\r\n    return [...new Set(filtered.map(m => m.eds))].filter(eds => eds).sort();\r\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, comunasDelJefe]);\r\n\r\n  const filteredEds = useMemo(() => {\r\n    return allEds.filter(eds =>\r\n      eds.toLowerCase().includes(edsSearchTerm.toLowerCase())\r\n    );\r\n  }, [allEds, edsSearchTerm]);\r\n\r\n  // All stations from all regions for global search\r\n  const allStations = useMemo(() => {\r\n    const stationMap = new Map();\r\n    const markersToUse = allMarkers || markers; // Use allMarkers if available, fallback to markers\r\n    markersToUse.forEach(m => {\r\n      if (m.eds && m.pbl) {\r\n        const key = m.pbl;\r\n        if (!stationMap.has(key)) {\r\n          stationMap.set(key, {\r\n            pbl: m.pbl,\r\n            eds: m.eds,\r\n            region: m.Region,\r\n            comuna: m.Comuna,\r\n            marca: m.Marca,\r\n            lat: m.lat,\r\n            lng: m.lng\r\n          });\r\n        }\r\n      }\r\n    });\r\n    return Array.from(stationMap.values()).sort((a, b) => a.eds.localeCompare(b.eds));\r\n  }, [allMarkers, markers]);\r\n\r\n  // Array CON filtro EDS para mostrar en mapa\r\n  const filteredMarkers = useMemo(() => {\r\n    console.log('ðŸ” FILTERING MARKERS:', {\r\n      selectedRegion,\r\n      selectedComuna,\r\n      selectedMarca,\r\n      selectedJefeZona,\r\n      selectedEds,\r\n      globalEdsSearch,\r\n      totalMarkers: markers.length\r\n    });\r\n\r\n    const result = markers.filter(m => {\r\n      // Global EDS search (searches across all regions by station name/eds)\r\n      if (globalEdsSearch.trim()) {\r\n        // Match by PBL (which is what we store when selecting from dropdown)\r\n        const searchMatch = m.pbl && m.pbl.toLowerCase() === globalEdsSearch.toLowerCase();\r\n        if (!searchMatch) return false;\r\n      }\r\n\r\n      const regionMatch = m.Region === selectedRegion;\r\n      const edsMatch = !selectedEds || m.eds === selectedEds;\r\n      const guerraMatch = !soloGuerraPrecios || m.Guerra_Precio === 'Si';\r\n      const pesMatch = !soloEstacionesPES || (m.Surtidores_Autoservicio && m.Surtidores_Autoservicio !== null && m.Surtidores_Autoservicio !== '');\r\n\r\n      if (selectedJefeZona) {\r\n        const esDelJefe = m.nombre === selectedJefeZona;\r\n        const esCompetenciaEnComunasDelJefe = comunasDelJefe.includes(m.Comuna);\r\n        const jefeMatch = esDelJefe || esCompetenciaEnComunasDelJefe;\r\n\r\n        // Apply other filters if they are selected\r\n        const comunaMatch = !selectedComuna || normalizeString(m.Comuna) === normalizeString(selectedComuna);\r\n        const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n\r\n        return regionMatch && jefeMatch && edsMatch && guerraMatch && pesMatch && comunaMatch && marcaMatch;\r\n      }\r\n\r\n      if (selectedComuna) {\r\n        const comunaMatch = normalizeString(m.Comuna) === normalizeString(selectedComuna);\r\n        const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n\r\n        if (comunaMatch) {\r\n          console.log('âœ… MATCH:', {\r\n            comuna: m.Comuna,\r\n            selectedComuna,\r\n            normalized: normalizeString(m.Comuna),\r\n            selectedNormalized: normalizeString(selectedComuna),\r\n            marca: m.Marca,\r\n            eds: m.eds\r\n          });\r\n        }\r\n\r\n        return regionMatch && comunaMatch && marcaMatch && edsMatch && guerraMatch && pesMatch;\r\n      }\r\n\r\n      const marcaMatch = !selectedMarca || m.Marca === selectedMarca;\r\n      return regionMatch && marcaMatch && edsMatch && guerraMatch && pesMatch;\r\n    });\r\n\r\n    console.log('ðŸ“Š FILTERED RESULT:', {\r\n      count: result.length,\r\n      comunas: [...new Set(result.map(m => m.Comuna))],\r\n      regions: [...new Set(result.map(m => m.Region))],\r\n      samples: result.slice(0, 5).map(m => ({\r\n        comuna: m.Comuna,\r\n        region: m.Region,\r\n        eds: m.eds,\r\n        lat: m.lat,\r\n        lng: m.lng\r\n      }))\r\n    });\r\n\r\n    return result;\r\n  }, [markers, selectedRegion, selectedComuna, selectedMarca, selectedJefeZona, selectedEds, comunasDelJefe, soloGuerraPrecios, soloEstacionesPES, globalEdsSearch]);\r\n\r\n  // Array SIN filtro EDS para botÃ³n Mercado\r\n  // Solo filtra por regiÃ³n para que el botÃ³n Mercado muestre TODAS las estaciones de competencia\r\n  const filteredMarkersForMercado = useMemo(() => {\r\n    const result = markers.filter(m => {\r\n      const regionMatch = m.Region === selectedRegion;\r\n      // No aplicamos filtros de comuna, marca, jefe de zona, etc.\r\n      // Solo regiÃ³n para que Mercado muestre todas las estaciones de competencia\r\n      return regionMatch;\r\n    });\r\n\r\n    console.log('ðŸª FILTERED MARKERS FOR MERCADO:', {\r\n      selectedRegion,\r\n      totalMarkersInRegion: result.length,\r\n      sampleMarkers: result.slice(0, 5).map(m => ({ id: m.id, marca: m.Marca, eds: m.eds, pbl: m.pbl }))\r\n    });\r\n\r\n    return result;\r\n  }, [markers, selectedRegion]);\r\n\r\n  // âœ… DEDUPLICAR filteredMarkers para el mapa\r\n  const uniqueFilteredMarkers = useMemo(() => {\r\n    const uniqueMap = new Map();\r\n\r\n    filteredMarkers.forEach(marker => {\r\n      const key = marker.pbl || marker.id || `${marker.lat}_${marker.lng}`;\r\n      const existing = uniqueMap.get(key);\r\n\r\n      if (!existing) {\r\n        uniqueMap.set(key, marker);\r\n      } else {\r\n        const existingDate = existing.fecha_aplicacion ? new Date(existing.fecha_aplicacion) : new Date(0);\r\n        const currentDate = marker.fecha_aplicacion ? new Date(marker.fecha_aplicacion) : new Date(0);\r\n\r\n        if (currentDate > existingDate) {\r\n          uniqueMap.set(key, marker);\r\n        }\r\n      }\r\n    });\r\n\r\n    return Array.from(uniqueMap.values());\r\n  }, [filteredMarkers]);\r\n\r\n  // âœ… Enviar Ãºnicos al mapa, histÃ³rico completo para Mercado\r\n  React.useEffect(() => {\r\n    onFiltersChange(uniqueFilteredMarkers, filteredMarkersForMercado);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [uniqueFilteredMarkers, filteredMarkersForMercado]);\r\n\r\n  // Contador de marcas (solo estaciones Ãºnicas)\r\n  const markersByBrand = useMemo(() => {\r\n    const result = {};\r\n    uniqueFilteredMarkers.forEach(m => {\r\n      result[m.Marca] = (result[m.Marca] || 0) + 1;\r\n    });\r\n    return result;\r\n  }, [uniqueFilteredMarkers]);\r\n\r\n  // Contador total por marca en la regiÃ³n\r\n  const brandCounts = useMemo(() => {\r\n    const filtered = markers.filter(m => m.Region === selectedRegion);\r\n    const brandMap = new Map();\r\n    filtered.forEach(m => {\r\n      const brand = m.Marca || 'Sin marca';\r\n      const id = m.pbl || m.id || `${m.lat}_${m.lng}`;\r\n      if (!brandMap.has(brand)) {\r\n        brandMap.set(brand, new Set());\r\n      }\r\n      brandMap.get(brand).add(id);\r\n    });\r\n    return Object.fromEntries(\r\n      Array.from(brandMap.entries()).map(([name, set]) => [name, set.size])\r\n    );\r\n  }, [markers, selectedRegion]);\r\n\r\n  // Center map when comuna is selected\r\n  React.useEffect(() => {\r\n    console.log('ðŸ—ºï¸ Comuna changed:', selectedComuna, 'Jefe:', selectedJefeZona);\r\n\r\n    if (selectedComuna && window.leafletMap && window.L) {\r\n      // Find all markers for the selected comuna\r\n      // We need to respect the Jefe de Zona filter if it's active\r\n      let markersInComuna = markers.filter(m =>\r\n        normalizeString(m.Comuna) === normalizeString(selectedComuna)\r\n      );\r\n\r\n      if (selectedJefeZona) {\r\n        markersInComuna = markersInComuna.filter(m => {\r\n          const esDelJefe = m.nombre === selectedJefeZona;\r\n          const esCompetenciaEnComunasDelJefe = comunasDelJefe.includes(m.Comuna);\r\n          return esDelJefe || esCompetenciaEnComunasDelJefe;\r\n        });\r\n      }\r\n\r\n      console.log(`ðŸ” Found ${markersInComuna.length} markers in comuna ${selectedComuna}`);\r\n\r\n      if (markersInComuna.length > 0) {\r\n        // Calculate bounds\r\n        const lats = markersInComuna.map(m => parseFloat(m.lat)).filter(l => !isNaN(l));\r\n        const lngs = markersInComuna.map(m => parseFloat(m.lng)).filter(l => !isNaN(l));\r\n\r\n        if (lats.length > 0 && lngs.length > 0) {\r\n          const minLat = Math.min(...lats);\r\n          const maxLat = Math.max(...lats);\r\n          const minLng = Math.min(...lngs);\r\n          const maxLng = Math.max(...lngs);\r\n\r\n          console.log('âœ… Fitting bounds:', [[minLat, minLng], [maxLat, maxLng]]);\r\n\r\n          // Add some padding to the bounds\r\n          window.leafletMap.fitBounds([[minLat, minLng], [maxLat, maxLng]], {\r\n            padding: [50, 50],\r\n            maxZoom: 15 // Don't zoom in too close if there's only one station or they are very close\r\n          });\r\n        } else {\r\n          console.log('âŒ No valid coordinates found for markers in comuna');\r\n        }\r\n      } else {\r\n        console.log('âŒ No markers found in comuna');\r\n      }\r\n    }\r\n  }, [selectedComuna, selectedJefeZona, markers, comunasDelJefe]);\r\n\r\n  // Center map when EDS is selected\r\n  React.useEffect(() => {\r\n    if (selectedEds && window.leafletMap) {\r\n      // Find the marker for the selected EDS\r\n      const edsMarker = markers.find(m => m.eds === selectedEds);\r\n\r\n      if (edsMarker && edsMarker.lat && edsMarker.lng) {\r\n        const lat = parseFloat(edsMarker.lat);\r\n        const lng = parseFloat(edsMarker.lng);\r\n\r\n        if (!isNaN(lat) && !isNaN(lng)) {\r\n          // ðŸ”§ AJUSTAR ZOOM AQUÃ: Cambia el nÃºmero 16 para modificar el nivel de zoom\r\n          // Valores sugeridos: 14 (mÃ¡s alejado), 16 (medio), 18 (mÃ¡s cerca)\r\n          window.leafletMap.setView([lat, lng], 16);\r\n        }\r\n      }\r\n    }\r\n  }, [selectedEds, markers]);\r\n\r\n  // Center map when global EDS search is selected\r\n  React.useEffect(() => {\r\n    if (globalEdsSearch && window.leafletMap) {\r\n      // Find the marker for the selected station by PBL\r\n      const selectedStation = markers.find(m => m.pbl && m.pbl.toLowerCase() === globalEdsSearch.toLowerCase());\r\n\r\n      if (selectedStation && selectedStation.lat && selectedStation.lng) {\r\n        const lat = parseFloat(selectedStation.lat);\r\n        const lng = parseFloat(selectedStation.lng);\r\n\r\n        if (!isNaN(lat) && !isNaN(lng)) {\r\n          console.log('ðŸŽ¯ Centering map on global EDS search:', selectedStation.eds, lat, lng);\r\n          // ðŸ”§ AJUSTAR ZOOM AQUÃ: Cambia el nÃºmero 16 para modificar el nivel de zoom\r\n          // Valores sugeridos: 14 (mÃ¡s alejado), 16 (medio), 18 (mÃ¡s cerca)\r\n          window.leafletMap.setView([lat, lng], 16);\r\n        }\r\n      } else {\r\n        console.log('âŒ No se encontrÃ³ estaciÃ³n con PBL:', globalEdsSearch);\r\n      }\r\n    }\r\n  }, [globalEdsSearch, markers]);\r\n\r\n  const handleClearFilters = () => {\r\n    setSelectedComuna('');\r\n    setSelectedMarca('');\r\n    setSelectedJefeZona('');\r\n    setSelectedEds('');\r\n    setEdsSearchTerm('');\r\n    setGlobalEdsSearch('');\r\n    setSoloGuerraPrecios(false);\r\n    setSoloEstacionesPES(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"filter-panel\">\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"comuna-select\">Comuna</label>\r\n        <select\r\n          id=\"comuna-select\"\r\n          value={selectedComuna}\r\n          onChange={(e) => setSelectedComuna(e.target.value)}\r\n        >\r\n          <option value=\"\">Todas las comunas</option>\r\n          {comunas.map(comuna => (\r\n            <option key={comuna} value={comuna}>{comuna}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n\r\n\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"marca-select\">Marca</label>\r\n        <select\r\n          id=\"marca-select\"\r\n          value={selectedMarca}\r\n          onChange={(e) => setSelectedMarca(e.target.value)}\r\n        >\r\n          <option value=\"\">Todas las marcas</option>\r\n          {marcas.map(marca => (\r\n            <option key={marca} value={marca}>\r\n              {marca} {brandCounts[marca] ? `(${brandCounts[marca]})` : ''}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"jefe-select\">Jefe de Zona</label>\r\n        <select\r\n          id=\"jefe-select\"\r\n          value={selectedJefeZona}\r\n          onChange={(e) => setSelectedJefeZona(e.target.value)}\r\n        >\r\n          <option value=\"\">Selecciona un Jefe de Zona</option>\r\n          {jefesZona.map(jefe => (\r\n            <option key={jefe} value={jefe}>{jefe}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group\">\r\n        <label htmlFor=\"eds-select\">EDS</label>\r\n        <select\r\n          id=\"eds-select\"\r\n          value={selectedEds}\r\n          onChange={(e) => setSelectedEds(e.target.value)}\r\n        >\r\n          <option value=\"\">Todas las EDS</option>\r\n          {filteredEds.map(eds => (\r\n            <option key={eds} value={eds}>{eds}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"filter-group\" style={{ position: 'relative' }}>\r\n        <label htmlFor=\"global-eds-search\">EDS todas</label>\r\n        <div style={{ position: 'relative' }}>\r\n          <input\r\n            id=\"global-eds-search\"\r\n            type=\"text\"\r\n            value={globalEdsSearchTerm}\r\n            onChange={(e) => {\r\n              setGlobalEdsSearchTerm(e.target.value);\r\n              if (!e.target.value) {\r\n                setGlobalEdsSearch('');\r\n              }\r\n            }}\r\n            placeholder=\"Buscar estaciÃ³n...\"\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px',\r\n              paddingRight: globalEdsSearchTerm ? '30px' : '8px',\r\n              border: '1px solid #ccc',\r\n              borderRadius: '4px',\r\n              fontSize: '14px'\r\n            }}\r\n          />\r\n          {globalEdsSearchTerm && (\r\n            <button\r\n              onClick={() => {\r\n                setGlobalEdsSearchTerm('');\r\n                setGlobalEdsSearch('');\r\n              }}\r\n              style={{\r\n                position: 'absolute',\r\n                right: '5px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                background: 'none',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '16px',\r\n                color: '#999',\r\n                padding: '0 5px',\r\n                lineHeight: '1'\r\n              }}\r\n              title=\"Limpiar bÃºsqueda\"\r\n            >\r\n              âœ•\r\n            </button>\r\n          )}\r\n        </div>\r\n        {globalEdsSearchTerm && (\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: '100%',\r\n            left: 0,\r\n            right: 0,\r\n            maxHeight: '250px',\r\n            overflowY: 'auto',\r\n            backgroundColor: 'white',\r\n            border: '1px solid #ccc',\r\n            borderTop: 'none',\r\n            borderRadius: '0 0 4px 4px',\r\n            zIndex: 1000,\r\n            boxShadow: '0 4px 6px rgba(0,0,0,0.1)'\r\n          }}>\r\n            {allStations\r\n              .filter(station =>\r\n                station.eds.toLowerCase().includes(globalEdsSearchTerm.toLowerCase()) ||\r\n                station.comuna.toLowerCase().includes(globalEdsSearchTerm.toLowerCase()) ||\r\n                station.pbl.toLowerCase().includes(globalEdsSearchTerm.toLowerCase())\r\n              )\r\n              .slice(0, 50)\r\n              .map(station => (\r\n                <div\r\n                  key={station.pbl}\r\n                  onClick={() => {\r\n                    setGlobalEdsSearchTerm(`${station.eds} - ${station.comuna}`);\r\n                    setGlobalEdsSearch(station.pbl);\r\n                    if (onStationSelect) {\r\n                      onStationSelect(station);\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    padding: '8px 12px',\r\n                    cursor: 'pointer',\r\n                    borderBottom: '1px solid #f0f0f0',\r\n                    fontSize: '13px',\r\n                    backgroundColor: globalEdsSearch === station.pbl ? '#e3f2fd' : 'white'\r\n                  }}\r\n                  onMouseEnter={(e) => e.target.style.backgroundColor = '#f5f5f5'}\r\n                  onMouseLeave={(e) => e.target.style.backgroundColor = globalEdsSearch === station.pbl ? '#e3f2fd' : 'white'}\r\n                >\r\n                  <div style={{ fontWeight: 'bold' }}>{station.eds}</div>\r\n                  <div style={{ fontSize: '11px', color: '#666' }}>\r\n                    {station.comuna} ({station.region})\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n\r\n\r\n      <div className=\"filter-group filter-checkbox\">\r\n        <label htmlFor=\"guerra-precios-checkbox\" className=\"checkbox-label\">\r\n          <input\r\n            id=\"guerra-precios-checkbox\"\r\n            type=\"checkbox\"\r\n            checked={soloGuerraPrecios}\r\n            onChange={(e) => setSoloGuerraPrecios(e.target.checked)}\r\n          />\r\n          <span className=\"checkbox-text\">Guerra de Precios</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"filter-group filter-checkbox filter-checkbox-pes\">\r\n        <label htmlFor=\"estaciones-pes-checkbox\" className=\"checkbox-label\">\r\n          <input\r\n            id=\"estaciones-pes-checkbox\"\r\n            type=\"checkbox\"\r\n            checked={soloEstacionesPES}\r\n            onChange={(e) => setSoloEstacionesPES(e.target.checked)}\r\n          />\r\n          <span className=\"checkbox-text\">Estaciones PES</span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}