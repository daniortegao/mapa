{"ast":null,"code":"import _objectSpread from\"C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{getMercadoAlerta,getHistoricoAlerta,getDataBaseguerra,getDataBaseajuste}from'../services/apiService';import'../styles/AlertPanel.css';// Agrupar alertas por estaciÃ³n\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function groupAlertsByStation(alerts){const grouped={};alerts.forEach(alert=>{const key=alert.Nom_Eds||'Sin nombre';if(!grouped[key])grouped[key]=[];grouped[key].push(alert);});return grouped;}// CONTADOR CORRECTO DE ESTACIONES ÃšNICAS\nfunction getStationCount(alerts){const estaciones={};alerts.forEach(a=>estaciones[a.Nom_Eds||'Sin nombre']=true);return Object.keys(estaciones).length;}// FunciÃ³n para parsear fechas en formato \"DD-MM-YYYY HH:mm\"\nfunction parseFecha(fechaStr){if(!fechaStr||typeof fechaStr!=='string'){return new Date();}const parts=fechaStr.trim().split(' ');const datePart=parts[0];const timePart=parts[1];if(!datePart)return new Date();const dateParts=datePart.split('-');if(dateParts.length!==3)return new Date();const[day,month,year]=dateParts.map(Number);const[hours,minutes]=timePart?timePart.split(':').map(Number):[0,0];if(isNaN(day)||isNaN(month)||isNaN(year))return new Date();return new Date(year,month-1,day,hours||0,minutes||0);}const ITEMS_PER_PAGE=50;const AlertPanel=_ref=>{let{isVisible,onClose,alertasExternas}=_ref;const[activeTab,setActiveTab]=useState('alertas');const[alertas,setAlertas]=useState([]);const[historico,setHistorico]=useState([]);const[guerraData,setGuerraData]=useState([]);const[ajustesData,setAjustesData]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[modalExpanded,setModalExpanded]=useState(false);// â† NUEVO\n// Estados para filtros histÃ³rico\nconst[filterNombreEstacion,setFilterNombreEstacion]=useState('');const[filterSoloGuerra,setFilterSoloGuerra]=useState(false);// Estados para filtros ajustes\nconst[filterNombreAjuste,setFilterNombreAjuste]=useState('');const[filterCombustible,setFilterCombustible]=useState('');useEffect(()=>{if(alertasExternas){setAlertas(alertasExternas);setLoading(false);}else if(isVisible){loadData();}},[isVisible,alertasExternas]);const loadData=async()=>{try{setLoading(true);const[alertasData,historicoData,guerraDataResult,ajustesDataResult]=await Promise.all([getMercadoAlerta(),getHistoricoAlerta(),getDataBaseguerra(),getDataBaseajuste()]);setAlertas(Array.isArray(alertasData)?alertasData:[]);setHistorico(Array.isArray(historicoData)?historicoData:[]);const guerraArr=Array.isArray(guerraDataResult)?guerraDataResult:Array.isArray(guerraDataResult===null||guerraDataResult===void 0?void 0:guerraDataResult.data)?guerraDataResult.data:[];setGuerraData(guerraArr);const ajustesArr=Array.isArray(ajustesDataResult)?ajustesDataResult:Array.isArray(ajustesDataResult===null||ajustesDataResult===void 0?void 0:ajustesDataResult.data)?ajustesDataResult.data:[];setAjustesData(ajustesArr);}catch(_unused){setAlertas([]);setHistorico([]);setGuerraData([]);setAjustesData([]);}finally{setLoading(false);}};const agrupadas=useMemo(()=>groupAlertsByStation(alertas),[alertas]);const cantidadEstaciones=useMemo(()=>getStationCount(alertas),[alertas]);const estacionesGuerra=useMemo(()=>{if(!Array.isArray(guerraData))return[];return guerraData.filter(item=>item.Activa==='Si').sort((a,b)=>{if(a.Guerra_Precio==='Si'&&b.Guerra_Precio!=='Si')return-1;if(a.Guerra_Precio!=='Si'&&b.Guerra_Precio==='Si')return 1;return(a.Nom_Eds||'').localeCompare(b.Nom_Eds||'');});},[guerraData]);// Filtrado del histÃ³rico\nconst historicoFiltrado=useMemo(()=>{let filtered=[...historico];if(filterNombreEstacion.trim()!==''){const searchTerm=filterNombreEstacion.toLowerCase();filtered=filtered.filter(item=>(item.Nom_Eds||'').toLowerCase().includes(searchTerm));}if(filterSoloGuerra){const estacionesEnGuerra=new Set(guerraData.filter(g=>g.Guerra_Precio==='Si').map(g=>g.Nom_Eds));filtered=filtered.filter(item=>estacionesEnGuerra.has(item.Nom_Eds));}return filtered;},[historico,filterNombreEstacion,filterSoloGuerra,guerraData]);const historicoSorted=useMemo(()=>{return[...historicoFiltrado].sort((a,b)=>parseFecha(b.Fecha)-parseFecha(a.Fecha));},[historicoFiltrado]);// Filtrado de ajustes\nconst ajustesFiltrado=useMemo(()=>{let filtered=[...ajustesData];if(filterNombreAjuste.trim()!==''){const searchTerm=filterNombreAjuste.toLowerCase();filtered=filtered.filter(item=>(item.Nom_Eds||'').toLowerCase().includes(searchTerm));}if(filterCombustible.trim()!==''){filtered=filtered.filter(item=>item.combustible===filterCombustible);}return filtered;},[ajustesData,filterNombreAjuste,filterCombustible]);const ajustesSorted=useMemo(()=>{return[...ajustesFiltrado];},[ajustesFiltrado]);const totalPages=Math.max(1,Math.ceil(historicoSorted.length/ITEMS_PER_PAGE));const totalPagesAjustes=Math.max(1,Math.ceil(ajustesSorted.length/ITEMS_PER_PAGE));const historicoPageSlice=historicoSorted.slice((page-1)*ITEMS_PER_PAGE,page*ITEMS_PER_PAGE);const ajustesPageSlice=ajustesSorted.slice((page-1)*ITEMS_PER_PAGE,page*ITEMS_PER_PAGE);const handlePrevPage=()=>setPage(p=>Math.max(p-1,1));const handleNextPage=()=>setPage(p=>Math.min(p+1,activeTab==='ajustes'?totalPagesAjustes:totalPages));// Reset pÃ¡gina al cambiar filtros o tab\nuseEffect(()=>{setPage(1);},[filterNombreEstacion,filterSoloGuerra,filterNombreAjuste,filterCombustible,activeTab]);const combustiblesUnicos=useMemo(()=>{return[...new Set(ajustesData.map(a=>a.combustible))].filter(Boolean);},[ajustesData]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"alert-panel\".concat(!isVisible?' hidden':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-panel-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"alert-panel-title\",children:\"\\uD83D\\uDCCA Alertas de Mercado\"}),/*#__PURE__*/_jsx(\"button\",{className:\"alert-panel-close\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"alert-tab \".concat(activeTab==='alertas'?'active':''),onClick:()=>setActiveTab('alertas'),children:[\"Alertas Activas (\",cantidadEstaciones,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"alert-tab \".concat(activeTab==='historico'?'active':''),onClick:()=>setActiveTab('historico'),children:[\"Hist\\xF3rico Movimiento (\",historicoSorted.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"alert-tab \".concat(activeTab==='ajustes'?'active':''),onClick:()=>setActiveTab('ajustes'),children:[\"Ajustes PES (\",ajustesSorted.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"alert-tab \".concat(activeTab==='guerra'?'active':''),onClick:()=>setActiveTab('guerra'),children:[\"En Seguimiento (\",estacionesGuerra.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-panel-content\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"alert-loading\",children:\"Cargando...\"}):activeTab==='alertas'?/*#__PURE__*/_jsx(AlertasActivas,{agrupadas:agrupadas}):activeTab==='guerra'?/*#__PURE__*/_jsx(GuerraPreciosPanel,{data:estacionesGuerra}):activeTab==='historico'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HistoricoAlertas,{data:historicoPageSlice,filterNombreEstacion:filterNombreEstacion,setFilterNombreEstacion:setFilterNombreEstacion,filterSoloGuerra:filterSoloGuerra,setFilterSoloGuerra:setFilterSoloGuerra,totalItems:historicoSorted.length,onExpand:()=>setModalExpanded(true)}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,textAlign:'center',padding:'10px',background:'white'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevPage,disabled:page===1,children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:'0 10px'},children:[\"P\\xE1gina \",page,\" de \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,disabled:page===totalPages,children:\"Siguiente\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AjustesTabla,{data:ajustesPageSlice,filterNombreAjuste:filterNombreAjuste,setFilterNombreAjuste:setFilterNombreAjuste,filterCombustible:filterCombustible,setFilterCombustible:setFilterCombustible,combustiblesUnicos:combustiblesUnicos,totalItems:ajustesSorted.length}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,textAlign:'center',padding:'10px',background:'white'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevPage,disabled:page===1,children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:'0 10px'},children:[\"P\\xE1gina \",page,\" de \",totalPagesAjustes]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,disabled:page===totalPagesAjustes,children:\"Siguiente\"})]})]})})]}),modalExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-expandido-overlay\",onClick:()=>setModalExpanded(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-expandido-contenido\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-expandido-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCA Hist\\xF3rico de Movimiento - Vista Completa\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close-btn\",onClick:()=>setModalExpanded(false),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-expandido-body\",children:[/*#__PURE__*/_jsx(HistoricoAlertas,{data:historicoPageSlice,filterNombreEstacion:filterNombreEstacion,setFilterNombreEstacion:setFilterNombreEstacion,filterSoloGuerra:filterSoloGuerra,setFilterSoloGuerra:setFilterSoloGuerra,totalItems:historicoSorted.length,onExpand:()=>{}}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,textAlign:'center',padding:'10px',background:'white'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevPage,disabled:page===1,children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:'0 10px'},children:[\"P\\xE1gina \",page,\" de \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,disabled:page===totalPages,children:\"Siguiente\"})]})]})]})})]});};const AlertasActivas=_ref2=>{let{agrupadas}=_ref2;const estaciones=Object.entries(agrupadas);if(estaciones.length===0)return/*#__PURE__*/_jsx(\"div\",{className:\"alert-empty\",children:\"No hay alertas activas\"});return/*#__PURE__*/_jsx(\"div\",{className:\"alerts-list\",children:estaciones.map(_ref3=>{let[station,alerts]=_ref3;const anyWar=alerts.some(a=>a.Guerra_Precio==='Si');const stationAlert=alerts[0];return/*#__PURE__*/_jsxs(\"div\",{className:\"alert-card\".concat(anyWar?' guerra':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-card-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alert-icon\",children:anyWar?'âš¡':'ðŸ”´'}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-card-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:station}),/*#__PURE__*/_jsxs(\"span\",{className:\"alert-marca\",children:[stationAlert.marca,\" - \",stationAlert.cod_cne]})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"alert-combs-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Comb.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actual\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Anterior\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dif.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hora\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipo\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:alerts.map((a,i)=>{const dif=(a.Precio||0)-(a.PrecioAnterior||0);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:a.Combustible}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",a.Precio]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",a.PrecioAnterior]}),/*#__PURE__*/_jsxs(\"td\",{className:dif<0?'negative':'positive',children:[dif>0&&\"+\",dif]}),/*#__PURE__*/_jsx(\"td\",{children:a.Horario}),/*#__PURE__*/_jsx(\"td\",{children:a.tipo_atencion})]},i);})})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px',color:'#999',fontSize:'12px'},children:alerts.map(a=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Actual: \",a.Fecha,\", Anterior: \",a.FechaAnterior]}),a.Guerra_Precio===\"Si\"&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:8,color:\"#e67e22\"},children:\"\\u26A1 GUERRA DE PRECIO\"})]},a.Combustible))})]},station);})});};const GuerraPreciosPanel=_ref4=>{let{data}=_ref4;if(!Array.isArray(data)||data.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-empty\",children:\"No hay estaciones disponibles\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"guerra-list-simple\",children:data.map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"guerra-simple-card\".concat(item.Guerra_Precio==='Si'?' gcard-guerra':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gsc-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gsc-icon\".concat(item.Guerra_Precio==='Si'?' guerra':''),children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-eds\",children:item.Nom_Eds}),/*#__PURE__*/_jsxs(\"span\",{className:\"gsc-pbl\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gsc-pbl-label\",children:\"PBL\"}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-pbl-value\",children:item.PBL})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gsc-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gsc-label\",children:\"CNE:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-value\",children:item.ID_Cne}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-label\",children:\"Tipo:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-value\",children:item.Tipo_EDS}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-label estado \".concat(item.Activa==='Si'?'activo':'inactivo'),children:item.Activa==='Si'?'Activa':'Inactiva'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gsc-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gsc-label\",children:\"Regi\\xF3n:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"gsc-value\",children:item.region})]})]},idx))});};const HistoricoAlertas=_ref5=>{let{data,filterNombreEstacion,setFilterNombreEstacion,filterSoloGuerra,setFilterSoloGuerra,totalItems,onExpand}=_ref5;if(!Array.isArray(data))return/*#__PURE__*/_jsx(\"div\",{className:\"alert-empty\",children:\"\\u26A0\\uFE0F Error: Los datos no son un array\"});const hayFiltrosActivos=filterNombreEstacion.trim()!==''||filterSoloGuerra;const limpiarFiltros=()=>{setFilterNombreEstacion('');setFilterSoloGuerra(false);};const formatFechaCompacta=fechaStr=>{if(!fechaStr)return{dia:'-',hora:''};const[fecha,hora]=fechaStr.split(' ');return{dia:fecha||'-',hora:(hora===null||hora===void 0?void 0:hora.substring(0,5))||''};};return/*#__PURE__*/_jsxs(\"div\",{className:\"historico-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"historico-filtros\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"filter-nombre\",type:\"text\",className:\"input-filtro-hist\",placeholder:\"Buscar estaci\\xF3n...\",value:filterNombreEstacion,onChange:e=>setFilterNombreEstacion(e.target.value)}),/*#__PURE__*/_jsxs(\"label\",{className:\"check-filtro-hist\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:filterSoloGuerra,onChange:e=>setFilterSoloGuerra(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{children:\"Solo estaciones en guerra\"})]}),hayFiltrosActivos&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-limpiar-filtros\",onClick:limpiarFiltros,title:\"Limpiar todos los filtros\",children:\"\\u2715 Limpiar\"}),onExpand&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-expandir-vista\",onClick:onExpand,title:\"Expandir vista\",children:\"\\u26F6 Expandir\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'auto',color:'#666',fontSize:'13px',fontWeight:600},children:[\"Mostrando \",data.length,\" de \",totalItems]})]}),data.length===0&&hayFiltrosActivos?/*#__PURE__*/_jsx(\"div\",{className:\"sin-resultados-filtro\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sin-resultados-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sin-resultados-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"sin-resultados-texto\",children:[\"No se encontraron resultados para la b\\xFAsqueda\",filterNombreEstacion&&/*#__PURE__*/_jsxs(\"strong\",{children:[\" \\\"\",filterNombreEstacion,\"\\\"\"]}),filterSoloGuerra&&/*#__PURE__*/_jsx(\"span\",{children:\" (solo guerra)\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-limpiar-filtros-destacado\",onClick:limpiarFiltros,children:\"Limpiar filtros y ver todos\"})]})}):data.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"alert-empty\",children:\"\\uD83D\\uDCCB No hay hist\\xF3rico disponible\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"historico-table-compact\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{title:\"Estaci\\xF3n\",children:\"Estaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Marca\",children:\"Marca\"}),/*#__PURE__*/_jsx(\"th\",{title:\"C\\xF3digo CNE\",children:\"CNE\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Combustible\",children:\"Comb\"}),/*#__PURE__*/_jsx(\"th\",{title:\"PBL\",children:\"PBL\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Precio Actual\",children:\"P Actual\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Precio Anterior\",children:\"P Anterior\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Diferencia\",children:\"Ajuste\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Tipo de Atenci\\xF3n\",children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Horario\",children:\"Horario\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Fecha Cambio Actual\",children:\"Fecha Actual\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Fecha Cambio Anterior\",children:\"Fecha Anterior\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Fecha de Carga\",children:\"Fecha Carga\"}),/*#__PURE__*/_jsx(\"th\",{title:\"Marcador Principal\",children:\"Marcador\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((item,idx)=>{var _item$Nom_Eds,_item$cod_cne,_item$Combustible;const precioActual=Number(item.Precio)||0;const precioAnterior=Number(item.PrecioAnterior)||0;const diferencia=precioActual-precioAnterior;const guerra=item.Guerra_Precio==='Si';const marcadorPrincipal=item.Marcador_Principal==='Si';const cambioClass=diferencia>0?'precio-sube':diferencia<0?'precio-baja':'precio-igual';const cambioIcon=diferencia>0?'â†‘':diferencia<0?'â†“':'=';const cambioSigno=diferencia>0?'+':'';const tipoIcon=item.tipo_atencion==='Asistido'?'ðŸ‘¤':item.tipo_atencion==='Autoservicio'?'â›½':'â“';const fechaActual=formatFechaCompacta(item.Fecha);const fechaAnterior=formatFechaCompacta(item.FechaAnterior);const fechaCarga=formatFechaCompacta(item.FechaCarga);return/*#__PURE__*/_jsxs(\"tr\",{className:\"historico-row \".concat(guerra?'guerra-row':'',\" \").concat(marcadorPrincipal?'principal-row':''),children:[/*#__PURE__*/_jsx(\"td\",{className:\"td-estacion\",title:item.Nom_Eds,children:((_item$Nom_Eds=item.Nom_Eds)===null||_item$Nom_Eds===void 0?void 0:_item$Nom_Eds.slice(0,18))||'S/N'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-marca\",children:item.marca||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-cne\",title:item.cod_cne,children:((_item$cod_cne=item.cod_cne)===null||_item$cod_cne===void 0?void 0:_item$cod_cne.slice(-6))||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-combustible\",children:/*#__PURE__*/_jsx(\"span\",{className:\"combustible-badge combustible-\".concat((_item$Combustible=item.Combustible)===null||_item$Combustible===void 0?void 0:_item$Combustible.toLowerCase()),children:item.Combustible||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-pbl\",children:item.pbl||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-precio\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",precioActual]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"td-anterior\",children:[\"$\",precioAnterior]}),/*#__PURE__*/_jsx(\"td\",{className:\"td-diferencia \".concat(cambioClass),children:/*#__PURE__*/_jsxs(\"strong\",{children:[cambioIcon,\" \",cambioSigno,diferencia]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-tipo\",title:item.tipo_atencion,children:tipoIcon}),/*#__PURE__*/_jsx(\"td\",{className:\"td-horario\",title:item.Horario,children:/*#__PURE__*/_jsx(\"span\",{className:\"horario-texto\",children:item.Horario||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-fecha\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fecha-compacta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fecha-dia\",children:fechaActual.dia}),/*#__PURE__*/_jsx(\"span\",{className:\"fecha-hora\",children:fechaActual.hora})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-fecha\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fecha-compacta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fecha-dia\",children:fechaAnterior.dia}),/*#__PURE__*/_jsx(\"span\",{className:\"fecha-hora\",children:fechaAnterior.hora})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-fecha\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fecha-compacta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fecha-dia\",children:fechaCarga.dia}),/*#__PURE__*/_jsx(\"span\",{className:\"fecha-hora\",children:fechaCarga.hora})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-principal\",children:marcadorPrincipal&&/*#__PURE__*/_jsx(\"span\",{className:\"principal-icon\",title:\"Marcador Principal\",children:\"SI\"})})]},idx);})})]})]});};const AjustesTabla=_ref6=>{let{data,filterNombreAjuste,setFilterNombreAjuste,filterCombustible,setFilterCombustible,combustiblesUnicos,totalItems}=_ref6;const[vistaDetallada,setVistaDetallada]=useState(false);const hayFiltrosActivos=filterNombreAjuste.trim()!==''||filterCombustible.trim()!=='';const limpiarFiltros=()=>{setFilterNombreAjuste('');setFilterCombustible('');};const agrupadosPorEstacion=useMemo(()=>{const grupos={};data.forEach(item=>{const key=item.cod_cne||'sin_cne';if(!grupos[key]){grupos[key]={Nom_Eds:item.Nom_Eds,marca:item.marca,cod_cne:item.cod_cne,pbl:item.pbl,combustibles:[]};}grupos[key].combustibles.push(item);});return Object.values(grupos).map(grupo=>{const subgrupos={};grupo.combustibles.forEach(comb=>{const difComp=comb.Diferencia_Competencia||0;const difPropia=comb.Estrategia_Propia||0;const combinedKey=\"\".concat(difComp,\"_\").concat(difPropia);if(!subgrupos[combinedKey]){subgrupos[combinedKey]={diferencia_competencia:difComp,diferencia_propia:difPropia,combustibles:[]};}subgrupos[combinedKey].combustibles.push(comb);});return _objectSpread(_objectSpread({},grupo),{},{subgrupos:Object.values(subgrupos)});});},[data]);const formatFecha=fechaStr=>{if(!fechaStr||fechaStr==='Mantiene Fecha')return{dia:'Mantiene',hora:''};const[datePart,timePart]=fechaStr.split(' ');return{dia:datePart||'-',hora:(timePart===null||timePart===void 0?void 0:timePart.substring(0,5))||''};};return/*#__PURE__*/_jsxs(\"div\",{className:\"historico-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"historico-filtros\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-filtro-hist\",placeholder:\"Buscar estaci\\xF3n...\",value:filterNombreAjuste,onChange:e=>setFilterNombreAjuste(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{className:\"input-filtro-hist\",value:filterCombustible,onChange:e=>setFilterCombustible(e.target.value),style:{minWidth:'150px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todos los combustibles\"}),combustiblesUnicos.map(comb=>/*#__PURE__*/_jsx(\"option\",{value:comb,children:comb},comb))]}),/*#__PURE__*/_jsxs(\"label\",{className:\"check-filtro-hist\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:vistaDetallada,onChange:e=>setVistaDetallada(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista detallada\"})]}),hayFiltrosActivos&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-limpiar-filtros\",onClick:limpiarFiltros,title:\"Limpiar todos los filtros\",children:\"\\u2715 Limpiar\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'auto',color:'#666',fontSize:'13px',fontWeight:600},children:[\"Mostrando \",vistaDetallada?data.length:agrupadosPorEstacion.length,\" registros\"]})]}),data.length===0&&hayFiltrosActivos?/*#__PURE__*/_jsx(\"div\",{className:\"sin-resultados-filtro\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sin-resultados-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sin-resultados-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"sin-resultados-texto\",children:[\"No se encontraron ajustes para la b\\xFAsqueda\",filterNombreAjuste&&/*#__PURE__*/_jsxs(\"strong\",{children:[\" \\\"\",filterNombreAjuste,\"\\\"\"]}),filterCombustible&&/*#__PURE__*/_jsxs(\"span\",{children:[\" (\",filterCombustible,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-limpiar-filtros-destacado\",onClick:limpiarFiltros,children:\"Limpiar filtros y ver todos\"})]})}):data.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"alert-empty\",children:\"\\uD83D\\uDCCB No hay datos de ajustes disponibles\"}):vistaDetallada?/*#__PURE__*/_jsxs(\"table\",{className:\"historico-table-compact\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Estaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marca\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CNE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Combustible\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PBL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio Asistido\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio Autoservicio\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dif. Competencia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estrategia Propia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cambio Precio\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha Autoservicio\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((item,idx)=>{var _item$combustible;const difComp=item.Diferencia_Competencia||0;const difPropia=item.Estrategia_Propia||0;const fechaAuto=formatFecha(item.fecha_autoservicio);const precioAsistido=item.precio_asistido||0;const precioAutoservicio=item.precio_autoservicio||0;const cambioPrecio=item.cambio_precio||'Mantiene Diferencia';return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"td-estacion\",title:item.Nom_Eds,children:item.Nom_Eds||'S/N'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-marca\",children:item.marca||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-cne\",title:item.cod_cne,children:item.cod_cne||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-combustible\",children:/*#__PURE__*/_jsx(\"span\",{className:\"combustible-badge combustible-\".concat((_item$combustible=item.combustible)===null||_item$combustible===void 0?void 0:_item$combustible.toLowerCase()),children:item.combustible||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-pbl\",children:item.pbl||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-precio\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",precioAsistido]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-precio\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",precioAutoservicio]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-diferencia \".concat(difComp>0?'precio-sube':difComp<0?'precio-baja':'precio-igual'),children:/*#__PURE__*/_jsxs(\"strong\",{children:[difComp>0?'â†‘ +':difComp<0?'â†“ ':'',difComp]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-diferencia \".concat(difPropia>0?'precio-sube':difPropia<0?'precio-baja':'precio-igual'),children:/*#__PURE__*/_jsxs(\"strong\",{children:[difPropia>0?'â†‘ +':difPropia<0?'â†“ ':'',difPropia]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-cambio-precio\",style:{fontSize:'11px'},children:cambioPrecio}),/*#__PURE__*/_jsx(\"td\",{className:\"td-fecha\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fecha-compacta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fecha-dia\",children:fechaAuto.dia}),fechaAuto.hora&&/*#__PURE__*/_jsx(\"span\",{className:\"fecha-hora\",children:fechaAuto.hora})]})})]},idx);})})]}):/*#__PURE__*/_jsxs(\"table\",{className:\"historico-table-compact ajustes-simplified\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Estaci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marca\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CNE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PBL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Combustibles\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dif. Competencia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dif. Estrategia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha Vigencia\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:agrupadosPorEstacion.map((grupo,idx)=>{return grupo.subgrupos.map((subgrupo,subIdx)=>{var _subgrupo$combustible,_grupo$Nom_Eds,_grupo$cod_cne;const fechaVig=formatFecha((_subgrupo$combustible=subgrupo.combustibles[0])===null||_subgrupo$combustible===void 0?void 0:_subgrupo$combustible.FechaVigenciaSugerida);const difComp=subgrupo.diferencia_competencia;const difPropia=subgrupo.diferencia_propia;return/*#__PURE__*/_jsxs(\"tr\",{children:[subIdx===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{className:\"td-estacion\",rowSpan:grupo.subgrupos.length,title:grupo.Nom_Eds,children:((_grupo$Nom_Eds=grupo.Nom_Eds)===null||_grupo$Nom_Eds===void 0?void 0:_grupo$Nom_Eds.slice(0,18))||'S/N'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-marca\",rowSpan:grupo.subgrupos.length,children:grupo.marca||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-cne\",rowSpan:grupo.subgrupos.length,title:grupo.cod_cne,children:((_grupo$cod_cne=grupo.cod_cne)===null||_grupo$cod_cne===void 0?void 0:_grupo$cod_cne.slice(-6))||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"td-pbl\",rowSpan:grupo.subgrupos.length,children:grupo.pbl||'-'})]}),/*#__PURE__*/_jsx(\"td\",{className:\"td-combustibles\",children:subgrupo.combustibles.map((c,i)=>{var _c$combustible;return/*#__PURE__*/_jsx(\"span\",{className:\"combustible-badge combustible-\".concat((_c$combustible=c.combustible)===null||_c$combustible===void 0?void 0:_c$combustible.toLowerCase()),style:{marginRight:'4px'},children:c.combustible},i);})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-diferencia \".concat(difComp>0?'precio-sube':difComp<0?'precio-baja':'precio-igual'),children:/*#__PURE__*/_jsxs(\"strong\",{children:[difComp>0?'â†‘':difComp<0?'â†“':'=',\" \",difComp>0?'+':'',difComp]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-diferencia \".concat(difPropia>0?'precio-sube':difPropia<0?'precio-baja':'precio-igual'),children:/*#__PURE__*/_jsxs(\"strong\",{children:[difPropia>0?'â†‘':difPropia<0?'â†“':'=',\" \",difPropia>0?'+':'',difPropia]})}),/*#__PURE__*/_jsx(\"td\",{className:\"td-fecha\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fecha-compacta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fecha-dia\",children:fechaVig.dia}),fechaVig.hora&&/*#__PURE__*/_jsx(\"span\",{className:\"fecha-hora\",children:fechaVig.hora})]})})]},\"\".concat(idx,\"-\").concat(subIdx));});})})]})]});};export default AlertPanel;","map":{"version":3,"names":["React","useState","useEffect","useMemo","getMercadoAlerta","getHistoricoAlerta","getDataBaseguerra","getDataBaseajuste","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","groupAlertsByStation","alerts","grouped","forEach","alert","key","Nom_Eds","push","getStationCount","estaciones","a","Object","keys","length","parseFecha","fechaStr","Date","parts","trim","split","datePart","timePart","dateParts","day","month","year","map","Number","hours","minutes","isNaN","ITEMS_PER_PAGE","AlertPanel","_ref","isVisible","onClose","alertasExternas","activeTab","setActiveTab","alertas","setAlertas","historico","setHistorico","guerraData","setGuerraData","ajustesData","setAjustesData","loading","setLoading","page","setPage","modalExpanded","setModalExpanded","filterNombreEstacion","setFilterNombreEstacion","filterSoloGuerra","setFilterSoloGuerra","filterNombreAjuste","setFilterNombreAjuste","filterCombustible","setFilterCombustible","loadData","alertasData","historicoData","guerraDataResult","ajustesDataResult","Promise","all","Array","isArray","guerraArr","data","ajustesArr","_unused","agrupadas","cantidadEstaciones","estacionesGuerra","filter","item","Activa","sort","b","Guerra_Precio","localeCompare","historicoFiltrado","filtered","searchTerm","toLowerCase","includes","estacionesEnGuerra","Set","g","has","historicoSorted","Fecha","ajustesFiltrado","combustible","ajustesSorted","totalPages","Math","max","ceil","totalPagesAjustes","historicoPageSlice","slice","ajustesPageSlice","handlePrevPage","p","handleNextPage","min","combustiblesUnicos","Boolean","children","className","concat","onClick","AlertasActivas","GuerraPreciosPanel","HistoricoAlertas","totalItems","onExpand","style","marginTop","textAlign","padding","background","disabled","margin","AjustesTabla","e","stopPropagation","_ref2","entries","_ref3","station","anyWar","some","stationAlert","marca","cod_cne","i","dif","Precio","PrecioAnterior","Combustible","Horario","tipo_atencion","color","fontSize","FechaAnterior","marginLeft","_ref4","idx","PBL","ID_Cne","Tipo_EDS","region","_ref5","hayFiltrosActivos","limpiarFiltros","formatFechaCompacta","dia","hora","fecha","substring","id","type","placeholder","value","onChange","target","checked","title","fontWeight","_item$Nom_Eds","_item$cod_cne","_item$Combustible","precioActual","precioAnterior","diferencia","guerra","marcadorPrincipal","Marcador_Principal","cambioClass","cambioIcon","cambioSigno","tipoIcon","fechaActual","fechaAnterior","fechaCarga","FechaCarga","pbl","_ref6","vistaDetallada","setVistaDetallada","agrupadosPorEstacion","grupos","combustibles","values","grupo","subgrupos","comb","difComp","Diferencia_Competencia","difPropia","Estrategia_Propia","combinedKey","diferencia_competencia","diferencia_propia","_objectSpread","formatFecha","minWidth","_item$combustible","fechaAuto","fecha_autoservicio","precioAsistido","precio_asistido","precioAutoservicio","precio_autoservicio","cambioPrecio","cambio_precio","subgrupo","subIdx","_subgrupo$combustible","_grupo$Nom_Eds","_grupo$cod_cne","fechaVig","FechaVigenciaSugerida","rowSpan","c","_c$combustible","marginRight"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/AlertPanel.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { getMercadoAlerta, getHistoricoAlerta, getDataBaseguerra, getDataBaseajuste } from '../services/apiService';\r\nimport '../styles/AlertPanel.css';\r\n\r\n// Agrupar alertas por estaciÃ³n\r\nfunction groupAlertsByStation(alerts) {\r\n  const grouped = {};\r\n  alerts.forEach(alert => {\r\n    const key = alert.Nom_Eds || 'Sin nombre';\r\n    if (!grouped[key]) grouped[key] = [];\r\n    grouped[key].push(alert);\r\n  });\r\n  return grouped;\r\n}\r\n\r\n// CONTADOR CORRECTO DE ESTACIONES ÃšNICAS\r\nfunction getStationCount(alerts) {\r\n  const estaciones = {};\r\n  alerts.forEach(a => estaciones[a.Nom_Eds || 'Sin nombre'] = true);\r\n  return Object.keys(estaciones).length;\r\n}\r\n\r\n// FunciÃ³n para parsear fechas en formato \"DD-MM-YYYY HH:mm\"\r\nfunction parseFecha(fechaStr) {\r\n  if (!fechaStr || typeof fechaStr !== 'string') {\r\n    return new Date();\r\n  }\r\n  const parts = fechaStr.trim().split(' ');\r\n  const datePart = parts[0];\r\n  const timePart = parts[1];\r\n  \r\n  if (!datePart) return new Date();\r\n  \r\n  const dateParts = datePart.split('-');\r\n  if (dateParts.length !== 3) return new Date();\r\n  \r\n  const [day, month, year] = dateParts.map(Number);\r\n  const [hours, minutes] = timePart ? timePart.split(':').map(Number) : [0, 0];\r\n  \r\n  if (isNaN(day) || isNaN(month) || isNaN(year)) return new Date();\r\n  \r\n  return new Date(year, month - 1, day, hours || 0, minutes || 0);\r\n}\r\n\r\nconst ITEMS_PER_PAGE = 50;\r\n\r\nconst AlertPanel = ({ isVisible, onClose, alertasExternas }) => {\r\n  const [activeTab, setActiveTab] = useState('alertas');\r\n  const [alertas, setAlertas] = useState([]);\r\n  const [historico, setHistorico] = useState([]);\r\n  const [guerraData, setGuerraData] = useState([]);\r\n  const [ajustesData, setAjustesData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [modalExpanded, setModalExpanded] = useState(false); // â† NUEVO\r\n\r\n  // Estados para filtros histÃ³rico\r\n  const [filterNombreEstacion, setFilterNombreEstacion] = useState('');\r\n  const [filterSoloGuerra, setFilterSoloGuerra] = useState(false);\r\n\r\n  // Estados para filtros ajustes\r\n  const [filterNombreAjuste, setFilterNombreAjuste] = useState('');\r\n  const [filterCombustible, setFilterCombustible] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (alertasExternas) {\r\n      setAlertas(alertasExternas);\r\n      setLoading(false);\r\n    } else if (isVisible) {\r\n      loadData();\r\n    }\r\n  }, [isVisible, alertasExternas]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const [alertasData, historicoData, guerraDataResult, ajustesDataResult] = await Promise.all([\r\n        getMercadoAlerta(),\r\n        getHistoricoAlerta(),\r\n        getDataBaseguerra(),\r\n        getDataBaseajuste()\r\n      ]);\r\n      \r\n      setAlertas(Array.isArray(alertasData) ? alertasData : []);\r\n      setHistorico(Array.isArray(historicoData) ? historicoData : []);\r\n    \r\n      const guerraArr =\r\n        Array.isArray(guerraDataResult) ? guerraDataResult :\r\n        Array.isArray(guerraDataResult?.data) ? guerraDataResult.data : [];\r\n      setGuerraData(guerraArr);\r\n\r\n      const ajustesArr =\r\n        Array.isArray(ajustesDataResult) ? ajustesDataResult :\r\n        Array.isArray(ajustesDataResult?.data) ? ajustesDataResult.data : [];\r\n      setAjustesData(ajustesArr);\r\n\r\n    } catch {\r\n      setAlertas([]);\r\n      setHistorico([]);\r\n      setGuerraData([]);\r\n      setAjustesData([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const agrupadas = useMemo(() => groupAlertsByStation(alertas), [alertas]);\r\n  const cantidadEstaciones = useMemo(() => getStationCount(alertas), [alertas]);\r\n\r\n  const estacionesGuerra = useMemo(() => {\r\n    if (!Array.isArray(guerraData)) return [];\r\n    \r\n    return guerraData\r\n      .filter(item => item.Activa === 'Si')\r\n      .sort((a, b) => {\r\n        if (a.Guerra_Precio === 'Si' && b.Guerra_Precio !== 'Si') return -1;\r\n        if (a.Guerra_Precio !== 'Si' && b.Guerra_Precio === 'Si') return 1;\r\n        return (a.Nom_Eds || '').localeCompare(b.Nom_Eds || '');\r\n      });\r\n  }, [guerraData]);\r\n\r\n  // Filtrado del histÃ³rico\r\n  const historicoFiltrado = useMemo(() => {\r\n    let filtered = [...historico];\r\n\r\n    if (filterNombreEstacion.trim() !== '') {\r\n      const searchTerm = filterNombreEstacion.toLowerCase();\r\n      filtered = filtered.filter(item => \r\n        (item.Nom_Eds || '').toLowerCase().includes(searchTerm)\r\n      );\r\n    }\r\n\r\n    if (filterSoloGuerra) {\r\n      const estacionesEnGuerra = new Set(\r\n        guerraData\r\n          .filter(g => g.Guerra_Precio === 'Si')\r\n          .map(g => g.Nom_Eds)\r\n      );\r\n      filtered = filtered.filter(item => estacionesEnGuerra.has(item.Nom_Eds));\r\n    }\r\n\r\n    return filtered;\r\n  }, [historico, filterNombreEstacion, filterSoloGuerra, guerraData]);\r\n\r\n  const historicoSorted = useMemo(() => {\r\n    return [...historicoFiltrado].sort((a, b) => parseFecha(b.Fecha) - parseFecha(a.Fecha));\r\n  }, [historicoFiltrado]);\r\n\r\n  // Filtrado de ajustes\r\n  const ajustesFiltrado = useMemo(() => {\r\n    let filtered = [...ajustesData];\r\n\r\n    if (filterNombreAjuste.trim() !== '') {\r\n      const searchTerm = filterNombreAjuste.toLowerCase();\r\n      filtered = filtered.filter(item => \r\n        (item.Nom_Eds || '').toLowerCase().includes(searchTerm)\r\n      );\r\n    }\r\n\r\n    if (filterCombustible.trim() !== '') {\r\n      filtered = filtered.filter(item => \r\n        item.combustible === filterCombustible\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [ajustesData, filterNombreAjuste, filterCombustible]);\r\n\r\n  const ajustesSorted = useMemo(() => {\r\n    return [...ajustesFiltrado];\r\n  }, [ajustesFiltrado]);\r\n\r\n  const totalPages = Math.max(1, Math.ceil(historicoSorted.length / ITEMS_PER_PAGE));\r\n  const totalPagesAjustes = Math.max(1, Math.ceil(ajustesSorted.length / ITEMS_PER_PAGE));\r\n  \r\n  const historicoPageSlice = historicoSorted.slice((page - 1) * ITEMS_PER_PAGE, page * ITEMS_PER_PAGE);\r\n  const ajustesPageSlice = ajustesSorted.slice((page - 1) * ITEMS_PER_PAGE, page * ITEMS_PER_PAGE);\r\n\r\n  const handlePrevPage = () => setPage(p => Math.max(p - 1, 1));\r\n  const handleNextPage = () => setPage(p => Math.min(p + 1, activeTab === 'ajustes' ? totalPagesAjustes : totalPages));\r\n\r\n  // Reset pÃ¡gina al cambiar filtros o tab\r\n  useEffect(() => {\r\n    setPage(1);\r\n  }, [filterNombreEstacion, filterSoloGuerra, filterNombreAjuste, filterCombustible, activeTab]);\r\n\r\n  const combustiblesUnicos = useMemo(() => {\r\n    return [...new Set(ajustesData.map(a => a.combustible))].filter(Boolean);\r\n  }, [ajustesData]);\r\n\r\n  return (\r\n    <>\r\n      <aside className={`alert-panel${!isVisible ? ' hidden' : ''}`}>\r\n        <div className=\"alert-panel-header\">\r\n          <h3 className=\"alert-panel-title\">ðŸ“Š Alertas de Mercado</h3>\r\n          <button className=\"alert-panel-close\" onClick={onClose}>âœ•</button>\r\n        </div>\r\n        <div className=\"alert-tabs\">\r\n          <button\r\n            className={`alert-tab ${activeTab === 'alertas' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('alertas')}\r\n          >\r\n            Alertas Activas ({cantidadEstaciones})\r\n          </button>\r\n          \r\n          <button\r\n            className={`alert-tab ${activeTab === 'historico' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('historico')}\r\n          >\r\n            HistÃ³rico Movimiento ({historicoSorted.length})\r\n          </button>\r\n          <button\r\n            className={`alert-tab ${activeTab === 'ajustes' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('ajustes')}\r\n          >\r\n            Ajustes PES ({ajustesSorted.length})\r\n          </button>\r\n          <button\r\n            className={`alert-tab ${activeTab === 'guerra' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('guerra')}\r\n          >\r\n            En Seguimiento ({estacionesGuerra.length})\r\n          </button>\r\n        </div>\r\n        <div className=\"alert-panel-content\">\r\n          {loading ? (\r\n            <div className=\"alert-loading\">Cargando...</div>\r\n          ) : activeTab === 'alertas' ? (\r\n            <AlertasActivas agrupadas={agrupadas} />\r\n          ) : activeTab === 'guerra' ? (\r\n            <GuerraPreciosPanel data={estacionesGuerra} />\r\n          ) : activeTab === 'historico' ? (\r\n            <>\r\n              <HistoricoAlertas \r\n                data={historicoPageSlice}\r\n                filterNombreEstacion={filterNombreEstacion}\r\n                setFilterNombreEstacion={setFilterNombreEstacion}\r\n                filterSoloGuerra={filterSoloGuerra}\r\n                setFilterSoloGuerra={setFilterSoloGuerra}\r\n                totalItems={historicoSorted.length}\r\n                onExpand={() => setModalExpanded(true)}\r\n              />\r\n              <div style={{ marginTop: 10, textAlign: 'center', padding: '10px', background: 'white' }}>\r\n                <button onClick={handlePrevPage} disabled={page === 1}>Prev</button>\r\n                <span style={{ margin: '0 10px' }}>PÃ¡gina {page} de {totalPages}</span>\r\n                <button onClick={handleNextPage} disabled={page === totalPages}>Siguiente</button>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <AjustesTabla\r\n                data={ajustesPageSlice}\r\n                filterNombreAjuste={filterNombreAjuste}\r\n                setFilterNombreAjuste={setFilterNombreAjuste}\r\n                filterCombustible={filterCombustible}\r\n                setFilterCombustible={setFilterCombustible}\r\n                combustiblesUnicos={combustiblesUnicos}\r\n                totalItems={ajustesSorted.length}\r\n              />\r\n              <div style={{ marginTop: 10, textAlign: 'center', padding: '10px', background: 'white' }}>\r\n                <button onClick={handlePrevPage} disabled={page === 1}>Prev</button>\r\n                <span style={{ margin: '0 10px' }}>PÃ¡gina {page} de {totalPagesAjustes}</span>\r\n                <button onClick={handleNextPage} disabled={page === totalPagesAjustes}>Siguiente</button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </aside>\r\n\r\n      {/* MODAL EXPANDIDO */}\r\n      {modalExpanded && (\r\n        <div className=\"modal-expandido-overlay\" onClick={() => setModalExpanded(false)}>\r\n          <div className=\"modal-expandido-contenido\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-expandido-header\">\r\n              <h2>ðŸ“Š HistÃ³rico de Movimiento - Vista Completa</h2>\r\n              <button \r\n                className=\"modal-close-btn\"\r\n                onClick={() => setModalExpanded(false)}\r\n              >\r\n                âœ•\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"modal-expandido-body\">\r\n              <HistoricoAlertas \r\n                data={historicoPageSlice}\r\n                filterNombreEstacion={filterNombreEstacion}\r\n                setFilterNombreEstacion={setFilterNombreEstacion}\r\n                filterSoloGuerra={filterSoloGuerra}\r\n                setFilterSoloGuerra={setFilterSoloGuerra}\r\n                totalItems={historicoSorted.length}\r\n                onExpand={() => {}}\r\n              />\r\n              \r\n              <div style={{ marginTop: 10, textAlign: 'center', padding: '10px', background: 'white' }}>\r\n                <button onClick={handlePrevPage} disabled={page === 1}>Prev</button>\r\n                <span style={{ margin: '0 10px' }}>PÃ¡gina {page} de {totalPages}</span>\r\n                <button onClick={handleNextPage} disabled={page === totalPages}>Siguiente</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst AlertasActivas = ({ agrupadas }) => {\r\n  const estaciones = Object.entries(agrupadas);\r\n  if (estaciones.length === 0) return <div className=\"alert-empty\">No hay alertas activas</div>;\r\n\r\n  return (\r\n    <div className=\"alerts-list\">\r\n      {estaciones.map(([station, alerts]) => {\r\n        const anyWar = alerts.some(a => a.Guerra_Precio === 'Si');\r\n        const stationAlert = alerts[0];\r\n        return (\r\n          <div key={station} className={`alert-card${anyWar ? ' guerra' : ''}`}>\r\n            <div className=\"alert-card-header\">\r\n              <span className=\"alert-icon\">{anyWar ? 'âš¡' : 'ðŸ”´'}</span>\r\n              <div className=\"alert-card-info\">\r\n                <strong>{station}</strong>\r\n                <span className=\"alert-marca\">{stationAlert.marca} - {stationAlert.cod_cne}</span>\r\n              </div>\r\n            </div>\r\n            <table className=\"alert-combs-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Comb.</th>\r\n                  <th>Actual</th>\r\n                  <th>Anterior</th>\r\n                  <th>Dif.</th>\r\n                  <th>Hora</th>\r\n                  <th>Tipo</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {alerts.map((a, i) => {\r\n                  const dif = (a.Precio || 0) - (a.PrecioAnterior || 0);\r\n                  return (\r\n                    <tr key={i}>\r\n                      <td>{a.Combustible}</td>\r\n                      <td>${a.Precio}</td>\r\n                      <td>${a.PrecioAnterior}</td>\r\n                      <td className={dif < 0 ? 'negative' : 'positive'}>\r\n                        {dif > 0 && \"+\"}{dif}\r\n                      </td>\r\n                      <td>{a.Horario}</td>\r\n                      <td>{a.tipo_atencion}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n            <div style={{ marginTop: '8px', color: '#999', fontSize: '12px' }}>\r\n              {alerts.map(a =>\r\n                <div key={a.Combustible}>\r\n                  <span>Actual: {a.Fecha}, Anterior: {a.FechaAnterior}</span>\r\n                  {a.Guerra_Precio === \"Si\" && <span style={{ marginLeft: 8, color: \"#e67e22\" }}>âš¡ GUERRA DE PRECIO</span>}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst GuerraPreciosPanel = ({ data }) => {\r\n  if (!Array.isArray(data) || data.length === 0) {\r\n    return <div className=\"alert-empty\">No hay estaciones disponibles</div>;\r\n  }\r\n  return (\r\n    <div className=\"guerra-list-simple\">\r\n      {data.map((item, idx) => (\r\n        <div className={`guerra-simple-card${item.Guerra_Precio === 'Si' ? ' gcard-guerra' : ''}`} key={idx}>\r\n          <div className=\"gsc-header\">\r\n            <span className={`gsc-icon${item.Guerra_Precio === 'Si' ? ' guerra' : ''}`}>âš¡</span>\r\n            <span className=\"gsc-eds\">{item.Nom_Eds}</span>\r\n            <span className=\"gsc-pbl\">\r\n              <span className=\"gsc-pbl-label\">PBL</span>\r\n              <span className=\"gsc-pbl-value\">{item.PBL}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"gsc-row\">\r\n            <span className=\"gsc-label\">CNE:</span>\r\n            <span className=\"gsc-value\">{item.ID_Cne}</span>\r\n            <span className=\"gsc-label\">Tipo:</span>\r\n            <span className=\"gsc-value\">{item.Tipo_EDS}</span>\r\n            <span className={`gsc-label estado ${item.Activa === 'Si' ? 'activo' : 'inactivo'}`}>\r\n              {item.Activa === 'Si' ? 'Activa' : 'Inactiva'}\r\n            </span>\r\n          </div>\r\n          <div className=\"gsc-row\">\r\n            <span className=\"gsc-label\">RegiÃ³n:</span>\r\n            <span className=\"gsc-value\">{item.region}</span>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst HistoricoAlertas = ({ \r\n  data, \r\n  filterNombreEstacion, \r\n  setFilterNombreEstacion, \r\n  filterSoloGuerra, \r\n  setFilterSoloGuerra,\r\n  totalItems,\r\n  onExpand\r\n}) => {\r\n  if (!Array.isArray(data)) return <div className=\"alert-empty\">âš ï¸ Error: Los datos no son un array</div>;\r\n  \r\n  const hayFiltrosActivos = filterNombreEstacion.trim() !== '' || filterSoloGuerra;\r\n  \r\n  const limpiarFiltros = () => {\r\n    setFilterNombreEstacion('');\r\n    setFilterSoloGuerra(false);\r\n  };\r\n\r\n  const formatFechaCompacta = (fechaStr) => {\r\n    if (!fechaStr) return { dia: '-', hora: '' };\r\n    const [fecha, hora] = fechaStr.split(' ');\r\n    return {\r\n      dia: fecha || '-',\r\n      hora: hora?.substring(0, 5) || ''\r\n    };\r\n  };\r\n\r\n    return (\r\n    <div className=\"historico-wrapper\">\r\n      <div className=\"historico-filtros\">\r\n        <input\r\n          id=\"filter-nombre\"\r\n          type=\"text\"\r\n          className=\"input-filtro-hist\"\r\n          placeholder=\"Buscar estaciÃ³n...\"\r\n          value={filterNombreEstacion}\r\n          onChange={(e) => setFilterNombreEstacion(e.target.value)}\r\n        />\r\n        <label className=\"check-filtro-hist\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={filterSoloGuerra}\r\n            onChange={(e) => setFilterSoloGuerra(e.target.checked)}\r\n          />\r\n          <span>Solo estaciones en guerra</span>\r\n        </label>\r\n        \r\n        {hayFiltrosActivos && (\r\n          <button \r\n            className=\"btn-limpiar-filtros\"\r\n            onClick={limpiarFiltros}\r\n            title=\"Limpiar todos los filtros\"\r\n          >\r\n            âœ• Limpiar\r\n          </button>\r\n        )}\r\n        \r\n        {/* BOTÃ“N EXPANDIR */}\r\n        {onExpand && (\r\n          <button \r\n            className=\"btn-expandir-vista\"\r\n            onClick={onExpand}\r\n            title=\"Expandir vista\"\r\n          >\r\n            â›¶ Expandir\r\n          </button>\r\n        )}\r\n        \r\n        <span style={{ marginLeft: 'auto', color: '#666', fontSize: '13px', fontWeight: 600 }}>\r\n          Mostrando {data.length} de {totalItems}\r\n        </span>\r\n      </div>\r\n\r\n      {data.length === 0 && hayFiltrosActivos ? (\r\n        <div className=\"sin-resultados-filtro\">\r\n          <div className=\"sin-resultados-content\">\r\n            <span className=\"sin-resultados-icon\">ðŸ”</span>\r\n            <p className=\"sin-resultados-texto\">\r\n              No se encontraron resultados para la bÃºsqueda\r\n              {filterNombreEstacion && <strong> \"{filterNombreEstacion}\"</strong>}\r\n              {filterSoloGuerra && <span> (solo guerra)</span>}\r\n            </p>\r\n            <button \r\n              className=\"btn-limpiar-filtros-destacado\"\r\n              onClick={limpiarFiltros}\r\n            >\r\n              Limpiar filtros y ver todos\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : data.length === 0 ? (\r\n        <div className=\"alert-empty\">ðŸ“‹ No hay histÃ³rico disponible</div>\r\n      ) : (\r\n        <table className=\"historico-table-compact\">\r\n          <thead>\r\n            <tr>\r\n              <th title=\"EstaciÃ³n\">EstaciÃ³n</th>\r\n              <th title=\"Marca\">Marca</th>\r\n              <th title=\"CÃ³digo CNE\">CNE</th>\r\n              <th title=\"Combustible\">Comb</th>\r\n              <th title=\"PBL\">PBL</th>\r\n              <th title=\"Precio Actual\">P Actual</th>\r\n              <th title=\"Precio Anterior\">P Anterior</th>\r\n              <th title=\"Diferencia\">Ajuste</th>\r\n              <th title=\"Tipo de AtenciÃ³n\">Tipo</th>\r\n              <th title=\"Horario\">Horario</th>\r\n              <th title=\"Fecha Cambio Actual\">Fecha Actual</th>\r\n              <th title=\"Fecha Cambio Anterior\">Fecha Anterior</th>\r\n              <th title=\"Fecha de Carga\">Fecha Carga</th>\r\n              <th title=\"Marcador Principal\">Marcador</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {data.map((item, idx) => {\r\n              const precioActual = Number(item.Precio) || 0;\r\n              const precioAnterior = Number(item.PrecioAnterior) || 0;\r\n              const diferencia = precioActual - precioAnterior;\r\n              const guerra = item.Guerra_Precio === 'Si';\r\n              const marcadorPrincipal = item.Marcador_Principal === 'Si';\r\n              \r\n              const cambioClass = diferencia > 0 ? 'precio-sube' : diferencia < 0 ? 'precio-baja' : 'precio-igual';\r\n              const cambioIcon = diferencia > 0 ? 'â†‘' : diferencia < 0 ? 'â†“' : '=';\r\n              const cambioSigno = diferencia > 0 ? '+' : '';\r\n              \r\n              const tipoIcon = item.tipo_atencion === 'Asistido' ? 'ðŸ‘¤' : item.tipo_atencion === 'Autoservicio' ? 'â›½' : 'â“';\r\n              \r\n              const fechaActual = formatFechaCompacta(item.Fecha);\r\n              const fechaAnterior = formatFechaCompacta(item.FechaAnterior);\r\n              const fechaCarga = formatFechaCompacta(item.FechaCarga);\r\n              \r\n              return (\r\n                <tr \r\n                  key={idx} \r\n                  className={`historico-row ${guerra ? 'guerra-row' : ''} ${marcadorPrincipal ? 'principal-row' : ''}`}\r\n                >\r\n                  <td className=\"td-estacion\" title={item.Nom_Eds}>\r\n                    {item.Nom_Eds?.slice(0, 18) || 'S/N'}\r\n                  </td>\r\n                  <td className=\"td-marca\">{item.marca || '-'}</td>\r\n                  <td className=\"td-cne\" title={item.cod_cne}>{item.cod_cne?.slice(-6) || '-'}</td>\r\n                  <td className=\"td-combustible\">\r\n                    <span className={`combustible-badge combustible-${item.Combustible?.toLowerCase()}`}>\r\n                      {item.Combustible || '-'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"td-pbl\">{item.pbl || '-'}</td>\r\n                  <td className=\"td-precio\"><strong>${precioActual}</strong></td>\r\n                  <td className=\"td-anterior\">${precioAnterior}</td>\r\n                  <td className={`td-diferencia ${cambioClass}`}>\r\n                    <strong>{cambioIcon} {cambioSigno}{diferencia}</strong>\r\n                  </td>\r\n                  <td className=\"td-tipo\" title={item.tipo_atencion}>{tipoIcon}</td>\r\n                  <td className=\"td-horario\" title={item.Horario}>\r\n                    <span className=\"horario-texto\">{item.Horario || '-'}</span>\r\n                  </td>\r\n                  <td className=\"td-fecha\">\r\n                    <div className=\"fecha-compacta\">\r\n                      <span className=\"fecha-dia\">{fechaActual.dia}</span>\r\n                      <span className=\"fecha-hora\">{fechaActual.hora}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"td-fecha\">\r\n                    <div className=\"fecha-compacta\">\r\n                      <span className=\"fecha-dia\">{fechaAnterior.dia}</span>\r\n                      <span className=\"fecha-hora\">{fechaAnterior.hora}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"td-fecha\">\r\n                    <div className=\"fecha-compacta\">\r\n                      <span className=\"fecha-dia\">{fechaCarga.dia}</span>\r\n                      <span className=\"fecha-hora\">{fechaCarga.hora}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"td-principal\">\r\n                    {marcadorPrincipal && <span className=\"principal-icon\" title=\"Marcador Principal\">SI</span>}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AjustesTabla = ({ \r\n  data, \r\n  filterNombreAjuste,\r\n  setFilterNombreAjuste,\r\n  filterCombustible,\r\n  setFilterCombustible,\r\n  combustiblesUnicos,\r\n  totalItems\r\n}) => {\r\n  const [vistaDetallada, setVistaDetallada] = useState(false);\r\n\r\n  const hayFiltrosActivos = filterNombreAjuste.trim() !== '' || filterCombustible.trim() !== '';\r\n  \r\n  const limpiarFiltros = () => {\r\n    setFilterNombreAjuste('');\r\n    setFilterCombustible('');\r\n  };\r\n\r\n  const agrupadosPorEstacion = useMemo(() => {\r\n    const grupos = {};\r\n    data.forEach(item => {\r\n      const key = item.cod_cne || 'sin_cne';\r\n      if (!grupos[key]) {\r\n        grupos[key] = {\r\n          Nom_Eds: item.Nom_Eds,\r\n          marca: item.marca,\r\n          cod_cne: item.cod_cne,\r\n          pbl: item.pbl,\r\n          combustibles: []\r\n        };\r\n      }\r\n      grupos[key].combustibles.push(item);\r\n    });\r\n    \r\n    return Object.values(grupos).map(grupo => {\r\n      const subgrupos = {};\r\n      grupo.combustibles.forEach(comb => {\r\n        const difComp = comb.Diferencia_Competencia || 0;\r\n        const difPropia = comb.Estrategia_Propia || 0;\r\n        const combinedKey = `${difComp}_${difPropia}`;\r\n        \r\n        if (!subgrupos[combinedKey]) {\r\n          subgrupos[combinedKey] = {\r\n            diferencia_competencia: difComp,\r\n            diferencia_propia: difPropia,\r\n            combustibles: []\r\n          };\r\n        }\r\n        subgrupos[combinedKey].combustibles.push(comb);\r\n      });\r\n      \r\n      return {\r\n        ...grupo,\r\n        subgrupos: Object.values(subgrupos)\r\n      };\r\n    });\r\n  }, [data]);\r\n\r\n  const formatFecha = (fechaStr) => {\r\n    if (!fechaStr || fechaStr === 'Mantiene Fecha') return { dia: 'Mantiene', hora: '' };\r\n    const [datePart, timePart] = fechaStr.split(' ');\r\n    return {\r\n      dia: datePart || '-',\r\n      hora: timePart?.substring(0, 5) || ''\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"historico-wrapper\">\r\n      <div className=\"historico-filtros\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"input-filtro-hist\"\r\n          placeholder=\"Buscar estaciÃ³n...\"\r\n          value={filterNombreAjuste}\r\n          onChange={(e) => setFilterNombreAjuste(e.target.value)}\r\n        />\r\n        <select\r\n          className=\"input-filtro-hist\"\r\n          value={filterCombustible}\r\n          onChange={(e) => setFilterCombustible(e.target.value)}\r\n          style={{ minWidth: '150px' }}\r\n        >\r\n          <option value=\"\">Todos los combustibles</option>\r\n          {combustiblesUnicos.map(comb => (\r\n            <option key={comb} value={comb}>{comb}</option>\r\n          ))}\r\n        </select>\r\n        \r\n        <label className=\"check-filtro-hist\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={vistaDetallada}\r\n            onChange={(e) => setVistaDetallada(e.target.checked)}\r\n          />\r\n          <span>Vista detallada</span>\r\n        </label>\r\n\r\n        {hayFiltrosActivos && (\r\n          <button \r\n            className=\"btn-limpiar-filtros\"\r\n            onClick={limpiarFiltros}\r\n            title=\"Limpiar todos los filtros\"\r\n          >\r\n            âœ• Limpiar\r\n          </button>\r\n        )}\r\n\r\n        <span style={{ marginLeft: 'auto', color: '#666', fontSize: '13px', fontWeight: 600 }}>\r\n          Mostrando {vistaDetallada ? data.length : agrupadosPorEstacion.length} registros\r\n        </span>\r\n      </div>\r\n\r\n      {data.length === 0 && hayFiltrosActivos ? (\r\n        <div className=\"sin-resultados-filtro\">\r\n          <div className=\"sin-resultados-content\">\r\n            <span className=\"sin-resultados-icon\">ðŸ”</span>\r\n            <p className=\"sin-resultados-texto\">\r\n              No se encontraron ajustes para la bÃºsqueda\r\n              {filterNombreAjuste && <strong> \"{filterNombreAjuste}\"</strong>}\r\n              {filterCombustible && <span> ({filterCombustible})</span>}\r\n            </p>\r\n            <button \r\n              className=\"btn-limpiar-filtros-destacado\"\r\n              onClick={limpiarFiltros}\r\n            >\r\n              Limpiar filtros y ver todos\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : data.length === 0 ? (\r\n        <div className=\"alert-empty\">ðŸ“‹ No hay datos de ajustes disponibles</div>\r\n      ) : vistaDetallada ? (\r\n        <table className=\"historico-table-compact\">\r\n          <thead>\r\n            <tr>\r\n              <th>EstaciÃ³n</th>\r\n              <th>Marca</th>\r\n              <th>CNE</th>\r\n              <th>Combustible</th>\r\n              <th>PBL</th>\r\n              <th>Precio Asistido</th>\r\n              <th>Precio Autoservicio</th>\r\n              <th>Dif. Competencia</th>\r\n              <th>Estrategia Propia</th>\r\n              <th>Cambio Precio</th>\r\n              <th>Fecha Autoservicio</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {data.map((item, idx) => {\r\n              const difComp = item.Diferencia_Competencia || 0;\r\n              const difPropia = item.Estrategia_Propia || 0;\r\n              const fechaAuto = formatFecha(item.fecha_autoservicio);\r\n              const precioAsistido = item.precio_asistido || 0;\r\n              const precioAutoservicio = item.precio_autoservicio || 0;\r\n              const cambioPrecio = item.cambio_precio || 'Mantiene Diferencia';\r\n              \r\n              return (\r\n                <tr key={idx}>\r\n                  <td className=\"td-estacion\" title={item.Nom_Eds}>\r\n                    {item.Nom_Eds || 'S/N'}\r\n                  </td>\r\n                  <td className=\"td-marca\">{item.marca || '-'}</td>\r\n                  <td className=\"td-cne\" title={item.cod_cne}>\r\n                    {item.cod_cne || '-'}\r\n                  </td>\r\n                  <td className=\"td-combustible\">\r\n                    <span className={`combustible-badge combustible-${item.combustible?.toLowerCase()}`}>\r\n                      {item.combustible || '-'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"td-pbl\">{item.pbl || '-'}</td>\r\n                  <td className=\"td-precio\"><strong>${precioAsistido}</strong></td>\r\n                  <td className=\"td-precio\"><strong>${precioAutoservicio}</strong></td>\r\n                  <td className={`td-diferencia ${difComp > 0 ? 'precio-sube' : difComp < 0 ? 'precio-baja' : 'precio-igual'}`}>\r\n                    <strong>\r\n                      {difComp > 0 ? 'â†‘ +' : difComp < 0 ? 'â†“ ' : ''}{difComp}\r\n                    </strong>\r\n                  </td>\r\n                  <td className={`td-diferencia ${difPropia > 0 ? 'precio-sube' : difPropia < 0 ? 'precio-baja' : 'precio-igual'}`}>\r\n                    <strong>\r\n                      {difPropia > 0 ? 'â†‘ +' : difPropia < 0 ? 'â†“ ' : ''}{difPropia}\r\n                    </strong>\r\n                  </td>\r\n                  <td className=\"td-cambio-precio\" style={{ fontSize: '11px' }}>\r\n                    {cambioPrecio}\r\n                  </td>\r\n                  <td className=\"td-fecha\">\r\n                    <div className=\"fecha-compacta\">\r\n                      <span className=\"fecha-dia\">{fechaAuto.dia}</span>\r\n                      {fechaAuto.hora && <span className=\"fecha-hora\">{fechaAuto.hora}</span>}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      ) : (\r\n        <table className=\"historico-table-compact ajustes-simplified\">\r\n          <thead>\r\n            <tr>\r\n              <th>EstaciÃ³n</th>\r\n              <th>Marca</th>\r\n              <th>CNE</th>\r\n              <th>PBL</th>\r\n              <th>Combustibles</th>\r\n              <th>Dif. Competencia</th>\r\n              <th>Dif. Estrategia</th>\r\n              <th>Fecha Vigencia</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {agrupadosPorEstacion.map((grupo, idx) => {\r\n              return grupo.subgrupos.map((subgrupo, subIdx) => {\r\n                const fechaVig = formatFecha(subgrupo.combustibles[0]?.FechaVigenciaSugerida);\r\n                const difComp = subgrupo.diferencia_competencia;\r\n                const difPropia = subgrupo.diferencia_propia;\r\n                \r\n                return (\r\n                  <tr key={`${idx}-${subIdx}`}>\r\n                    {subIdx === 0 && (\r\n                      <>\r\n                        <td className=\"td-estacion\" rowSpan={grupo.subgrupos.length} title={grupo.Nom_Eds}>\r\n                          {grupo.Nom_Eds?.slice(0, 18) || 'S/N'}\r\n                        </td>\r\n                        <td className=\"td-marca\" rowSpan={grupo.subgrupos.length}>{grupo.marca || '-'}</td>\r\n                        <td className=\"td-cne\" rowSpan={grupo.subgrupos.length} title={grupo.cod_cne}>\r\n                          {grupo.cod_cne?.slice(-6) || '-'}\r\n                        </td>\r\n                        <td className=\"td-pbl\" rowSpan={grupo.subgrupos.length}>{grupo.pbl || '-'}</td>\r\n                      </>\r\n                    )}\r\n                    <td className=\"td-combustibles\">\r\n                      {subgrupo.combustibles.map((c, i) => (\r\n                        <span key={i} className={`combustible-badge combustible-${c.combustible?.toLowerCase()}`} style={{ marginRight: '4px' }}>\r\n                          {c.combustible}\r\n                        </span>\r\n                      ))}\r\n                    </td>\r\n                    <td className={`td-diferencia ${difComp > 0 ? 'precio-sube' : difComp < 0 ? 'precio-baja' : 'precio-igual'}`}>\r\n                      <strong>{difComp > 0 ? 'â†‘' : difComp < 0 ? 'â†“' : '='} {difComp > 0 ? '+' : ''}{difComp}</strong>\r\n                    </td>\r\n                    <td className={`td-diferencia ${difPropia > 0 ? 'precio-sube' : difPropia < 0 ? 'precio-baja' : 'precio-igual'}`}>\r\n                      <strong>{difPropia > 0 ? 'â†‘' : difPropia < 0 ? 'â†“' : '='} {difPropia > 0 ? '+' : ''}{difPropia}</strong>\r\n                    </td>\r\n                    <td className=\"td-fecha\">\r\n                      <div className=\"fecha-compacta\">\r\n                        <span className=\"fecha-dia\">{fechaVig.dia}</span>\r\n                        {fechaVig.hora && <span className=\"fecha-hora\">{fechaVig.hora}</span>}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              });\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AlertPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}