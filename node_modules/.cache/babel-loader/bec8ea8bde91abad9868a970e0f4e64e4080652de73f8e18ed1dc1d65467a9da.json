{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\nimport { createCustomIcon, createBrandLogo } from '../utils/iconHelpers';\nconst ClusterMarkers = ({\n  markers,\n  selectedRegion\n}) => {\n  _s();\n  const map = useMap();\n  useEffect(() => {\n    if (!map || markers.length === 0) return;\n\n    // Limpiar clusters anteriores\n    map.eachLayer(layer => {\n      if (layer instanceof L.MarkerClusterGroup) {\n        map.removeLayer(layer);\n      }\n    });\n\n    // Crear nuevo cluster group\n    const markerClusterGroup = L.markerClusterGroup({\n      maxClusterRadius: 80,\n      disableClusteringAtZoom: 16,\n      chunkedLoading: true,\n      chunkInterval: 200,\n      chunkDelay: 50\n    });\n\n    // Filtrar por regi贸n y agregar marcadores\n    const filteredMarkers = markers.filter(m => m.Region === selectedRegion);\n    filteredMarkers.forEach(marker => {\n      const leafletMarker = L.marker([marker.lat, marker.lng], {\n        icon: createCustomIcon(marker.Marca)\n      });\n\n      // Crear popup con contenido HTML\n      const popupContent = `\n        <div class=\"popup-container\">\n          <div class=\"popup-header\">\n            <img \n              src=\"${createBrandLogo(marker.Marca)}\"\n              alt=\"${marker.Marca}\"\n              style=\"width: 30px; height: 30px; border-radius: 50%; object-fit: cover;\"\n              onerror=\"this.style.display='none'\"\n            />\n            <h3>${marker.nombre}</h3>\n          </div>\n          <div class=\"popup-content\">\n            <div class=\"popup-data\">\n              <strong>Marca:</strong> ${marker.Marca}<br />\n              <strong>Region:</strong> ${marker.Region}<br />\n              <strong>Comuna:</strong> ${marker.Comuna}<br />\n              ${marker.direccion ? `<strong>Direcci贸n:</strong> ${marker.direccion}<br />` : ''}\n            </div>\n            <hr style=\"margin: 10px 0; border: none; border-top: 1px solid #e0e0e0\" />\n            <div class=\"popup-data\">\n              <strong>Precios:</strong><br />\n              G93: ${marker.precio_g93 ? `$${marker.precio_g93}` : 'N/A'}<br />\n              G95: ${marker.precio_g95 ? `$${marker.precio_g95}` : 'N/A'}<br />\n              Diesel: ${marker.precio_diesel ? `$${marker.precio_diesel}` : 'N/A'}<br />\n            </div>\n            ${marker.Guerra_Precio === 'Si' ? `\n              <hr style=\"margin: 10px 0; border: none; border-top: 1px solid #e0e0e0\" />\n              <div class=\"popup-data\" style=\"color: #d32f2f; font-weight: bold;\">\n                锔 Guerra de Precio Activa\n              </div>\n            ` : ''}\n          </div>\n        </div>\n      `;\n      leafletMarker.bindPopup(popupContent, {\n        maxWidth: 300,\n        minWidth: 250\n      });\n      markerClusterGroup.addLayer(leafletMarker);\n    });\n    map.addLayer(markerClusterGroup);\n    console.log(` ${filteredMarkers.length} marcadores renderizados con clustering`);\n    return () => {\n      if (markerClusterGroup) {\n        map.removeLayer(markerClusterGroup);\n      }\n    };\n  }, [map, markers, selectedRegion]);\n  return null;\n};\n_s(ClusterMarkers, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n  return [useMap];\n});\n_c = ClusterMarkers;\nexport default ClusterMarkers;\nvar _c;\n$RefreshReg$(_c, \"ClusterMarkers\");","map":{"version":3,"names":["useEffect","useMap","L","createCustomIcon","createBrandLogo","ClusterMarkers","markers","selectedRegion","_s","map","length","eachLayer","layer","MarkerClusterGroup","removeLayer","markerClusterGroup","maxClusterRadius","disableClusteringAtZoom","chunkedLoading","chunkInterval","chunkDelay","filteredMarkers","filter","m","Region","forEach","marker","leafletMarker","lat","lng","icon","Marca","popupContent","nombre","Comuna","direccion","precio_g93","precio_g95","precio_diesel","Guerra_Precio","bindPopup","maxWidth","minWidth","addLayer","console","log","_c","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/ClusterMarkers.jsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet.markercluster';\r\nimport { createCustomIcon, createBrandLogo } from '../utils/iconHelpers';\r\n\r\nconst ClusterMarkers = ({ markers, selectedRegion }) => {\r\n  const map = useMap();\r\n\r\n  useEffect(() => {\r\n    if (!map || markers.length === 0) return;\r\n\r\n    // Limpiar clusters anteriores\r\n    map.eachLayer((layer) => {\r\n      if (layer instanceof L.MarkerClusterGroup) {\r\n        map.removeLayer(layer);\r\n      }\r\n    });\r\n\r\n    // Crear nuevo cluster group\r\n    const markerClusterGroup = L.markerClusterGroup({\r\n      maxClusterRadius: 80,\r\n      disableClusteringAtZoom: 16,\r\n      chunkedLoading: true,\r\n      chunkInterval: 200,\r\n      chunkDelay: 50\r\n    });\r\n\r\n    // Filtrar por regi贸n y agregar marcadores\r\n    const filteredMarkers = markers.filter(m => m.Region === selectedRegion);\r\n\r\n    filteredMarkers.forEach((marker) => {\r\n      const leafletMarker = L.marker([marker.lat, marker.lng], {\r\n        icon: createCustomIcon(marker.Marca)\r\n      });\r\n\r\n      // Crear popup con contenido HTML\r\n      const popupContent = `\r\n        <div class=\"popup-container\">\r\n          <div class=\"popup-header\">\r\n            <img \r\n              src=\"${createBrandLogo(marker.Marca)}\"\r\n              alt=\"${marker.Marca}\"\r\n              style=\"width: 30px; height: 30px; border-radius: 50%; object-fit: cover;\"\r\n              onerror=\"this.style.display='none'\"\r\n            />\r\n            <h3>${marker.nombre}</h3>\r\n          </div>\r\n          <div class=\"popup-content\">\r\n            <div class=\"popup-data\">\r\n              <strong>Marca:</strong> ${marker.Marca}<br />\r\n              <strong>Region:</strong> ${marker.Region}<br />\r\n              <strong>Comuna:</strong> ${marker.Comuna}<br />\r\n              ${marker.direccion ? `<strong>Direcci贸n:</strong> ${marker.direccion}<br />` : ''}\r\n            </div>\r\n            <hr style=\"margin: 10px 0; border: none; border-top: 1px solid #e0e0e0\" />\r\n            <div class=\"popup-data\">\r\n              <strong>Precios:</strong><br />\r\n              G93: ${marker.precio_g93 ? `$${marker.precio_g93}` : 'N/A'}<br />\r\n              G95: ${marker.precio_g95 ? `$${marker.precio_g95}` : 'N/A'}<br />\r\n              Diesel: ${marker.precio_diesel ? `$${marker.precio_diesel}` : 'N/A'}<br />\r\n            </div>\r\n            ${marker.Guerra_Precio === 'Si' ? `\r\n              <hr style=\"margin: 10px 0; border: none; border-top: 1px solid #e0e0e0\" />\r\n              <div class=\"popup-data\" style=\"color: #d32f2f; font-weight: bold;\">\r\n                锔 Guerra de Precio Activa\r\n              </div>\r\n            ` : ''}\r\n          </div>\r\n        </div>\r\n      `;\r\n\r\n      leafletMarker.bindPopup(popupContent, { maxWidth: 300, minWidth: 250 });\r\n      markerClusterGroup.addLayer(leafletMarker);\r\n    });\r\n\r\n    map.addLayer(markerClusterGroup);\r\n\r\n    console.log(` ${filteredMarkers.length} marcadores renderizados con clustering`);\r\n\r\n    return () => {\r\n      if (markerClusterGroup) {\r\n        map.removeLayer(markerClusterGroup);\r\n      }\r\n    };\r\n  }, [map, markers, selectedRegion]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ClusterMarkers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}