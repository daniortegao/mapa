{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getDataFromAPI } from '../services/apiService';\nexport const useMapData = () => {\n  _s();\n  const [markers, setMarkers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Carga inicial desde API\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        console.log('ðŸ“¡ Obteniendo datos desde API...');\n        const data = await getDataFromAPI();\n\n        // Mapear datos de tu API al formato del mapa\n        const formattedData = (Array.isArray(data) ? data : data.data || []).map(item => ({\n          id: item.id || item.pbl,\n          lat: parseFloat(item.latitud) || -33.8688,\n          lng: parseFloat(item.longitud) || -70.9123,\n          Marca: item.Marca || 'Unknown',\n          nombre: item.nombre || item.eds || `EstaciÃ³n ${item.id}`,\n          precio_g93: item.precio_g93 || 0,\n          precio_g95: item.precio_g95 || 0,\n          precio_diesel: item.precio_diesel || 0,\n          pbl: item.pbl,\n          eds: item.eds,\n          direccion: item.direccion\n        }));\n        console.log(`âœ… ${formattedData.length} marcadores cargados`);\n        setMarkers(formattedData);\n        setLoading(false);\n      } catch (error) {\n        console.error(\"Error loading data:\", error);\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Polling cada 30 minutos para actualizar datos\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        console.log('ðŸ”„ Actualizando datos...', new Date().toLocaleTimeString());\n        const data = await getDataFromAPI();\n        const formattedData = (Array.isArray(data) ? data : data.data || []).map(item => ({\n          id: item.id || item.pbl,\n          lat: parseFloat(item.latitud) || -33.8688,\n          lng: parseFloat(item.longitud) || -70.9123,\n          Marca: item.Marca || 'Unknown',\n          nombre: item.nombre || item.eds || `EstaciÃ³n ${item.id}`,\n          precio_g93: item.precio_g93 || 0,\n          precio_g95: item.precio_g95 || 0,\n          precio_diesel: item.precio_diesel || 0,\n          pbl: item.pbl,\n          eds: item.eds,\n          direccion: item.direccion\n        }));\n        setMarkers(formattedData);\n        console.log('âœ… Datos actualizados');\n      } catch (error) {\n        console.error(\"Error updating data:\", error);\n      }\n    }, 1800000); // 30 minutos\n\n    return () => clearInterval(interval);\n  }, []);\n  return {\n    markers,\n    loading\n  };\n};\n_s(useMapData, \"YR+8HWd/JrbpLZl/yDOVXBwlr/Y=\");","map":{"version":3,"names":["useState","useEffect","getDataFromAPI","useMapData","_s","markers","setMarkers","loading","setLoading","fetchData","console","log","data","formattedData","Array","isArray","map","item","id","pbl","lat","parseFloat","latitud","lng","longitud","Marca","nombre","eds","precio_g93","precio_g95","precio_diesel","direccion","length","error","interval","setInterval","Date","toLocaleTimeString","clearInterval"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/hooks/useMapData.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getDataFromAPI } from '../services/apiService';\r\n\r\nexport const useMapData = () => {\r\n  const [markers, setMarkers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Carga inicial desde API\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        console.log('ðŸ“¡ Obteniendo datos desde API...');\r\n        const data = await getDataFromAPI();\r\n        \r\n        // Mapear datos de tu API al formato del mapa\r\n        const formattedData = (Array.isArray(data) ? data : data.data || []).map(item => ({\r\n          id: item.id || item.pbl,\r\n          lat: parseFloat(item.latitud) || -33.8688,\r\n          lng: parseFloat(item.longitud) || -70.9123,\r\n          Marca: item.Marca || 'Unknown',\r\n          nombre: item.nombre || item.eds || `EstaciÃ³n ${item.id}`,\r\n          precio_g93: item.precio_g93 || 0,\r\n          precio_g95: item.precio_g95 || 0,\r\n          precio_diesel: item.precio_diesel || 0,\r\n          pbl: item.pbl,\r\n          eds: item.eds,\r\n          direccion: item.direccion\r\n        }));\r\n\r\n        console.log(`âœ… ${formattedData.length} marcadores cargados`);\r\n        setMarkers(formattedData);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error loading data:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Polling cada 30 minutos para actualizar datos\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        console.log('ðŸ”„ Actualizando datos...', new Date().toLocaleTimeString());\r\n        const data = await getDataFromAPI();\r\n        \r\n        const formattedData = (Array.isArray(data) ? data : data.data || []).map(item => ({\r\n          id: item.id || item.pbl,\r\n          lat: parseFloat(item.latitud) || -33.8688,\r\n          lng: parseFloat(item.longitud) || -70.9123,\r\n          Marca: item.Marca || 'Unknown',\r\n          nombre: item.nombre || item.eds || `EstaciÃ³n ${item.id}`,\r\n          precio_g93: item.precio_g93 || 0,\r\n          precio_g95: item.precio_g95 || 0,\r\n          precio_diesel: item.precio_diesel || 0,\r\n          pbl: item.pbl,\r\n          eds: item.eds,\r\n          direccion: item.direccion\r\n        }));\r\n\r\n        setMarkers(formattedData);\r\n        console.log('âœ… Datos actualizados');\r\n      } catch (error) {\r\n        console.error(\"Error updating data:\", error);\r\n      }\r\n    }, 1800000); // 30 minutos\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return { markers, loading };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}