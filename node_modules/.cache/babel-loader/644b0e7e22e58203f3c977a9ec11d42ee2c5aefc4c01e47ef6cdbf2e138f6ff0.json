{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e08f\\\\Desktop\\\\Proyectos\\\\Resumen\\\\mapa-v2\\\\src\\\\components\\\\MapComponent.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport { useMapData } from '../hooks/useMapData';\n\n// Fix para iconos de Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\n// Componente para agregar clusters al mapa\nconst ClusterLayer = ({\n  markers\n}) => {\n  _s();\n  const map = useMap();\n  const markerClusterGroup = useRef(null);\n  useEffect(() => {\n    if (!map || markers.length === 0) return;\n\n    // Limpiar clusters anteriores\n    if (markerClusterGroup.current) {\n      map.removeLayer(markerClusterGroup.current);\n    }\n\n    // Crear nuevo cluster group\n    markerClusterGroup.current = L.markerClusterGroup({\n      maxClusterRadius: 80,\n      disableClusteringAtZoom: 16\n    });\n\n    // Agregar marcadores al cluster\n    markers.forEach(marker => {\n      const leafletMarker = L.marker([marker.lat, marker.lng], {\n        icon: createMarkerIcon(marker.Marca)\n      });\n\n      // Crear popup\n      const popupContent = `\n        <div class=\"popup-container\">\n          <div class=\"popup-header\">\n            <h3>${marker.nombre}</h3>\n          </div>\n          <div class=\"popup-content\">\n            <div class=\"popup-data\">\n              <strong>Marca:</strong> ${marker.Marca}<br />\n              <strong>Lat:</strong> ${marker.lat.toFixed(4)}<br />\n              <strong>Lon:</strong> ${marker.lng.toFixed(4)}<br />\n            </div>\n            <hr style=\"margin: 10px 0; border: none; border-top: 1px solid #e0e0e0\" />\n            <div class=\"popup-data\">\n              <strong>Precios:</strong><br />\n              G93: <strong>$${marker.precio_g93}</strong><br />\n              G95: <strong>$${marker.precio_g95}</strong><br />\n              Diesel: <strong>$${marker.precio_diesel}</strong>\n            </div>\n          </div>\n        </div>\n      `;\n      leafletMarker.bindPopup(popupContent, {\n        maxWidth: 300,\n        minWidth: 250\n      });\n      markerClusterGroup.current.addLayer(leafletMarker);\n    });\n    map.addLayer(markerClusterGroup.current);\n    return () => {\n      if (markerClusterGroup.current) {\n        map.removeLayer(markerClusterGroup.current);\n      }\n    };\n  }, [map, markers]);\n  return null;\n};\n_s(ClusterLayer, \"STq0ma1xws5gt2uRMvtDN/6pfKc=\", false, function () {\n  return [useMap];\n});\n_c = ClusterLayer;\nconst MapComponent = () => {\n  _s2();\n  const {\n    markers,\n    loading\n  } = useMapData();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%',\n        fontSize: '16px',\n        color: '#666'\n      },\n      children: [\"\\uD83D\\uDCCD Cargando \", markers.length, \" marcadores...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: [-33.8688, -70.9123],\n    zoom: 12,\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    zoomControl: false,\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a>\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ClusterLayer, {\n      markers: markers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n// Funci√≥n para crear iconos seg√∫n marca\n_s2(MapComponent, \"1/pXpe4wcP5ATsh/TxnmdFOCZdY=\", false, function () {\n  return [useMapData];\n});\n_c2 = MapComponent;\nconst createMarkerIcon = marca => {\n  const colors = {\n    'Petrobras': '#FFDA00',\n    'Copec': '#FF6B00',\n    'Shell': '#FFD700',\n    'Blanco': '#FFFFFF',\n    'default': '#00B8A9'\n  };\n  const color = colors[marca] || colors.default;\n  return L.divIcon({\n    html: `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"${color}\" stroke=\"white\" stroke-width=\"1\" style=\"filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));\">\n        <path d=\"M12 0C7.6 0 4 3.6 4 8c0 6 8 16 8 16s8-10 8-16c0-4.4-3.6-8-8-8z\"/>\n      </svg>\n    `,\n    iconSize: [30, 30],\n    iconAnchor: [15, 30],\n    popupAnchor: [0, -30],\n    className: 'icono-personalizado'\n  });\n};\nexport default MapComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"ClusterLayer\");\n$RefreshReg$(_c2, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","MapContainer","TileLayer","Marker","Popup","useMap","L","useMapData","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","ClusterLayer","markers","_s","map","markerClusterGroup","length","current","removeLayer","maxClusterRadius","disableClusteringAtZoom","forEach","marker","leafletMarker","lat","lng","icon","createMarkerIcon","Marca","popupContent","nombre","toFixed","precio_g93","precio_g95","precio_diesel","bindPopup","maxWidth","minWidth","addLayer","_c","MapComponent","_s2","loading","style","display","alignItems","justifyContent","height","fontSize","color","children","fileName","_jsxFileName","lineNumber","columnNumber","center","zoom","width","zoomControl","attribution","url","_c2","marca","colors","default","divIcon","html","iconSize","iconAnchor","popupAnchor","className","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/components/MapComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\r\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\r\nimport { useMapData } from '../hooks/useMapData';\r\n\r\n// Fix para iconos de Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\n// Componente para agregar clusters al mapa\r\nconst ClusterLayer = ({ markers }) => {\r\n  const map = useMap();\r\n  const markerClusterGroup = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!map || markers.length === 0) return;\r\n\r\n    // Limpiar clusters anteriores\r\n    if (markerClusterGroup.current) {\r\n      map.removeLayer(markerClusterGroup.current);\r\n    }\r\n\r\n    // Crear nuevo cluster group\r\n    markerClusterGroup.current = L.markerClusterGroup({\r\n      maxClusterRadius: 80,\r\n      disableClusteringAtZoom: 16,\r\n    });\r\n\r\n    // Agregar marcadores al cluster\r\n    markers.forEach((marker) => {\r\n      const leafletMarker = L.marker([marker.lat, marker.lng], {\r\n        icon: createMarkerIcon(marker.Marca)\r\n      });\r\n\r\n      // Crear popup\r\n      const popupContent = `\r\n        <div class=\"popup-container\">\r\n          <div class=\"popup-header\">\r\n            <h3>${marker.nombre}</h3>\r\n          </div>\r\n          <div class=\"popup-content\">\r\n            <div class=\"popup-data\">\r\n              <strong>Marca:</strong> ${marker.Marca}<br />\r\n              <strong>Lat:</strong> ${marker.lat.toFixed(4)}<br />\r\n              <strong>Lon:</strong> ${marker.lng.toFixed(4)}<br />\r\n            </div>\r\n            <hr style=\"margin: 10px 0; border: none; border-top: 1px solid #e0e0e0\" />\r\n            <div class=\"popup-data\">\r\n              <strong>Precios:</strong><br />\r\n              G93: <strong>$${marker.precio_g93}</strong><br />\r\n              G95: <strong>$${marker.precio_g95}</strong><br />\r\n              Diesel: <strong>$${marker.precio_diesel}</strong>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\r\n\r\n      leafletMarker.bindPopup(popupContent, { maxWidth: 300, minWidth: 250 });\r\n      markerClusterGroup.current.addLayer(leafletMarker);\r\n    });\r\n\r\n    map.addLayer(markerClusterGroup.current);\r\n\r\n    return () => {\r\n      if (markerClusterGroup.current) {\r\n        map.removeLayer(markerClusterGroup.current);\r\n      }\r\n    };\r\n  }, [map, markers]);\r\n\r\n  return null;\r\n};\r\n\r\nconst MapComponent = () => {\r\n  const { markers, loading } = useMapData();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '100%',\r\n        fontSize: '16px',\r\n        color: '#666'\r\n      }}>\r\n        üìç Cargando {markers.length} marcadores...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <MapContainer\r\n      center={[-33.8688, -70.9123]}\r\n      zoom={12}\r\n      style={{ width: '100%', height: '100%' }}\r\n      zoomControl={false}\r\n    >\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n      <ClusterLayer markers={markers} />\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\n// Funci√≥n para crear iconos seg√∫n marca\r\nconst createMarkerIcon = (marca) => {\r\n  const colors = {\r\n    'Petrobras': '#FFDA00',\r\n    'Copec': '#FF6B00',\r\n    'Shell': '#FFD700',\r\n    'Blanco': '#FFFFFF',\r\n    'default': '#00B8A9'\r\n  };\r\n\r\n  const color = colors[marca] || colors.default;\r\n\r\n  return L.divIcon({\r\n    html: `\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"${color}\" stroke=\"white\" stroke-width=\"1\" style=\"filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));\">\r\n        <path d=\"M12 0C7.6 0 4 3.6 4 8c0 6 8 16 8 16s8-10 8-16c0-4.4-3.6-8-8-8z\"/>\r\n      </svg>\r\n    `,\r\n    iconSize: [30, 30],\r\n    iconAnchor: [15, 30],\r\n    popupAnchor: [0, -30],\r\n    className: 'icono-personalizado'\r\n  });\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}