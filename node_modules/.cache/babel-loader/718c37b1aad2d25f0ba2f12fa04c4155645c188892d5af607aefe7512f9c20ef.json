{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e08f\\\\Desktop\\\\Proyectos\\\\Resumen\\\\mapa-v2\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo, useEffect, useRef } from 'react';\nimport './styles/globals.css';\nimport './styles/layout.css';\nimport './styles/markers.css';\nimport MapComponent from './components/MapComponent';\nimport FilterPanel from './components/FilterPanel';\nimport AlertPanel from './components/AlertPanel';\nimport StatisticsPanel from './components/StatisticsPanel';\nimport { REGION_COORDINATES, REGIONES_ORDENADAS } from './utils/constants';\nimport { useMapData } from './hooks/useMapData';\nimport { getDataBaseComp, getMercadoAlerta, getMarcasCompartidas, guardarMarcasCompartidas } from './services/apiService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [sidebarVisible, setSidebarVisible] = useState(false);\n  const [rightPanelVisible, setRightPanelVisible] = useState(false);\n  const [alertPanelVisible, setAlertPanelVisible] = useState(false);\n  const [alertCount, setAlertCount] = useState(0);\n  const [selectedRegion, setSelectedRegion] = useState('Metropolitana de Santiago');\n  const [filteredMarkers, setFilteredMarkers] = useState([]);\n  const [filteredMarkersForMercado, setFilteredMarkersForMercado] = useState([]);\n  const [baseCompData, setBaseCompData] = useState([]);\n  const {\n    markers,\n    lastUpdateTime\n  } = useMapData();\n\n  // Estado para estaciones marcadas como \"Nivel 2 en Nivel 1\"\n  const [nivel2EnNivel1Stations, setNivel2EnNivel1Stations] = useState([]);\n\n  // Cargar marcas compartidas al iniciar\n  useEffect(() => {\n    const loadMarcas = async () => {\n      try {\n        const marcas = await getMarcasCompartidas();\n        if (Array.isArray(marcas)) {\n          setNivel2EnNivel1Stations(marcas);\n        }\n      } catch (err) {\n        console.error('Error cargando marcas compartidas:', err);\n      }\n    };\n    loadMarcas();\n  }, []);\n  const regions = useMemo(() => {\n    const regionesConDatos = new Set(markers.map(m => m.Region));\n    return REGIONES_ORDENADAS.filter(region => regionesConDatos.has(region));\n  }, [markers]);\n  const regionMarkers = useMemo(() => {\n    return markers.filter(m => m.Region === selectedRegion);\n  }, [markers, selectedRegion]);\n\n  // ‚úÖ AGREGA ESTO (marcadores √∫nicos SOLO para el mapa):\n  const uniqueRegionMarkers = useMemo(() => {\n    const filtered = markers.filter(m => m.Region === selectedRegion);\n\n    // Deduplicar: mantener solo el m√°s reciente por estaci√≥n\n    const uniqueMap = new Map();\n    filtered.forEach(marker => {\n      const key = marker.pbl || marker.id || `${marker.lat}_${marker.lng}`;\n      const existing = uniqueMap.get(key);\n      if (!existing) {\n        uniqueMap.set(key, marker);\n      } else {\n        const existingDate = existing.fecha_aplicacion ? new Date(existing.fecha_aplicacion) : new Date(0);\n        const currentDate = marker.fecha_aplicacion ? new Date(marker.fecha_aplicacion) : new Date(0);\n        if (currentDate > existingDate) {\n          uniqueMap.set(key, marker);\n        }\n      }\n    });\n    const unique = Array.from(uniqueMap.values());\n    console.log(`üìç ${selectedRegion}: ${unique.length} estaciones √∫nicas de ${filtered.length} registros`);\n    return unique;\n  }, [markers, selectedRegion]);\n  useEffect(() => {\n    const loadIt = async () => {\n      try {\n        const data = await getDataBaseComp();\n        const final = (data === null || data === void 0 ? void 0 : data.bascomp) || (data === null || data === void 0 ? void 0 : data.base_comp) || (data === null || data === void 0 ? void 0 : data.data) || [];\n        setBaseCompData(final);\n      } catch (err) {\n        console.error('Error:', err);\n      }\n    };\n    loadIt();\n  }, []);\n\n  // NOTA: Ya no usamos localStorage para persistencia local\n  // La persistencia se maneja directamente al actualizar el estado\n\n  useEffect(() => {\n    const loadAlertCount = async () => {\n      try {\n        const alertas = await getMercadoAlerta();\n        const getStationCount = alerts => {\n          const estaciones = {};\n          alerts.forEach(a => {\n            estaciones[a.Nom_Eds || 'Sin nombre'] = true;\n          });\n          return Object.keys(estaciones).length;\n        };\n        const count = getStationCount(alertas);\n        setAlertCount(count);\n      } catch (err) {\n        console.error('Error al cargar alertas:', err);\n        setAlertCount(0);\n      }\n    };\n    loadAlertCount();\n    const interval = setInterval(loadAlertCount, 60000);\n    return () => clearInterval(interval);\n  }, []);\n  const handleFiltersChange = React.useCallback((filtered, filteredForMercado) => {\n    setFilteredMarkers(filtered); // ‚Üê √önicos para visualizar\n    setFilteredMarkersForMercado(filteredForMercado); // ‚Üê Hist√≥rico completo filtrado\n  }, []);\n  const handleStationSelect = station => {\n    if (station && window.leafletMap) {\n      // Change region if needed\n      if (station.region !== selectedRegion) {\n        setSelectedRegion(station.region);\n      }\n      // Center map on station with zoom\n      setTimeout(() => {\n        window.leafletMap.setView([station.lat, station.lng], 15);\n      }, 100);\n    }\n  };\n  const toggleSidebar = () => {\n    setSidebarVisible(!sidebarVisible);\n    setTimeout(() => {\n      if (window.leafletMap) {\n        window.leafletMap.invalidateSize();\n      }\n    }, 300);\n  };\n  const toggleRightPanel = () => {\n    setRightPanelVisible(!rightPanelVisible);\n    setTimeout(() => {\n      if (window.leafletMap) {\n        window.leafletMap.invalidateSize();\n      }\n    }, 300);\n  };\n  const toggleAlertPanel = () => {\n    setAlertPanelVisible(!alertPanelVisible);\n  };\n  const toggleNivel2EnNivel1 = async stationId => {\n    // Actualizaci√≥n optimista\n    let newStations = [];\n    setNivel2EnNivel1Stations(prev => {\n      if (prev.includes(stationId)) {\n        newStations = prev.filter(id => id !== stationId);\n      } else {\n        newStations = [...prev, stationId];\n      }\n      return newStations;\n    });\n\n    // Guardar en backend\n    try {\n      await guardarMarcasCompartidas(newStations);\n    } catch (err) {\n      console.error('Error guardando marcas compartidas:', err);\n      // Revertir en caso de error (opcional, pero recomendado)\n      // Por simplicidad, recargamos del servidor\n      const marcas = await getMarcasCompartidas();\n      if (Array.isArray(marcas)) {\n        setNivel2EnNivel1Stations(marcas);\n      }\n    }\n  };\n\n  // Estado para intercambiar aplicaciones\n  const [activeApp, setActiveApp] = useState('mapa'); // 'mapa' | 'calculos'\n\n  // Usuario autenticado para mostrar en navbar\n  const [loggedUser, setLoggedUser] = useState(() => {\n    try {\n      return localStorage.getItem('user_calc') || null;\n    } catch (e) {\n      return null;\n    }\n  });\n\n  // Estado para Login antes de entrar a Precios\n  const [showLogin, setShowLogin] = useState(false);\n  const [loginUser, setLoginUser] = useState('');\n  const [loginPassword, setLoginPassword] = useState('');\n  const [loginError, setLoginError] = useState('');\n  const [loginLoading, setLoginLoading] = useState(false);\n  const iframeRef = useRef(null);\n\n  // URL del proyecto frontend (Calculos)\n  // Desarrollo: normalmente corre en localhost:3001 (el segundo CRA se levanta en 3001)\n  // Producci√≥n: Carpeta hermana '../Calculos/' (Asumiendo que Mapa est√° en /Mapa/ y Calculos en /Calculos/)\n  const CALCULOS_APP_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:3001?mode=embed' : '../Calculos/?mode=embed';\n  const handleOpenPrecios = () => {\n    setLoginUser('');\n    setLoginPassword('');\n    setLoginError('');\n    setShowLogin(true);\n  };\n  const handleLoginSubmit = async e => {\n    e.preventDefault();\n    setLoginError('');\n    setLoginLoading(true);\n    const url = 'http://DE250329.esmax.cl/calculos/api/login.php';\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: loginUser,\n          password: loginPassword\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(errorText || 'Error de autenticaci√≥n');\n      }\n      const data = await response.json();\n      if (data.success) {\n        try {\n          localStorage.setItem('user_calc', data.user);\n        } catch (e) {\n          // ignoramos errores de localStorage\n        }\n        const nombre = data.user || loginUser;\n        setLoggedUser(nombre);\n        setShowLogin(false);\n        setActiveApp('calculos');\n      } else {\n        setLoginError(data.error || 'Usuario o contrase√±a incorrectos');\n      }\n    } catch (err) {\n      setLoginError(err.message || 'Error al conectar con el servidor');\n    } finally {\n      setLoginLoading(false);\n    }\n  };\n\n  // Escuchar mensajes desde el iframe de c√°lculos (logout, etc.)\n  useEffect(() => {\n    const handleMessage = event => {\n      const {\n        data\n      } = event;\n      if (!data || typeof data !== 'object') return;\n      if (data.type === 'CALCULOS_LOGOUT') {\n        // Volver al mapa y limpiar usuario local\n        setActiveApp('mapa');\n        setLoggedUser(null);\n        try {\n          localStorage.removeItem('user_calc');\n        } catch (e) {\n          // ignoramos errores\n        }\n      }\n    };\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, []);\n\n  // Enviar usuario al iframe cuando est√© en vista c√°lculos\n  const sendUserToIframe = userToSend => {\n    if (!userToSend) return;\n    if (iframeRef.current && iframeRef.current.contentWindow) {\n      try {\n        iframeRef.current.contentWindow.postMessage({\n          type: 'CALCULOS_SET_USER',\n          user: userToSend\n        }, '*');\n      } catch (e) {\n        // silencioso\n      }\n    }\n  };\n  const handleIframeLoad = () => {\n    if (loggedUser) {\n      sendUserToIframe(loggedUser);\n    }\n  };\n  useEffect(() => {\n    if (activeApp === 'calculos' && loggedUser) {\n      sendUserToIframe(loggedUser);\n    }\n  }, [activeApp, loggedUser]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [showLogin && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '90px',\n        right: '24px',\n        zIndex: 9999\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          borderRadius: '16px',\n          padding: '24px 28px',\n          width: '100%',\n          maxWidth: '380px',\n          boxShadow: '0 25px 50px -12px rgba(15,23,42,0.5)',\n          border: '1px solid #e2e8f0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: 0,\n            marginBottom: '4px',\n            fontSize: '20px',\n            fontWeight: 700,\n            color: '#0f172a'\n          },\n          children: \"Iniciar sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            marginBottom: '16px',\n            fontSize: '13px',\n            color: '#64748b'\n          },\n          children: \"Acceso a m\\xF3dulo de C\\xE1lculo de Precios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), loginError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '12px',\n            padding: '8px 10px',\n            borderRadius: '8px',\n            background: '#fee2e2',\n            color: '#b91c1c',\n            fontSize: '12px'\n          },\n          children: loginError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleLoginSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '12px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Usuario\",\n              value: loginUser,\n              onChange: e => setLoginUser(e.target.value),\n              required: true,\n              style: {\n                width: '100%',\n                padding: '8px 10px',\n                borderRadius: '8px',\n                border: '1px solid #cbd5e1',\n                fontSize: '13px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '16px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Contrase\\xF1a\",\n              value: loginPassword,\n              onChange: e => setLoginPassword(e.target.value),\n              required: true,\n              style: {\n                width: '100%',\n                padding: '8px 10px',\n                borderRadius: '8px',\n                border: '1px solid #cbd5e1',\n                fontSize: '13px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowLogin(false),\n              style: {\n                flex: 1,\n                padding: '8px 10px',\n                borderRadius: '999px',\n                border: '1px solid #cbd5e1',\n                background: 'white',\n                color: '#0f172a',\n                fontSize: '13px',\n                cursor: 'pointer'\n              },\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loginLoading,\n              style: {\n                flex: 1,\n                padding: '8px 10px',\n                borderRadius: '999px',\n                border: 'none',\n                background: '#0ea5e9',\n                color: 'white',\n                fontSize: '13px',\n                fontWeight: 600,\n                cursor: loginLoading ? 'default' : 'pointer',\n                opacity: loginLoading ? 0.7 : 1\n              },\n              children: loginLoading ? 'Validando...' : 'Entrar'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navbar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-container\",\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navbar-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"navbar-title\",\n            children: \"S.I.M.E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"navbar-subtitle\",\n            children: \"Sistema Integrado de Mercado y Estrategia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '4px',\n              fontSize: '12px',\n              color: '#e2e8f0'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                opacity: 0.8\n              },\n              children: \"Hola, \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold'\n              },\n              children: loggedUser || 'Invitado'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), lastUpdateTime && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: 'rgba(12, 12, 12, 0.85)',\n              marginTop: '2px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 'bold'\n              },\n              children: \"Actualizado: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: typeof lastUpdateTime === 'string' ? lastUpdateTime : new Date(lastUpdateTime).toLocaleTimeString('es-CL', {\n                hour: '2-digit',\n                minute: '2-digit',\n                hour12: false\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveApp('mapa'),\n            style: {\n              background: activeApp === 'mapa' ? 'rgba(255,255,255,0.25)' : 'transparent',\n              color: 'white',\n              border: '1px solid rgba(255,255,255,0.5)',\n              borderRadius: '12px',\n              padding: '6px 16px',\n              fontSize: '13px',\n              cursor: 'pointer',\n              fontWeight: activeApp === 'mapa' ? 'bold' : 'normal',\n              transition: 'all 0.2s'\n            },\n            children: \"\\uD83D\\uDDFA\\uFE0F Mapa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleOpenPrecios,\n            style: {\n              background: activeApp === 'calculos' ? 'rgba(255,255,255,0.25)' : 'transparent',\n              color: 'white',\n              border: '1px solid rgba(255,255,255,0.5)',\n              borderRadius: '12px',\n              padding: '6px 16px',\n              fontSize: '13px',\n              cursor: 'pointer',\n              fontWeight: activeApp === 'calculos' ? 'bold' : 'normal',\n              transition: 'all 0.2s'\n            },\n            children: \"\\uD83D\\uDD22 Precios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navbar-right\",\n          style: {\n            display: 'flex',\n            gap: '15px',\n            alignItems: 'center'\n          },\n          children: [activeApp === 'mapa' && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"navbar-alert-btn\",\n            onClick: toggleAlertPanel,\n            \"aria-label\": \"Ver alertas de mercado\",\n            title: \"Alertas de mercado\",\n            children: [\"\\uD83D\\uDD14\", alertCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"alert-badge\",\n              children: alertCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `${process.env.PUBLIC_URL}/iconos/aramco.jpg`,\n            alt: \"Aramco Logo\",\n            className: \"navbar-logo\",\n            onError: e => e.target.style.display = 'none'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this), activeApp === 'mapa' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel-tabs-horizontal\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `vertical-tab-btn ${sidebarVisible ? 'active' : ''}`,\n        onClick: toggleSidebar,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vertical-tab-label\",\n          children: sidebarVisible ? 'OCULTAR FILTROS' : 'MOSTRAR FILTROS'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `vertical-tab-btn ${rightPanelVisible ? 'active' : ''}`,\n        onClick: toggleRightPanel,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vertical-tab-label\",\n          children: rightPanelVisible ? 'OCULTAR DATOS' : 'MOSTRAR DATOS'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-container\",\n      children: activeApp === 'mapa' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          className: `sidebar ${!sidebarVisible ? 'hidden' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"sidebar-title\",\n            children: \"Filtros\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Regi\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedRegion,\n              onChange: e => setSelectedRegion(e.target.value),\n              children: regions.map(region => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: region,\n                children: region\n              }, region, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FilterPanel, {\n            markers: regionMarkers,\n            allMarkers: markers,\n            selectedRegion: selectedRegion,\n            onFiltersChange: handleFiltersChange,\n            onStationSelect: handleStationSelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this), (() => {\n          const markersToMap = filteredMarkers.length > 0 ? filteredMarkers : uniqueRegionMarkers;\n          return null;\n        })(), /*#__PURE__*/_jsxDEV(MapComponent, {\n          selectedRegion: selectedRegion,\n          regionCenter: REGION_COORDINATES[selectedRegion],\n          markers: filteredMarkers.length > 0 ? filteredMarkers : uniqueRegionMarkers,\n          markersForMercado: filteredMarkers.length > 0 ? filteredMarkersForMercado : regionMarkers,\n          baseCompData: baseCompData,\n          onToggleSidebar: toggleSidebar,\n          onToggleRightPanel: toggleRightPanel,\n          sidebarVisible: sidebarVisible,\n          rightPanelVisible: rightPanelVisible,\n          nivel2EnNivel1Stations: nivel2EnNivel1Stations,\n          onToggleNivel2EnNivel1: toggleNivel2EnNivel1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n          className: `right-panel ${!rightPanelVisible ? 'hidden' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(StatisticsPanel, {\n            markers: filteredMarkers.length > 0 ? filteredMarkers : uniqueRegionMarkers,\n            historicalMarkers: filteredMarkersForMercado.length > 0 ? filteredMarkersForMercado : regionMarkers,\n            allMarkers: markers\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(AlertPanel, {\n          isVisible: alertPanelVisible,\n          onClose: toggleAlertPanel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) :\n      /*#__PURE__*/\n      // IFRAME CALCULOS\n      _jsxDEV(\"iframe\", {\n        src: CALCULOS_APP_URL,\n        title: \"Calculadora Precios\",\n        style: {\n          width: '100%',\n          height: '100%',\n          border: 'none',\n          display: 'block'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-version\",\n      children: \"V3.0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"QhbKJ/ekq5EjkFyCiXntZBRm+Vw=\", false, function () {\n  return [useMapData];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useRef","MapComponent","FilterPanel","AlertPanel","StatisticsPanel","REGION_COORDINATES","REGIONES_ORDENADAS","useMapData","getDataBaseComp","getMercadoAlerta","getMarcasCompartidas","guardarMarcasCompartidas","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","sidebarVisible","setSidebarVisible","rightPanelVisible","setRightPanelVisible","alertPanelVisible","setAlertPanelVisible","alertCount","setAlertCount","selectedRegion","setSelectedRegion","filteredMarkers","setFilteredMarkers","filteredMarkersForMercado","setFilteredMarkersForMercado","baseCompData","setBaseCompData","markers","lastUpdateTime","nivel2EnNivel1Stations","setNivel2EnNivel1Stations","loadMarcas","marcas","Array","isArray","err","console","error","regions","regionesConDatos","Set","map","m","Region","filter","region","has","regionMarkers","uniqueRegionMarkers","filtered","uniqueMap","Map","forEach","marker","key","pbl","id","lat","lng","existing","get","set","existingDate","fecha_aplicacion","Date","currentDate","unique","from","values","log","length","loadIt","data","final","bascomp","base_comp","loadAlertCount","alertas","getStationCount","alerts","estaciones","a","Nom_Eds","Object","keys","count","interval","setInterval","clearInterval","handleFiltersChange","useCallback","filteredForMercado","handleStationSelect","station","window","leafletMap","setTimeout","setView","toggleSidebar","invalidateSize","toggleRightPanel","toggleAlertPanel","toggleNivel2EnNivel1","stationId","newStations","prev","includes","activeApp","setActiveApp","loggedUser","setLoggedUser","localStorage","getItem","e","showLogin","setShowLogin","loginUser","setLoginUser","loginPassword","setLoginPassword","loginError","setLoginError","loginLoading","setLoginLoading","iframeRef","CALCULOS_APP_URL","process","env","NODE_ENV","handleOpenPrecios","handleLoginSubmit","preventDefault","url","response","fetch","method","headers","body","JSON","stringify","user","password","ok","errorText","text","Error","json","success","setItem","nombre","message","handleMessage","event","type","removeItem","addEventListener","removeEventListener","sendUserToIframe","userToSend","current","contentWindow","postMessage","handleIframeLoad","className","children","style","position","top","right","zIndex","background","borderRadius","padding","width","maxWidth","boxShadow","border","margin","marginBottom","fontSize","fontWeight","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","value","onChange","target","required","display","justifyContent","gap","onClick","flex","cursor","disabled","opacity","alignItems","marginTop","toLocaleTimeString","hour","minute","hour12","transition","title","src","PUBLIC_URL","alt","onError","allMarkers","onFiltersChange","onStationSelect","markersToMap","regionCenter","markersForMercado","onToggleSidebar","onToggleRightPanel","onToggleNivel2EnNivel1","historicalMarkers","isVisible","onClose","height","_c","$RefreshReg$"],"sources":["C:/Users/e08f/Desktop/Proyectos/Resumen/mapa-v2/src/App.js"],"sourcesContent":["import React, { useState, useMemo, useEffect, useRef } from 'react';\r\nimport './styles/globals.css';\r\nimport './styles/layout.css';\r\nimport './styles/markers.css';\r\nimport MapComponent from './components/MapComponent';\r\nimport FilterPanel from './components/FilterPanel';\r\nimport AlertPanel from './components/AlertPanel';\r\nimport StatisticsPanel from './components/StatisticsPanel';\r\nimport { REGION_COORDINATES, REGIONES_ORDENADAS } from './utils/constants';\r\nimport { useMapData } from './hooks/useMapData';\r\nimport { getDataBaseComp, getMercadoAlerta, getMarcasCompartidas, guardarMarcasCompartidas } from './services/apiService';\r\n\r\nfunction App() {\r\n  const [sidebarVisible, setSidebarVisible] = useState(false);\r\n  const [rightPanelVisible, setRightPanelVisible] = useState(false);\r\n  const [alertPanelVisible, setAlertPanelVisible] = useState(false);\r\n  const [alertCount, setAlertCount] = useState(0);\r\n  const [selectedRegion, setSelectedRegion] = useState('Metropolitana de Santiago');\r\n  const [filteredMarkers, setFilteredMarkers] = useState([]);\r\n  const [filteredMarkersForMercado, setFilteredMarkersForMercado] = useState([]);\r\n  const [baseCompData, setBaseCompData] = useState([]);\r\n  const { markers, lastUpdateTime } = useMapData();\r\n\r\n  // Estado para estaciones marcadas como \"Nivel 2 en Nivel 1\"\r\n  const [nivel2EnNivel1Stations, setNivel2EnNivel1Stations] = useState([]);\r\n\r\n  // Cargar marcas compartidas al iniciar\r\n  useEffect(() => {\r\n    const loadMarcas = async () => {\r\n      try {\r\n        const marcas = await getMarcasCompartidas();\r\n        if (Array.isArray(marcas)) {\r\n          setNivel2EnNivel1Stations(marcas);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error cargando marcas compartidas:', err);\r\n      }\r\n    };\r\n    loadMarcas();\r\n  }, []);\r\n\r\n  const regions = useMemo(() => {\r\n    const regionesConDatos = new Set(markers.map(m => m.Region));\r\n    return REGIONES_ORDENADAS.filter(region => regionesConDatos.has(region));\r\n  }, [markers]);\r\n\r\n  const regionMarkers = useMemo(() => {\r\n    return markers.filter(m => m.Region === selectedRegion);\r\n  }, [markers, selectedRegion]);\r\n\r\n  // ‚úÖ AGREGA ESTO (marcadores √∫nicos SOLO para el mapa):\r\n  const uniqueRegionMarkers = useMemo(() => {\r\n    const filtered = markers.filter(m => m.Region === selectedRegion);\r\n\r\n    // Deduplicar: mantener solo el m√°s reciente por estaci√≥n\r\n    const uniqueMap = new Map();\r\n\r\n    filtered.forEach(marker => {\r\n      const key = marker.pbl || marker.id || `${marker.lat}_${marker.lng}`;\r\n      const existing = uniqueMap.get(key);\r\n\r\n      if (!existing) {\r\n        uniqueMap.set(key, marker);\r\n      } else {\r\n        const existingDate = existing.fecha_aplicacion ? new Date(existing.fecha_aplicacion) : new Date(0);\r\n        const currentDate = marker.fecha_aplicacion ? new Date(marker.fecha_aplicacion) : new Date(0);\r\n\r\n        if (currentDate > existingDate) {\r\n          uniqueMap.set(key, marker);\r\n        }\r\n      }\r\n    });\r\n\r\n    const unique = Array.from(uniqueMap.values());\r\n    console.log(`üìç ${selectedRegion}: ${unique.length} estaciones √∫nicas de ${filtered.length} registros`);\r\n\r\n    return unique;\r\n  }, [markers, selectedRegion]);\r\n\r\n\r\n  useEffect(() => {\r\n    const loadIt = async () => {\r\n      try {\r\n        const data = await getDataBaseComp();\r\n        const final = data?.bascomp || data?.base_comp || data?.data || [];\r\n        setBaseCompData(final);\r\n      } catch (err) {\r\n        console.error('Error:', err);\r\n      }\r\n    };\r\n    loadIt();\r\n  }, []);\r\n\r\n  // NOTA: Ya no usamos localStorage para persistencia local\r\n  // La persistencia se maneja directamente al actualizar el estado\r\n\r\n  useEffect(() => {\r\n    const loadAlertCount = async () => {\r\n      try {\r\n        const alertas = await getMercadoAlerta();\r\n        const getStationCount = (alerts) => {\r\n          const estaciones = {};\r\n          alerts.forEach(a => {\r\n            estaciones[a.Nom_Eds || 'Sin nombre'] = true;\r\n          });\r\n          return Object.keys(estaciones).length;\r\n        };\r\n        const count = getStationCount(alertas);\r\n        setAlertCount(count);\r\n      } catch (err) {\r\n        console.error('Error al cargar alertas:', err);\r\n        setAlertCount(0);\r\n      }\r\n    };\r\n    loadAlertCount();\r\n    const interval = setInterval(loadAlertCount, 60000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleFiltersChange = React.useCallback((filtered, filteredForMercado) => {\r\n    setFilteredMarkers(filtered); // ‚Üê √önicos para visualizar\r\n    setFilteredMarkersForMercado(filteredForMercado); // ‚Üê Hist√≥rico completo filtrado\r\n  }, []);\r\n\r\n  const handleStationSelect = (station) => {\r\n    if (station && window.leafletMap) {\r\n      // Change region if needed\r\n      if (station.region !== selectedRegion) {\r\n        setSelectedRegion(station.region);\r\n      }\r\n      // Center map on station with zoom\r\n      setTimeout(() => {\r\n        window.leafletMap.setView([station.lat, station.lng], 15);\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  const toggleSidebar = () => {\r\n    setSidebarVisible(!sidebarVisible);\r\n    setTimeout(() => {\r\n      if (window.leafletMap) {\r\n        window.leafletMap.invalidateSize();\r\n      }\r\n    }, 300);\r\n  };\r\n\r\n  const toggleRightPanel = () => {\r\n    setRightPanelVisible(!rightPanelVisible);\r\n    setTimeout(() => {\r\n      if (window.leafletMap) {\r\n        window.leafletMap.invalidateSize();\r\n      }\r\n    }, 300);\r\n  };\r\n\r\n  const toggleAlertPanel = () => {\r\n    setAlertPanelVisible(!alertPanelVisible);\r\n  };\r\n\r\n  const toggleNivel2EnNivel1 = async (stationId) => {\r\n    // Actualizaci√≥n optimista\r\n    let newStations = [];\r\n    setNivel2EnNivel1Stations(prev => {\r\n      if (prev.includes(stationId)) {\r\n        newStations = prev.filter(id => id !== stationId);\r\n      } else {\r\n        newStations = [...prev, stationId];\r\n      }\r\n      return newStations;\r\n    });\r\n\r\n    // Guardar en backend\r\n    try {\r\n      await guardarMarcasCompartidas(newStations);\r\n    } catch (err) {\r\n      console.error('Error guardando marcas compartidas:', err);\r\n      // Revertir en caso de error (opcional, pero recomendado)\r\n      // Por simplicidad, recargamos del servidor\r\n      const marcas = await getMarcasCompartidas();\r\n      if (Array.isArray(marcas)) {\r\n        setNivel2EnNivel1Stations(marcas);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Estado para intercambiar aplicaciones\r\n  const [activeApp, setActiveApp] = useState('mapa'); // 'mapa' | 'calculos'\r\n\r\n  // Usuario autenticado para mostrar en navbar\r\n  const [loggedUser, setLoggedUser] = useState(() => {\r\n    try {\r\n      return localStorage.getItem('user_calc') || null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  // Estado para Login antes de entrar a Precios\r\n  const [showLogin, setShowLogin] = useState(false);\r\n  const [loginUser, setLoginUser] = useState('');\r\n  const [loginPassword, setLoginPassword] = useState('');\r\n  const [loginError, setLoginError] = useState('');\r\n  const [loginLoading, setLoginLoading] = useState(false);\r\n\r\n  const iframeRef = useRef(null);\r\n\r\n  // URL del proyecto frontend (Calculos)\r\n  // Desarrollo: normalmente corre en localhost:3001 (el segundo CRA se levanta en 3001)\r\n  // Producci√≥n: Carpeta hermana '../Calculos/' (Asumiendo que Mapa est√° en /Mapa/ y Calculos en /Calculos/)\r\n  const CALCULOS_APP_URL = process.env.NODE_ENV === 'development'\r\n    ? 'http://localhost:3001?mode=embed'\r\n    : '../Calculos/?mode=embed';\r\n\r\n  const handleOpenPrecios = () => {\r\n    setLoginUser('');\r\n    setLoginPassword('');\r\n    setLoginError('');\r\n    setShowLogin(true);\r\n  };\r\n\r\n  const handleLoginSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoginError('');\r\n    setLoginLoading(true);\r\n\r\n    const url = 'http://DE250329.esmax.cl/calculos/api/login.php';\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ user: loginUser, password: loginPassword })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(errorText || 'Error de autenticaci√≥n');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        try {\r\n          localStorage.setItem('user_calc', data.user);\r\n        } catch (e) {\r\n          // ignoramos errores de localStorage\r\n        }\r\n        const nombre = data.user || loginUser;\r\n        setLoggedUser(nombre);\r\n        setShowLogin(false);\r\n        setActiveApp('calculos');\r\n      } else {\r\n        setLoginError(data.error || 'Usuario o contrase√±a incorrectos');\r\n      }\r\n    } catch (err) {\r\n      setLoginError(err.message || 'Error al conectar con el servidor');\r\n    } finally {\r\n      setLoginLoading(false);\r\n    }\r\n  };\r\n\r\n  // Escuchar mensajes desde el iframe de c√°lculos (logout, etc.)\r\n  useEffect(() => {\r\n    const handleMessage = (event) => {\r\n      const { data } = event;\r\n      if (!data || typeof data !== 'object') return;\r\n\r\n      if (data.type === 'CALCULOS_LOGOUT') {\r\n        // Volver al mapa y limpiar usuario local\r\n        setActiveApp('mapa');\r\n        setLoggedUser(null);\r\n        try {\r\n          localStorage.removeItem('user_calc');\r\n        } catch (e) {\r\n          // ignoramos errores\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('message', handleMessage);\r\n    return () => window.removeEventListener('message', handleMessage);\r\n  }, []);\r\n\r\n  // Enviar usuario al iframe cuando est√© en vista c√°lculos\r\n  const sendUserToIframe = (userToSend) => {\r\n    if (!userToSend) return;\r\n    if (iframeRef.current && iframeRef.current.contentWindow) {\r\n      try {\r\n        iframeRef.current.contentWindow.postMessage(\r\n          { type: 'CALCULOS_SET_USER', user: userToSend },\r\n          '*'\r\n        );\r\n      } catch (e) {\r\n        // silencioso\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleIframeLoad = () => {\r\n    if (loggedUser) {\r\n      sendUserToIframe(loggedUser);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (activeApp === 'calculos' && loggedUser) {\r\n      sendUserToIframe(loggedUser);\r\n    }\r\n  }, [activeApp, loggedUser]);\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      {/* LOGIN COMO PANTALLA FLOTANTE PARA PRECIOS */}\r\n      {showLogin && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: '90px',\r\n            right: '24px',\r\n            zIndex: 9999\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              background: 'white',\r\n              borderRadius: '16px',\r\n              padding: '24px 28px',\r\n              width: '100%',\r\n              maxWidth: '380px',\r\n              boxShadow: '0 25px 50px -12px rgba(15,23,42,0.5)',\r\n              border: '1px solid #e2e8f0'\r\n            }}\r\n          >\r\n            <h2 style={{ margin: 0, marginBottom: '4px', fontSize: '20px', fontWeight: 700, color: '#0f172a' }}>Iniciar sesi√≥n</h2>\r\n            <p style={{ margin: 0, marginBottom: '16px', fontSize: '13px', color: '#64748b' }}>Acceso a m√≥dulo de C√°lculo de Precios</p>\r\n\r\n            {loginError && (\r\n              <div style={{ marginBottom: '12px', padding: '8px 10px', borderRadius: '8px', background: '#fee2e2', color: '#b91c1c', fontSize: '12px' }}>\r\n                {loginError}\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleLoginSubmit}>\r\n              <div style={{ marginBottom: '12px' }}>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Usuario\"\r\n                  value={loginUser}\r\n                  onChange={(e) => setLoginUser(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '8px 10px',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #cbd5e1',\r\n                    fontSize: '13px'\r\n                  }}\r\n                />\r\n              </div>\r\n              <div style={{ marginBottom: '16px' }}>\r\n                <input\r\n                  type=\"password\"\r\n                  placeholder=\"Contrase√±a\"\r\n                  value={loginPassword}\r\n                  onChange={(e) => setLoginPassword(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '8px 10px',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #cbd5e1',\r\n                    fontSize: '13px'\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', gap: '8px' }}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowLogin(false)}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '8px 10px',\r\n                    borderRadius: '999px',\r\n                    border: '1px solid #cbd5e1',\r\n                    background: 'white',\r\n                    color: '#0f172a',\r\n                    fontSize: '13px',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loginLoading}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '8px 10px',\r\n                    borderRadius: '999px',\r\n                    border: 'none',\r\n                    background: '#0ea5e9',\r\n                    color: 'white',\r\n                    fontSize: '13px',\r\n                    fontWeight: 600,\r\n                    cursor: loginLoading ? 'default' : 'pointer',\r\n                    opacity: loginLoading ? 0.7 : 1\r\n                  }}\r\n                >\r\n                  {loginLoading ? 'Validando...' : 'Entrar'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* ========== NAVBAR ========== */}\r\n      <nav className=\"navbar\">\r\n        <div className=\"navbar-container\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          {/* LEFT: Logo, T√≠tulo y Usuario */}\r\n          <div className=\"navbar-left\">\r\n            <h1 className=\"navbar-title\">S.I.M.E</h1>\r\n            <span className=\"navbar-subtitle\">Sistema Integrado de Mercado y Estrategia</span>\r\n            <div style={{ marginTop: '4px', fontSize: '12px', color: '#e2e8f0' }}>\r\n              <span style={{ opacity: 0.8 }}>Hola, </span>\r\n              <span style={{ fontWeight: 'bold' }}>{loggedUser || 'Invitado'}</span>\r\n            </div>\r\n            {/* Hora de Actualizaci√≥n */}\r\n            {lastUpdateTime && (\r\n              <div style={{\r\n                fontSize: '12px',\r\n                color: 'rgba(12, 12, 12, 0.85)',\r\n                marginTop: '2px'\r\n              }}>\r\n                <span style={{ fontWeight: 'bold' }}>Actualizado: </span>\r\n                <span>{typeof lastUpdateTime === 'string' ? lastUpdateTime : new Date(lastUpdateTime).toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit', hour12: false })}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* CENTER: App Switcher */}\r\n          <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n            <button\r\n              onClick={() => setActiveApp('mapa')}\r\n              style={{\r\n                background: activeApp === 'mapa' ? 'rgba(255,255,255,0.25)' : 'transparent',\r\n                color: 'white',\r\n                border: '1px solid rgba(255,255,255,0.5)',\r\n                borderRadius: '12px',\r\n                padding: '6px 16px',\r\n                fontSize: '13px',\r\n                cursor: 'pointer',\r\n                fontWeight: activeApp === 'mapa' ? 'bold' : 'normal',\r\n                transition: 'all 0.2s'\r\n              }}\r\n            >\r\n              üó∫Ô∏è Mapa\r\n            </button>\r\n            <button\r\n              onClick={handleOpenPrecios}\r\n              style={{\r\n                background: activeApp === 'calculos' ? 'rgba(255,255,255,0.25)' : 'transparent',\r\n                color: 'white',\r\n                border: '1px solid rgba(255,255,255,0.5)',\r\n                borderRadius: '12px',\r\n                padding: '6px 16px',\r\n                fontSize: '13px',\r\n                cursor: 'pointer',\r\n                fontWeight: activeApp === 'calculos' ? 'bold' : 'normal',\r\n                transition: 'all 0.2s'\r\n              }}\r\n            >\r\n              üî¢ Precios\r\n            </button>\r\n          </div>\r\n\r\n          {/* RIGHT: Alertas y Logo */}\r\n          <div className=\"navbar-right\" style={{ display: 'flex', gap: '15px', alignItems: 'center' }}>\r\n            {/* Alertas (solo en mapa) */}\r\n            {activeApp === 'mapa' && (\r\n              <button\r\n                className=\"navbar-alert-btn\"\r\n                onClick={toggleAlertPanel}\r\n                aria-label=\"Ver alertas de mercado\"\r\n                title=\"Alertas de mercado\"\r\n              >\r\n                üîî\r\n                {alertCount > 0 && (\r\n                  <span className=\"alert-badge\">{alertCount}</span>\r\n                )}\r\n              </button>\r\n            )}\r\n\r\n            <img\r\n              src={`${process.env.PUBLIC_URL}/iconos/aramco.jpg`}\r\n              alt=\"Aramco Logo\"\r\n              className=\"navbar-logo\"\r\n              onError={(e) => e.target.style.display = 'none'}\r\n            />\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* ========== PESTA√ëAS HORIZONTALES (Solo Mapa) ========== */}\r\n      {activeApp === 'mapa' && (\r\n        <div className=\"panel-tabs-horizontal\">\r\n          <button\r\n            className={`vertical-tab-btn ${sidebarVisible ? 'active' : ''}`}\r\n            onClick={toggleSidebar}\r\n          >\r\n            <div className=\"vertical-tab-label\">\r\n              {sidebarVisible ? 'OCULTAR FILTROS' : 'MOSTRAR FILTROS'}\r\n            </div>\r\n          </button>\r\n\r\n          <button\r\n            className={`vertical-tab-btn ${rightPanelVisible ? 'active' : ''}`}\r\n            onClick={toggleRightPanel}\r\n          >\r\n            <div className=\"vertical-tab-label\">\r\n              {rightPanelVisible ? 'OCULTAR DATOS' : 'MOSTRAR DATOS'}\r\n            </div>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* ========== MAIN CONTAINER ========== */}\r\n      <div className=\"main-container\">\r\n\r\n        {/* Renderizado Condicional: MAPA vs CALCULOS */}\r\n        {activeApp === 'mapa' ? (\r\n          <>\r\n            <aside className={`sidebar ${!sidebarVisible ? 'hidden' : ''}`}>\r\n              <h3 className=\"sidebar-title\">Filtros</h3>\r\n              <div className=\"filter-group\">\r\n                <label>Regi√≥n</label>\r\n                <select\r\n                  value={selectedRegion}\r\n                  onChange={(e) => setSelectedRegion(e.target.value)}\r\n                >\r\n                  {regions.map(region => (\r\n                    <option key={region} value={region}>\r\n                      {region}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <FilterPanel\r\n                markers={regionMarkers}\r\n                allMarkers={markers}\r\n                selectedRegion={selectedRegion}\r\n                onFiltersChange={handleFiltersChange}\r\n                onStationSelect={handleStationSelect}\r\n              />\r\n            </aside>\r\n\r\n            {(() => {\r\n              const markersToMap = filteredMarkers.length > 0 ? filteredMarkers : uniqueRegionMarkers;\r\n              return null;\r\n            })()}\r\n\r\n            <MapComponent\r\n              selectedRegion={selectedRegion}\r\n              regionCenter={REGION_COORDINATES[selectedRegion]}\r\n              markers={filteredMarkers.length > 0 ? filteredMarkers : uniqueRegionMarkers}\r\n              markersForMercado={filteredMarkers.length > 0 ? filteredMarkersForMercado : regionMarkers}\r\n              baseCompData={baseCompData}\r\n              onToggleSidebar={toggleSidebar}\r\n              onToggleRightPanel={toggleRightPanel}\r\n              sidebarVisible={sidebarVisible}\r\n              rightPanelVisible={rightPanelVisible}\r\n              nivel2EnNivel1Stations={nivel2EnNivel1Stations}\r\n              onToggleNivel2EnNivel1={toggleNivel2EnNivel1}\r\n            />\r\n\r\n            <aside className={`right-panel ${!rightPanelVisible ? 'hidden' : ''}`}>\r\n              <StatisticsPanel\r\n                markers={filteredMarkers.length > 0 ? filteredMarkers : uniqueRegionMarkers}\r\n                historicalMarkers={filteredMarkersForMercado.length > 0 ? filteredMarkersForMercado : regionMarkers}\r\n                allMarkers={markers}\r\n              />\r\n            </aside>\r\n\r\n            <AlertPanel\r\n              isVisible={alertPanelVisible}\r\n              onClose={toggleAlertPanel}\r\n            />\r\n          </>\r\n        ) : (\r\n          // IFRAME CALCULOS\r\n          <iframe\r\n            src={CALCULOS_APP_URL}\r\n            title=\"Calculadora Precios\"\r\n            style={{\r\n              width: '100%',\r\n              height: '100%',\r\n              border: 'none',\r\n              display: 'block'\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"navbar-version\">V3.0</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}